(()=>{var e={};e.id=241,e.ids=[241],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},71017:e=>{"use strict";e.exports=require("path")},81310:(e,t,r)=>{"use strict";let n,a;r.r(t),r.d(t,{originalPathname:()=>sI,patchFetch:()=>sC,requestAsyncStorage:()=>sE,routeModule:()=>sS,serverHooks:()=>sj,staticGenerationAsyncStorage:()=>sO});var s,i,o,l,u,c,d,p,m,f,h,g,y,v,_,b,w,x,k,T,S,E,O,j,I,C,N,A={};r.r(A),r.d(A,{GET:()=>sk,POST:()=>sT});var P=r(49303),$=r(88716),M=r(60670),R=r(24330);r(60166);var Z=r(71017),D=r.n(Z),L=r(57147),U=r(40618);let q=(0,R.j)("79ee2a44b6ed1508152f9793fd7aa4c7ebe6eddb",F);async function F(e){let t;let r=[],n=/##\s*(.+?)\n([\s\S]*?)(?=\n##|\n*$)/g;for(;null!==(t=n.exec(e));){let e=t[1].trim(),n=t[2].trim();r.push({heading:e,content:n})}return r}let z=(0,R.j)("2859c842cec278deeb531eab66802251f4986202",B);async function B(e,t){return e.find(e=>e.heading===t).replace(":","")}let J=(0,R.j)("6bf2eba56f8251ad2a4378b34e19f90d8baa72a7",V);async function V(e){let t=await G(e),r=et();return`${r}-${t}`}let K=(0,R.j)("35d1c05691d37598ee1eaed5d9b940afcd1c3ef7",W);async function W(e,t){return"/"+t+"/"+await G(e)+"/"}let G=(0,R.j)("6b6e2c58292cbd04a20d5cd2a871d54854aadb5a",H);async function H(e){return e.replace(/c#/gi,"csharp").toLowerCase().replace(/[^a-z0-9\s]/g,"").trim().replace(/\s+/g,"-")}let Y=(0,R.j)("018bf649b069052d463e63420ad4733b291b2cc8",Q);async function Q(e){let t=["in","the","for","and","of","on","at","to","with","using"];return e.toLowerCase().replace(/\b\w+/g,(e,r)=>0!==r&&t.includes(e)?e:e.charAt(0).toUpperCase()+e.slice(1)).replace(/Csharp/i,"C#")}let X=(0,R.j)("edf92e052a771a140cb9db39bc91895ba07598b1",ee);async function ee(e){return e.split("\n").map(e=>{let t=(e.match(/^#+/)||[""])[0].length;return t<2?e.replace(/^#+/,"##"):t>2?e.replace(/^#+/,"##"):e}).join("\n")}let et=()=>{let e=new Date,t=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Karachi",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(e),r=t.find(e=>"year"===e.type)?.value,n=t.find(e=>"month"===e.type)?.value,a=t.find(e=>"day"===e.type)?.value;return`${r}-${n}-${a}`},er=(0,R.j)("29c7b38884e84fdbabfc3f511a1e0312ac567d2d",en);async function en(e){try{return await L.promises.access(e),!0}catch{return!1}}let ea=(0,R.j)("a02da7af8ec7de61ff09818383be663a2b1a5f79",es);async function es(){let e=new Date,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getUTCDay()],r=e.getUTCDate().toString().padStart(2,"0"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getUTCMonth()],a=e.getUTCFullYear(),s=e.getUTCHours().toString().padStart(2,"0"),i=e.getUTCMinutes().toString().padStart(2,"0"),o=e.getUTCSeconds().toString().padStart(2,"0");return`${t}, ${r} ${n} ${a} ${s}:${i}:${o} +0000`}let ei=(0,R.j)("0f8bda16527999eed4031f1fdddd12ab3bf5807c",eo);async function eo(e){return console.log("start"),await new Promise(e=>setTimeout(e,1e3)),console.log("end"),`# ${e}
This file is for language: ${e}`}(0,U.h)([q,z,J,K,G,Y,X,er,ea,ei]),(0,R.j)("04ef008bdf6542d424cf173749d32caeb0c1aa61",q),(0,R.j)("db70233def9dcbc77d1f11373fa7446935c2d8c6",z),(0,R.j)("c9eea8a60497f3998a29d82114c6f68354f1b7dd",J),(0,R.j)("059792cae592e2d04053a89e536767b39c69ad33",K),(0,R.j)("32ad231a00c7b908b9aae5dad7fe8efedbe6cc46",G),(0,R.j)("1cac3e835255a55ac755ac0702b5c6c1ef5e6780",Y),(0,R.j)("b7c3f7f40ddccfd03d04f5ed3d2b4a39e3609af8",X),(0,R.j)("e76e789f95d50ccc1d31e5513188a7449aa882cb",er),(0,R.j)("b1e571bebd309c1b005524d5f610230fedcefdc8",ea),(0,R.j)("be5785310fdf67e55068b8d6b905402671ed7f28",ei);var el="vercel.ai.error",eu=Symbol.for(el),ec=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[s]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,el)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};s=eu;var ed=ec,ep="AI_APICallError",em=`vercel.ai.error.${ep}`,ef=Symbol.for(em),eh=class extends ed{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:s,cause:o,isRetryable:l=null!=n&&(408===n||409===n||429===n||n>=500),data:u}){super({name:ep,message:e,cause:o}),this[i]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(e){return ed.hasMarker(e,em)}static isAPICallError(e){return e instanceof Error&&e.name===ep&&"string"==typeof e.url&&"object"==typeof e.requestBodyValues&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.responseHeaders||"object"==typeof e.responseHeaders)&&(null==e.responseBody||"string"==typeof e.responseBody)&&(null==e.cause||"object"==typeof e.cause)&&"boolean"==typeof e.isRetryable&&(null==e.data||"object"==typeof e.data)}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};i=ef;var eg="AI_EmptyResponseBodyError",ey=`vercel.ai.error.${eg}`,ev=Symbol.for(ey),e_=class extends ed{constructor({message:e="Empty response body"}={}){super({name:eg,message:e}),this[o]=!0}static isInstance(e){return ed.hasMarker(e,ey)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===eg}};function eb(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}o=ev;var ew="AI_InvalidPromptError",ex=`vercel.ai.error.${ew}`,ek=Symbol.for(ex),eT=class extends ed{constructor({prompt:e,message:t,cause:r}){super({name:ew,message:`Invalid prompt: ${t}`,cause:r}),this[l]=!0,this.prompt=e}static isInstance(e){return ed.hasMarker(e,ex)}static isInvalidPromptError(e){return e instanceof Error&&e.name===ew&&null!=prompt}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};l=ek;var eS="AI_InvalidResponseDataError",eE=`vercel.ai.error.${eS}`,eO=Symbol.for(eE),ej=class extends ed{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:eS,message:t}),this[u]=!0,this.data=e}static isInstance(e){return ed.hasMarker(e,eE)}static isInvalidResponseDataError(e){return e instanceof Error&&e.name===eS&&null!=e.data}toJSON(){return{name:this.name,message:this.message,stack:this.stack,data:this.data}}};u=eO;var eI="AI_JSONParseError",eC=`vercel.ai.error.${eI}`,eN=Symbol.for(eC),eA=class extends ed{constructor({text:e,cause:t}){super({name:eI,message:`JSON parsing failed: Text: ${e}.
Error message: ${eb(t)}`,cause:t}),this[c]=!0,this.text=e}static isInstance(e){return ed.hasMarker(e,eC)}static isJSONParseError(e){return e instanceof Error&&e.name===eI&&"text"in e&&"string"==typeof e.text}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};c=eN;var eP="AI_LoadAPIKeyError",e$=`vercel.ai.error.${eP}`,eM=Symbol.for(e$),eR=class extends ed{constructor({message:e}){super({name:eP,message:e}),this[d]=!0}static isInstance(e){return ed.hasMarker(e,e$)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===eP}};d=eM,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var eZ="AI_NoSuchModelError",eD=`vercel.ai.error.${eZ}`,eL=Symbol.for(eD),eU=class extends ed{constructor({errorName:e=eZ,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[p]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return ed.hasMarker(e,eD)}static isNoSuchModelError(e){return e instanceof Error&&e.name===eZ&&"string"==typeof e.modelId&&"string"==typeof e.modelType}toJSON(){return{name:this.name,message:this.message,stack:this.stack,modelId:this.modelId,modelType:this.modelType}}};p=eL;var eq="AI_TooManyEmbeddingValuesForCallError",eF=`vercel.ai.error.${eq}`,ez=Symbol.for(eF),eB=class extends ed{constructor(e){super({name:eq,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[m]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return ed.hasMarker(e,eF)}static isTooManyEmbeddingValuesForCallError(e){return e instanceof Error&&e.name===eq&&"provider"in e&&"string"==typeof e.provider&&"modelId"in e&&"string"==typeof e.modelId&&"maxEmbeddingsPerCall"in e&&"number"==typeof e.maxEmbeddingsPerCall&&"values"in e&&Array.isArray(e.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};m=ez;var eJ="AI_TypeValidationError",eV=`vercel.ai.error.${eJ}`,eK=Symbol.for(eV),eW=class e extends ed{constructor({value:e,cause:t}){super({name:eJ,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${eb(t)}`,cause:t}),this[f]=!0,this.value=e}static isInstance(e){return ed.hasMarker(e,eV)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===eJ}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};f=eK;var eG="AI_UnsupportedFunctionalityError",eH=`vercel.ai.error.${eG}`,eY=Symbol.for(eH),eQ=class extends ed{constructor({functionality:e}){super({name:eG,message:`'${e}' functionality not supported.`}),this[h]=!0,this.functionality=e}static isInstance(e){return ed.hasMarker(e,eH)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===eG&&"string"==typeof e.functionality}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};function eX(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(eX):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&eX(t)))}h=eY;let e0=(e,t=21)=>(r=t)=>{let n="",a=r;for(;a--;)n+=e[Math.random()*e.length|0];return n};var e1=r(45762);let e2=[239,187,191];class e9 extends TransformStream{constructor(){let e;super({start(t){e=function(e){let t,r,n,a,s,i,o;return l(),{feed:function(l){var u;r=r?r+l:l,t&&(u=r,e2.every((e,t)=>u.charCodeAt(t)===e))&&(r=r.slice(e2.length)),t=!1;let c=r.length,d=0,p=!1;for(;d<c;){let t;p&&("\n"===r[d]&&++d,p=!1);let l=-1,u=a;for(let e=n;l<0&&e<c;++e)":"===(t=r[e])&&u<0?u=e-d:"\r"===t?(p=!0,l=e-d):"\n"===t&&(l=e-d);if(l<0){n=c-d,a=u;break}n=0,a=-1,function(t,r,n,a){if(0===a){o.length>0&&(e({type:"event",id:s,event:i||void 0,data:o.slice(0,-1)}),o="",s=void 0),i=void 0;return}let l=n<0,u=t.slice(r,r+(l?a:n)),c=0;c=l?a:" "===t[r+n+1]?n+2:n+1;let d=r+c,p=a-c,m=t.slice(d,d+p).toString();if("data"===u)o+=m?"".concat(m,"\n"):"\n";else if("event"===u)i=m;else if("id"!==u||m.includes("\0")){if("retry"===u){let t=parseInt(m,10);Number.isNaN(t)||e({type:"reconnect-interval",value:t})}}else s=m}(r,d,u,l),d+=l+1}d===c?r="":d>0&&(r=r.slice(d))},reset:l};function l(){t=!0,r="",n=0,a=-1,s=void 0,i=void 0,o=""}}(e=>{"event"===e.type&&t.enqueue(e)})},transform(t){e.feed(t)}})}}function e4(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function e6(e){let t={};return e.headers.forEach((e,r)=>{t[r]=e}),t}var e8=({prefix:e="",size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{let n=e0(r,t);return t=>`${e}${n(t)}`},e7=e8();function e3(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function e5(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}var te=Symbol.for("vercel.ai.validator");function tt({value:e,schema:t}){let r="object"==typeof t&&null!==t&&te in t&&!0===t[te]&&"validate"in t?t:{[te]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:eW.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:eW.wrap({value:e,cause:t})}}}function tr({text:e,schema:t}){try{let r=e1.parse(e);if(null==t)return{success:!0,value:r};return tt({value:r,schema:t})}catch(t){return{success:!1,error:eA.isJSONParseError(t)?t:new eA({text:e,cause:t})}}}function tn(e){try{return e1.parse(e),!0}catch(e){return!1}}var ta=()=>globalThis.fetch,ts=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i})=>ti({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i}),ti=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:a,abortSignal:s,fetch:i=ta()})=>{try{let o=await i(e,{method:"POST",headers:Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),body:r.content,signal:s}),l=e6(o);if(!o.ok){let t;try{t=await a({response:o,url:e,requestBodyValues:r.values})}catch(t){if(e5(t)||eh.isAPICallError(t))throw t;throw new eh({message:"Failed to process error response",cause:t,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw t.value}try{return await n({response:o,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(e5(t)||eh.isAPICallError(t)))throw t;throw new eh({message:"Failed to process successful response",cause:t,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(t){if(e5(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let n=t.cause;if(null!=n)throw new eh({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r.values,isRetryable:!0})}throw t}},to=e=>async({response:t})=>{let r=e6(t);if(null==t.body)throw new e_({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new e9).pipeThrough(new TransformStream({transform({data:t},r){"[DONE]"!==t&&r.enqueue(tr({text:t,schema:e}))}}))}},tl=e=>async({response:t,url:r,requestBodyValues:n})=>{let a=await t.text(),s=tr({text:a,schema:e}),i=e6(t);if(!s.success)throw new eh({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:a,url:r,requestBodyValues:n});return{responseHeaders:i,value:s.value}},{btoa:tu,atob:tc}=globalThis;function td(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return tu(t)}(function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(g||(g={})),(y||(y={})).mergeShapes=(e,t)=>({...e,...t});let tp=g.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tm=e=>{switch(typeof e){case"undefined":return tp.undefined;case"string":return tp.string;case"number":return isNaN(e)?tp.nan:tp.number;case"boolean":return tp.boolean;case"function":return tp.function;case"bigint":return tp.bigint;case"symbol":return tp.symbol;case"object":if(Array.isArray(e))return tp.array;if(null===e)return tp.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return tp.promise;if("undefined"!=typeof Map&&e instanceof Map)return tp.map;if("undefined"!=typeof Set&&e instanceof Set)return tp.set;if("undefined"!=typeof Date&&e instanceof Date)return tp.date;return tp.object;default:return tp.unknown}},tf=g.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class th extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof th))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,g.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}th.create=e=>new th(e);let tg=(e,t)=>{let r;switch(e.code){case tf.invalid_type:r=e.received===tp.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case tf.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,g.jsonStringifyReplacer)}`;break;case tf.unrecognized_keys:r=`Unrecognized key(s) in object: ${g.joinValues(e.keys,", ")}`;break;case tf.invalid_union:r="Invalid input";break;case tf.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${g.joinValues(e.options)}`;break;case tf.invalid_enum_value:r=`Invalid enum value. Expected ${g.joinValues(e.options)}, received '${e.received}'`;break;case tf.invalid_arguments:r="Invalid function arguments";break;case tf.invalid_return_type:r="Invalid function return type";break;case tf.invalid_date:r="Invalid date";break;case tf.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:g.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case tf.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case tf.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case tf.custom:r="Invalid input";break;case tf.invalid_intersection_types:r="Intersection results could not be merged";break;case tf.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case tf.not_finite:r="Number must be finite";break;default:r=t.defaultError,g.assertNever(e)}return{message:r}},ty=tg;function tv(){return ty}let t_=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}};function tb(e,t){let r=tv(),n=t_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===tg?void 0:tg].filter(e=>!!e)});e.common.issues.push(n)}class tw{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return tx;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return tw.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:a}=n;if("aborted"===t.status||"aborted"===a.status)return tx;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||n.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let tx=Object.freeze({status:"aborted"}),tk=e=>({status:"dirty",value:e}),tT=e=>({status:"valid",value:e}),tS=e=>"aborted"===e.status,tE=e=>"dirty"===e.status,tO=e=>"valid"===e.status,tj=e=>"undefined"!=typeof Promise&&e instanceof Promise;function tI(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function tC(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(v||(v={}));class tN{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let tA=(e,t)=>{if(tO(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new th(e.common.issues);return this._error=t,this._error}}};function tP(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var s,i;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(s=null!=o?o:n)&&void 0!==s?s:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(i=null!=o?o:r)&&void 0!==i?i:a.defaultError}},description:a}}class t${constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return tm(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tm(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tw,ctx:{common:e.parent.common,data:e.data,parsedType:tm(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(tj(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tm(e)},a=this._parseSync({data:e,path:n.path,parent:n});return tA(n,a)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tm(e)},n=this._parse({data:e,path:r.path,parent:r});return tA(r,await (tj(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let a=e(t),s=()=>n.addIssue({code:tf.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new rf({schema:this,typeName:w.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return rh.create(this,this._def)}nullable(){return rg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return t7.create(this,this._def)}promise(){return rm.create(this,this._def)}or(e){return t5.create([this,e],this._def)}and(e){return rr.create(this,e,this._def)}transform(e){return new rf({...tP(this._def),schema:this,typeName:w.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ry({...tP(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:w.ZodDefault})}brand(){return new rw({typeName:w.ZodBranded,type:this,...tP(this._def)})}catch(e){return new rv({...tP(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:w.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return rx.create(this,e)}readonly(){return rk.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let tM=/^c[^\s-]{8,}$/i,tR=/^[0-9a-z]+$/,tZ=/^[0-9A-HJKMNP-TV-Z]{26}$/,tD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tL=/^[a-z0-9_-]{21}$/i,tU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,tF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tz=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,tB=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tJ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tV=RegExp(`^${tJ}$`);function tK(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function tW(e){let t=`${tJ}T${tK(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class tG extends t${_parse(e){var t,r;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tp.string){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.string,received:t.parsedType}),tx}let s=new tw;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(tb(a=this._getOrReturnCtx(e,a),{code:tf.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if("max"===i.kind)e.data.length>i.value&&(tb(a=this._getOrReturnCtx(e,a),{code:tf.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if("length"===i.kind){let t=e.data.length>i.value,r=e.data.length<i.value;(t||r)&&(a=this._getOrReturnCtx(e,a),t?tb(a,{code:tf.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&tb(a,{code:tf.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if("email"===i.kind)tq.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"email",code:tf.invalid_string,message:i.message}),s.dirty());else if("emoji"===i.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"emoji",code:tf.invalid_string,message:i.message}),s.dirty());else if("uuid"===i.kind)tD.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"uuid",code:tf.invalid_string,message:i.message}),s.dirty());else if("nanoid"===i.kind)tL.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"nanoid",code:tf.invalid_string,message:i.message}),s.dirty());else if("cuid"===i.kind)tM.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"cuid",code:tf.invalid_string,message:i.message}),s.dirty());else if("cuid2"===i.kind)tR.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"cuid2",code:tf.invalid_string,message:i.message}),s.dirty());else if("ulid"===i.kind)tZ.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"ulid",code:tf.invalid_string,message:i.message}),s.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(t){tb(a=this._getOrReturnCtx(e,a),{validation:"url",code:tf.invalid_string,message:i.message}),s.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"regex",code:tf.invalid_string,message:i.message}),s.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(tb(a=this._getOrReturnCtx(e,a),{code:tf.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(tb(a=this._getOrReturnCtx(e,a),{code:tf.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(tb(a=this._getOrReturnCtx(e,a),{code:tf.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):"datetime"===i.kind?tW(i).test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{code:tf.invalid_string,validation:"datetime",message:i.message}),s.dirty()):"date"===i.kind?tV.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{code:tf.invalid_string,validation:"date",message:i.message}),s.dirty()):"time"===i.kind?RegExp(`^${tK(i)}$`).test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{code:tf.invalid_string,validation:"time",message:i.message}),s.dirty()):"duration"===i.kind?tU.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"duration",code:tf.invalid_string,message:i.message}),s.dirty()):"ip"===i.kind?(t=e.data,("v4"===(r=i.version)||!r)&&tF.test(t)||("v6"===r||!r)&&tz.test(t)||(tb(a=this._getOrReturnCtx(e,a),{validation:"ip",code:tf.invalid_string,message:i.message}),s.dirty())):"base64"===i.kind?tB.test(e.data)||(tb(a=this._getOrReturnCtx(e,a),{validation:"base64",code:tf.invalid_string,message:i.message}),s.dirty()):g.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:tf.invalid_string,...v.errToObj(r)})}_addCheck(e){return new tG({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...v.errToObj(e)})}url(e){return this._addCheck({kind:"url",...v.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...v.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...v.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...v.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...v.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...v.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...v.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...v.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...v.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...v.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...v.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...v.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...v.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...v.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...v.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...v.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...v.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...v.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...v.errToObj(t)})}nonempty(e){return this.min(1,v.errToObj(e))}trim(){return new tG({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new tG({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new tG({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}tG.create=e=>{var t;return new tG({checks:[],typeName:w.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tP(e)})};class tH extends t${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tp.number){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.number,received:t.parsedType}),tx}let r=new tw;for(let n of this._def.checks)"int"===n.kind?g.isInteger(e.data)||(tb(t=this._getOrReturnCtx(e,t),{code:tf.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,n.value)&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(tb(t=this._getOrReturnCtx(e,t),{code:tf.not_finite,message:n.message}),r.dirty()):g.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,r,n){return new tH({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:v.toString(n)}]})}_addCheck(e){return new tH({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:v.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:v.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:v.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:v.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&g.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}tH.create=e=>new tH({checks:[],typeName:w.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...tP(e)});class tY extends t${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==tp.bigint){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.bigint,received:t.parsedType}),tx}let r=new tw;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):g.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,r,n){return new tY({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:v.toString(n)}]})}_addCheck(e){return new tY({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}tY.create=e=>{var t;return new tY({checks:[],typeName:w.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tP(e)})};class tQ extends t${_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tp.boolean){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.boolean,received:t.parsedType}),tx}return tT(e.data)}}tQ.create=e=>new tQ({typeName:w.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...tP(e)});class tX extends t${_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tp.date){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.date,received:t.parsedType}),tx}if(isNaN(e.data.getTime()))return tb(this._getOrReturnCtx(e),{code:tf.invalid_date}),tx;let r=new tw;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(tb(t=this._getOrReturnCtx(e,t),{code:tf.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):g.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tX({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:v.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:v.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}tX.create=e=>new tX({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:w.ZodDate,...tP(e)});class t0 extends t${_parse(e){if(this._getType(e)!==tp.symbol){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.symbol,received:t.parsedType}),tx}return tT(e.data)}}t0.create=e=>new t0({typeName:w.ZodSymbol,...tP(e)});class t1 extends t${_parse(e){if(this._getType(e)!==tp.undefined){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.undefined,received:t.parsedType}),tx}return tT(e.data)}}t1.create=e=>new t1({typeName:w.ZodUndefined,...tP(e)});class t2 extends t${_parse(e){if(this._getType(e)!==tp.null){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.null,received:t.parsedType}),tx}return tT(e.data)}}t2.create=e=>new t2({typeName:w.ZodNull,...tP(e)});class t9 extends t${constructor(){super(...arguments),this._any=!0}_parse(e){return tT(e.data)}}t9.create=e=>new t9({typeName:w.ZodAny,...tP(e)});class t4 extends t${constructor(){super(...arguments),this._unknown=!0}_parse(e){return tT(e.data)}}t4.create=e=>new t4({typeName:w.ZodUnknown,...tP(e)});class t6 extends t${_parse(e){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.never,received:t.parsedType}),tx}}t6.create=e=>new t6({typeName:w.ZodNever,...tP(e)});class t8 extends t${_parse(e){if(this._getType(e)!==tp.undefined){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.void,received:t.parsedType}),tx}return tT(e.data)}}t8.create=e=>new t8({typeName:w.ZodVoid,...tP(e)});class t7 extends t${_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==tp.array)return tb(t,{code:tf.invalid_type,expected:tp.array,received:t.parsedType}),tx;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(tb(t,{code:e?tf.too_big:tf.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(tb(t,{code:tf.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(tb(t,{code:tf.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new tN(t,e,t.path,r)))).then(e=>tw.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new tN(t,e,t.path,r)));return tw.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new t7({...this._def,minLength:{value:e,message:v.toString(t)}})}max(e,t){return new t7({...this._def,maxLength:{value:e,message:v.toString(t)}})}length(e,t){return new t7({...this._def,exactLength:{value:e,message:v.toString(t)}})}nonempty(e){return this.min(1,e)}}t7.create=(e,t)=>new t7({type:e,minLength:null,maxLength:null,exactLength:null,typeName:w.ZodArray,...tP(t)});class t3 extends t${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=g.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==tp.object){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.object,received:t.parsedType}),tx}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof t6&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||s.push(e);let i=[];for(let e of a){let t=n[e],a=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new tN(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof t6){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(tb(r,{code:tf.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new tN(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>tw.mergeObjectSync(t,e)):tw.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return v.errToObj,new t3({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,a,s,i;let o=null!==(s=null===(a=(n=this._def).errorMap)||void 0===a?void 0:a.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=v.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new t3({...this._def,unknownKeys:"strip"})}passthrough(){return new t3({...this._def,unknownKeys:"passthrough"})}extend(e){return new t3({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t3({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:w.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new t3({...this._def,catchall:e})}pick(e){let t={};return g.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new t3({...this._def,shape:()=>t})}omit(e){let t={};return g.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new t3({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof t3){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=rh.create(e(a))}return new t3({...t._def,shape:()=>r})}return t instanceof t7?new t7({...t._def,type:e(t.element)}):t instanceof rh?rh.create(e(t.unwrap())):t instanceof rg?rg.create(e(t.unwrap())):t instanceof rn?rn.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return g.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new t3({...this._def,shape:()=>t})}required(e){let t={};return g.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof rh;)e=e._def.innerType;t[r]=e}}),new t3({...this._def,shape:()=>t})}keyof(){return rc(g.objectKeys(this.shape))}}t3.create=(e,t)=>new t3({shape:()=>e,unknownKeys:"strip",catchall:t6.create(),typeName:w.ZodObject,...tP(t)}),t3.strictCreate=(e,t)=>new t3({shape:()=>e,unknownKeys:"strict",catchall:t6.create(),typeName:w.ZodObject,...tP(t)}),t3.lazycreate=(e,t)=>new t3({shape:e,unknownKeys:"strip",catchall:t6.create(),typeName:w.ZodObject,...tP(t)});class t5 extends t${_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new th(e.ctx.common.issues));return tb(t,{code:tf.invalid_union,unionErrors:r}),tx});{let e;let n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new th(e));return tb(t,{code:tf.invalid_union,unionErrors:a}),tx}}get options(){return this._def.options}}t5.create=(e,t)=>new t5({options:e,typeName:w.ZodUnion,...tP(t)});let re=e=>{if(e instanceof rl)return re(e.schema);if(e instanceof rf)return re(e.innerType());if(e instanceof ru)return[e.value];if(e instanceof rd)return e.options;if(e instanceof rp)return g.objectValues(e.enum);if(e instanceof ry)return re(e._def.innerType);if(e instanceof t1)return[void 0];else if(e instanceof t2)return[null];else if(e instanceof rh)return[void 0,...re(e.unwrap())];else if(e instanceof rg)return[null,...re(e.unwrap())];else if(e instanceof rw)return re(e.unwrap());else if(e instanceof rk)return re(e.unwrap());else if(e instanceof rv)return re(e._def.innerType);else return[]};class rt extends t${_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tp.object)return tb(t,{code:tf.invalid_type,expected:tp.object,received:t.parsedType}),tx;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(tb(t,{code:tf.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),tx)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=re(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new rt({typeName:w.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...tP(r)})}}class rr extends t${_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(tS(e)||tS(n))return tx;let a=function e(t,r){let n=tm(t),a=tm(r);if(t===r)return{valid:!0,data:t};if(n===tp.object&&a===tp.object){let n=g.objectKeys(r),a=g.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};s[n]=a.data}return{valid:!0,data:s}}if(n===tp.array&&a===tp.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let s=e(t[a],r[a]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===tp.date&&a===tp.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return a.valid?((tE(e)||tE(n))&&t.dirty(),{status:t.value,value:a.data}):(tb(r,{code:tf.invalid_intersection_types}),tx)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rr.create=(e,t,r)=>new rr({left:e,right:t,typeName:w.ZodIntersection,...tP(r)});class rn extends t${_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tp.array)return tb(r,{code:tf.invalid_type,expected:tp.array,received:r.parsedType}),tx;if(r.data.length<this._def.items.length)return tb(r,{code:tf.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tx;!this._def.rest&&r.data.length>this._def.items.length&&(tb(r,{code:tf.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new tN(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>tw.mergeArray(t,e)):tw.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new rn({...this._def,rest:e})}}rn.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new rn({items:e,typeName:w.ZodTuple,rest:null,...tP(t)})};class ra extends t${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tp.object)return tb(r,{code:tf.invalid_type,expected:tp.object,received:r.parsedType}),tx;let n=[],a=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new tN(r,e,r.path,e)),value:s._parse(new tN(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?tw.mergeObjectAsync(t,n):tw.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ra(t instanceof t$?{keyType:e,valueType:t,typeName:w.ZodRecord,...tP(r)}:{keyType:tG.create(),valueType:e,typeName:w.ZodRecord,...tP(t)})}}class rs extends t${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tp.map)return tb(r,{code:tf.invalid_type,expected:tp.map,received:r.parsedType}),tx;let n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new tN(r,e,r.path,[s,"key"])),value:a._parse(new tN(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return tx;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return tx;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}rs.create=(e,t,r)=>new rs({valueType:t,keyType:e,typeName:w.ZodMap,...tP(r)});class ri extends t${_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tp.set)return tb(r,{code:tf.invalid_type,expected:tp.set,received:r.parsedType}),tx;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(tb(r,{code:tf.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(tb(r,{code:tf.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return tx;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>a._parse(new tN(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new ri({...this._def,minSize:{value:e,message:v.toString(t)}})}max(e,t){return new ri({...this._def,maxSize:{value:e,message:v.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ri.create=(e,t)=>new ri({valueType:e,minSize:null,maxSize:null,typeName:w.ZodSet,...tP(t)});class ro extends t${constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tp.function)return tb(t,{code:tf.invalid_type,expected:tp.function,received:t.parsedType}),tx;function r(e,r){return t_({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tv(),tg].filter(e=>!!e),issueData:{code:tf.invalid_arguments,argumentsError:r}})}function n(e,r){return t_({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tv(),tg].filter(e=>!!e),issueData:{code:tf.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof rm){let e=this;return tT(async function(...t){let i=new th([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw i.addIssue(n(l,e)),i})})}{let e=this;return tT(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new th([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new th([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ro({...this._def,args:rn.create(e).rest(t4.create())})}returns(e){return new ro({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ro({args:e||rn.create([]).rest(t4.create()),returns:t||t4.create(),typeName:w.ZodFunction,...tP(r)})}}class rl extends t${get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}rl.create=(e,t)=>new rl({getter:e,typeName:w.ZodLazy,...tP(t)});class ru extends t${_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return tb(t,{received:t.data,code:tf.invalid_literal,expected:this._def.value}),tx}return{status:"valid",value:e.data}}get value(){return this._def.value}}function rc(e,t){return new rd({values:e,typeName:w.ZodEnum,...tP(t)})}ru.create=(e,t)=>new ru({value:e,typeName:w.ZodLiteral,...tP(t)});class rd extends t${constructor(){super(...arguments),_.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return tb(t,{expected:g.joinValues(r),received:t.parsedType,code:tf.invalid_type}),tx}if(tI(this,_,"f")||tC(this,_,new Set(this._def.values),"f"),!tI(this,_,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return tb(t,{received:t.data,code:tf.invalid_enum_value,options:r}),tx}return tT(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return rd.create(e,{...this._def,...t})}exclude(e,t=this._def){return rd.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}_=new WeakMap,rd.create=rc;class rp extends t${constructor(){super(...arguments),b.set(this,void 0)}_parse(e){let t=g.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==tp.string&&r.parsedType!==tp.number){let e=g.objectValues(t);return tb(r,{expected:g.joinValues(e),received:r.parsedType,code:tf.invalid_type}),tx}if(tI(this,b,"f")||tC(this,b,new Set(g.getValidEnumValues(this._def.values)),"f"),!tI(this,b,"f").has(e.data)){let e=g.objectValues(t);return tb(r,{received:r.data,code:tf.invalid_enum_value,options:e}),tx}return tT(e.data)}get enum(){return this._def.values}}b=new WeakMap,rp.create=(e,t)=>new rp({values:e,typeName:w.ZodNativeEnum,...tP(t)});class rm extends t${unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==tp.promise&&!1===t.common.async?(tb(t,{code:tf.invalid_type,expected:tp.promise,received:t.parsedType}),tx):tT((t.parsedType===tp.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}rm.create=(e,t)=>new rm({type:e,typeName:w.ZodPromise,...tP(t)});class rf extends t${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===w.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{tb(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return tx;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?tx:"dirty"===n.status||"dirty"===t.value?tk(n.value):n});{if("aborted"===t.value)return tx;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?tx:"dirty"===n.status||"dirty"===t.value?tk(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?tx:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?tx:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>tO(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!tO(e))return e;let s=n.transform(e.value,a);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}g.assertNever(n)}}rf.create=(e,t,r)=>new rf({schema:e,typeName:w.ZodEffects,effect:t,...tP(r)}),rf.createWithPreprocess=(e,t,r)=>new rf({schema:t,effect:{type:"preprocess",transform:e},typeName:w.ZodEffects,...tP(r)});class rh extends t${_parse(e){return this._getType(e)===tp.undefined?tT(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rh.create=(e,t)=>new rh({innerType:e,typeName:w.ZodOptional,...tP(t)});class rg extends t${_parse(e){return this._getType(e)===tp.null?tT(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rg.create=(e,t)=>new rg({innerType:e,typeName:w.ZodNullable,...tP(t)});class ry extends t${_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===tp.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ry.create=(e,t)=>new ry({innerType:e,typeName:w.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...tP(t)});class rv extends t${_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return tj(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new th(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new th(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rv.create=(e,t)=>new rv({innerType:e,typeName:w.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...tP(t)});class r_ extends t${_parse(e){if(this._getType(e)!==tp.nan){let t=this._getOrReturnCtx(e);return tb(t,{code:tf.invalid_type,expected:tp.nan,received:t.parsedType}),tx}return{status:"valid",value:e.data}}}r_.create=e=>new r_({typeName:w.ZodNaN,...tP(e)});let rb=Symbol("zod_brand");class rw extends t${_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class rx extends t${_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tx:"dirty"===e.status?(t.dirty(),tk(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tx:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new rx({in:e,out:t,typeName:w.ZodPipeline})}}class rk extends t${_parse(e){let t=this._def.innerType._parse(e),r=e=>(tO(e)&&(e.value=Object.freeze(e.value)),e);return tj(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function rT(e,t={},r){return e?t9.create().superRefine((n,a)=>{var s,i;if(!e(n)){let e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i;a.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:o})}}):t9.create()}rk.create=(e,t)=>new rk({innerType:e,typeName:w.ZodReadonly,...tP(t)});let rS={object:t3.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(w||(w={}));let rE=tG.create,rO=tH.create,rj=r_.create,rI=tY.create,rC=tQ.create,rN=tX.create,rA=t0.create,rP=t1.create,r$=t2.create,rM=t9.create,rR=t4.create,rZ=t6.create,rD=t8.create,rL=t7.create,rU=t3.create,rq=t3.strictCreate,rF=t5.create,rz=rt.create,rB=rr.create,rJ=rn.create,rV=ra.create,rK=rs.create,rW=ri.create,rG=ro.create,rH=rl.create,rY=ru.create,rQ=rd.create,rX=rp.create,r0=rm.create,r1=rf.create,r2=rh.create,r9=rg.create,r4=rf.createWithPreprocess,r6=rx.create;var r8=Object.freeze({__proto__:null,defaultErrorMap:tg,setErrorMap:function(e){ty=e},getErrorMap:tv,makeIssue:t_,EMPTY_PATH:[],addIssueToContext:tb,ParseStatus:tw,INVALID:tx,DIRTY:tk,OK:tT,isAborted:tS,isDirty:tE,isValid:tO,isAsync:tj,get util(){return g},get objectUtil(){return y},ZodParsedType:tp,getParsedType:tm,ZodType:t$,datetimeRegex:tW,ZodString:tG,ZodNumber:tH,ZodBigInt:tY,ZodBoolean:tQ,ZodDate:tX,ZodSymbol:t0,ZodUndefined:t1,ZodNull:t2,ZodAny:t9,ZodUnknown:t4,ZodNever:t6,ZodVoid:t8,ZodArray:t7,ZodObject:t3,ZodUnion:t5,ZodDiscriminatedUnion:rt,ZodIntersection:rr,ZodTuple:rn,ZodRecord:ra,ZodMap:rs,ZodSet:ri,ZodFunction:ro,ZodLazy:rl,ZodLiteral:ru,ZodEnum:rd,ZodNativeEnum:rp,ZodPromise:rm,ZodEffects:rf,ZodTransformer:rf,ZodOptional:rh,ZodNullable:rg,ZodDefault:ry,ZodCatch:rv,ZodNaN:r_,BRAND:rb,ZodBranded:rw,ZodPipeline:rx,ZodReadonly:rk,custom:rT,Schema:t$,ZodSchema:t$,late:rS,get ZodFirstPartyTypeKind(){return w},coerce:{string:e=>tG.create({...e,coerce:!0}),number:e=>tH.create({...e,coerce:!0}),boolean:e=>tQ.create({...e,coerce:!0}),bigint:e=>tY.create({...e,coerce:!0}),date:e=>tX.create({...e,coerce:!0})},any:rM,array:rL,bigint:rI,boolean:rC,date:rN,discriminatedUnion:rz,effect:r1,enum:rQ,function:rG,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>rT(t=>t instanceof e,t),intersection:rB,lazy:rH,literal:rY,map:rK,nan:rj,nativeEnum:rX,never:rZ,null:r$,nullable:r9,number:rO,object:rU,oboolean:()=>rC().optional(),onumber:()=>rO().optional(),optional:r2,ostring:()=>rE().optional(),pipeline:r6,preprocess:r4,promise:r0,record:rV,set:rW,strictObject:rq,string:rE,symbol:rA,transformer:r1,tuple:rJ,undefined:rP,union:rF,unknown:rR,void:rD,NEVER:tx,ZodIssueCode:tf,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:th});function r7(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.content)?void 0:t.map(({token:e,logprob:t,top_logprobs:r})=>({token:e,logprob:t,topLogprobs:r?r.map(({token:e,logprob:t})=>({token:e,logprob:t})):[]})))?r:void 0}function r3(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var r5=r8.object({error:r8.object({message:r8.string(),type:r8.string().nullish(),param:r8.any().nullish(),code:r8.union([r8.string(),r8.number()]).nullish()})}),ne=(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:a,requestBodyValues:s})=>{let i=await n.text(),o=e6(n);if(""===i.trim())return{responseHeaders:o,value:new eh({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(n)})};try{let l=function({text:e,schema:t}){try{let r=e1.parse(e);if(null==t)return r;return function({value:e,schema:t}){let r=tt({value:e,schema:t});if(!r.success)throw eW.wrap({value:e,cause:r.error});return r.value}({value:r,schema:t})}catch(t){if(eA.isJSONParseError(t)||eW.isTypeValidationError(t))throw t;throw new eA({text:e,cause:t})}}({text:i,schema:e});return{responseHeaders:o,value:new eh({message:t(l),url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,data:l,isRetryable:null==r?void 0:r(n,l)})}}catch(e){return{responseHeaders:o,value:new eh({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(n)})}}})({errorSchema:r5,errorToMessage:e=>e.error.message});function nt({id:e,model:t,created:r}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=r?new Date(1e3*r):void 0}}var nr=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){return!0===this.settings.structuredOutputs}get defaultObjectGenerationMode(){return this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:a,topK:s,frequencyPenalty:i,presencePenalty:o,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var p,m,f;let h=e.type,g=[];null!=s&&g.push({type:"unsupported-setting",setting:"topK"}),null!=u&&"json"===u.type&&null!=u.schema&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});let y=this.settings.useLegacyFunctionCalling;if(y&&!0===this.settings.parallelToolCalls)throw new eQ({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(y&&!0===this.settings.structuredOutputs)throw new eQ({functionality:"structuredOutputs with useLegacyFunctionCalling"});let v={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:a,frequency_penalty:i,presence_penalty:o,stop:l,seed:c,max_completion_tokens:null!=(m=null==(p=null==d?void 0:d.openai)?void 0:p.maxCompletionTokens)?m:void 0,response_format:(null==u?void 0:u.type)==="json"?{type:"json_object"}:void 0,messages:function({prompt:e,useLegacyFunctionCalling:t=!1}){let r=[];for(let{role:n,content:a}of e)switch(n){case"system":r.push({role:"system",content:a});break;case"user":if(1===a.length&&"text"===a[0].type){r.push({role:"user",content:a[0].text});break}r.push({role:"user",content:a.map(e=>{var t,r,n;switch(e.type){case"text":return{type:"text",text:e.text};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(t=e.mimeType)?t:"image/jpeg"};base64,${td(e.image)}`,detail:null==(n=null==(r=e.providerMetadata)?void 0:r.openai)?void 0:n.imageDetail}};case"file":throw new eQ({functionality:"File content parts in user messages"})}})});break;case"assistant":{let e="",n=[];for(let t of a)switch(t.type){case"text":e+=t.text;break;case"tool-call":n.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.args)}});break;default:throw Error(`Unsupported part: ${t}`)}if(t){if(n.length>1)throw new eQ({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:e,function_call:n.length>0?n[0].function:void 0})}else r.push({role:"assistant",content:e,tool_calls:n.length>0?n:void 0});break}case"tool":for(let e of a)t?r.push({role:"function",name:e.toolName,content:JSON.stringify(e.result)}):r.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result)});break;default:throw Error(`Unsupported role: ${n}`)}return r}({prompt:t,useLegacyFunctionCalling:y})};switch(ni(this.modelId)&&(v.temperature=void 0,v.top_p=void 0,v.frequency_penalty=void 0,v.presence_penalty=void 0),h){case"regular":return{args:{...v,...function({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r=!1}){var n;let a=(null==(n=e.tools)?void 0:n.length)?e.tools:void 0;if(null==a)return{tools:void 0,tool_choice:void 0};let s=e.toolChoice;if(t){let e=a.map(e=>({name:e.name,description:e.description,parameters:e.parameters}));if(null==s)return{functions:e,function_call:void 0};switch(s.type){case"auto":case"none":case void 0:return{functions:e,function_call:void 0};case"required":throw new eQ({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:e,function_call:{name:s.toolName}}}}let i=a.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.parameters,strict:!0===r||void 0}}));if(null==s)return{tools:i,tool_choice:void 0};let o=s.type;switch(o){case"auto":case"none":case"required":return{tools:i,tool_choice:o};case"tool":return{tools:i,tool_choice:{type:"function",function:{name:s.toolName}}};default:throw Error(`Unsupported tool choice type: ${o}`)}}({mode:e,useLegacyFunctionCalling:y,structuredOutputs:this.settings.structuredOutputs})},warnings:g};case"object-json":return{args:{...v,response_format:!0===this.settings.structuredOutputs?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:null!=(f=e.name)?f:"response",description:e.description}}:{type:"json_object"}},warnings:g};case"object-tool":return{args:y?{...v,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...v,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:!0===this.settings.structuredOutputs||void 0}}]},warnings:g};default:throw Error(`Unsupported type: ${h}`)}}async doGenerate(e){var t,r,n,a,s,i,o,l,u,c;let{args:d,warnings:p}=this.getArgs(e),{responseHeaders:m,value:f}=await ts({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:e4(this.config.headers(),e.headers),body:d,failedResponseHandler:ne,successfulResponseHandler:tl(na),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:h,...g}=d,y=f.choices[0],v=(null==(r=null==(t=f.usage)?void 0:t.completion_tokens_details)?void 0:r.reasoning_tokens)!=null?{openai:{reasoningTokens:null==(a=null==(n=f.usage)?void 0:n.completion_tokens_details)?void 0:a.reasoning_tokens}}:void 0;return{text:null!=(s=y.message.content)?s:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&y.message.function_call?[{toolCallType:"function",toolCallId:e7(),toolName:y.message.function_call.name,args:y.message.function_call.arguments}]:null==(i=y.message.tool_calls)?void 0:i.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:e7(),toolName:e.function.name,args:e.function.arguments}}),finishReason:r3(y.finish_reason),usage:{promptTokens:null!=(l=null==(o=f.usage)?void 0:o.prompt_tokens)?l:NaN,completionTokens:null!=(c=null==(u=f.usage)?void 0:u.completion_tokens)?c:NaN},rawCall:{rawPrompt:h,rawSettings:g},rawResponse:{headers:m},response:nt(f),warnings:p,logprobs:r7(y.logprobs),providerMetadata:v}}async doStream(e){let t;if(ni(this.modelId)){let t=await this.doGenerate(e);return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(let r of t.toolCalls)e.enqueue({type:"tool-call",...r});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}let{args:r,warnings:n}=this.getArgs(e),{responseHeaders:a,value:s}=await ts({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:e4(this.config.headers(),e.headers),body:{...r,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},failedResponseHandler:ne,successfulResponseHandler:to(ns),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=r,l=[],u="unknown",c={promptTokens:void 0,completionTokens:void 0},d=!0,{useLegacyFunctionCalling:p}=this.settings;return{stream:s.pipeThrough(new TransformStream({transform(e,r){var n,a,s,i,o,m,f,h,g,y,v,_,b,w;if(!e.success){u="error",r.enqueue({type:"error",error:e.error});return}let x=e.value;if("error"in x){u="error",r.enqueue({type:"error",error:x.error});return}d&&(d=!1,r.enqueue({type:"response-metadata",...nt(x)})),null!=x.usage&&(c={promptTokens:null!=(n=x.usage.prompt_tokens)?n:void 0,completionTokens:null!=(a=x.usage.completion_tokens)?a:void 0});let k=x.choices[0];if((null==k?void 0:k.finish_reason)!=null&&(u=r3(k.finish_reason)),(null==k?void 0:k.delta)==null)return;let T=k.delta;null!=T.content&&r.enqueue({type:"text-delta",textDelta:T.content});let S=r7(null==k?void 0:k.logprobs);(null==S?void 0:S.length)&&(void 0===t&&(t=[]),t.push(...S));let E=p&&null!=T.function_call?[{type:"function",id:e7(),function:T.function_call,index:0}]:T.tool_calls;if(null!=E)for(let e of E){let t=e.index;if(null==l[t]){if("function"!==e.type)throw new ej({data:e,message:"Expected 'function' type."});if(null==e.id)throw new ej({data:e,message:"Expected 'id' to be a string."});if((null==(s=e.function)?void 0:s.name)==null)throw new ej({data:e,message:"Expected 'function.name' to be a string."});l[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(i=e.function.arguments)?i:""}};let n=l[t];(null==(o=n.function)?void 0:o.name)!=null&&(null==(m=n.function)?void 0:m.arguments)!=null&&(n.function.arguments.length>0&&r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.id,toolName:n.function.name,argsTextDelta:n.function.arguments}),tn(n.function.arguments)&&r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(f=n.id)?f:e7(),toolName:n.function.name,args:n.function.arguments}));continue}let n=l[t];(null==(h=e.function)?void 0:h.arguments)!=null&&(n.function.arguments+=null!=(y=null==(g=e.function)?void 0:g.arguments)?y:""),r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.id,toolName:n.function.name,argsTextDelta:null!=(v=e.function.arguments)?v:""}),(null==(_=n.function)?void 0:_.name)!=null&&(null==(b=n.function)?void 0:b.arguments)!=null&&tn(n.function.arguments)&&r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(w=n.id)?w:e7(),toolName:n.function.name,args:n.function.arguments})}},flush(e){var r,n;e.enqueue({type:"finish",finishReason:u,logprobs:t,usage:{promptTokens:null!=(r=c.promptTokens)?r:NaN,completionTokens:null!=(n=c.completionTokens)?n:NaN}})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:a},warnings:n}}},nn=r8.object({prompt_tokens:r8.number().nullish(),completion_tokens:r8.number().nullish(),completion_tokens_details:r8.object({reasoning_tokens:r8.number().nullish()}).nullish()}).nullish(),na=r8.object({id:r8.string().nullish(),created:r8.number().nullish(),model:r8.string().nullish(),choices:r8.array(r8.object({message:r8.object({role:r8.literal("assistant").nullish(),content:r8.string().nullish(),function_call:r8.object({arguments:r8.string(),name:r8.string()}).nullish(),tool_calls:r8.array(r8.object({id:r8.string().nullish(),type:r8.literal("function"),function:r8.object({name:r8.string(),arguments:r8.string()})})).nullish()}),index:r8.number(),logprobs:r8.object({content:r8.array(r8.object({token:r8.string(),logprob:r8.number(),top_logprobs:r8.array(r8.object({token:r8.string(),logprob:r8.number()}))})).nullable()}).nullish(),finish_reason:r8.string().nullish()})),usage:nn}),ns=r8.union([r8.object({id:r8.string().nullish(),created:r8.number().nullish(),model:r8.string().nullish(),choices:r8.array(r8.object({delta:r8.object({role:r8.enum(["assistant"]).nullish(),content:r8.string().nullish(),function_call:r8.object({name:r8.string().optional(),arguments:r8.string().optional()}).nullish(),tool_calls:r8.array(r8.object({index:r8.number(),id:r8.string().nullish(),type:r8.literal("function").optional(),function:r8.object({name:r8.string().nullish(),arguments:r8.string().nullish()})})).nullish()}).nullish(),logprobs:r8.object({content:r8.array(r8.object({token:r8.string(),logprob:r8.number(),top_logprobs:r8.array(r8.object({token:r8.string(),logprob:r8.number()}))})).nullable()}).nullish(),finish_reason:r8.string().nullable().optional(),index:r8.number()})),usage:nn}),r5]);function ni(e){return e.startsWith("o1-")}function no(e){return null==e?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([e,t])=>({token:e,logprob:t})):[]}))}var nl=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:a,topP:s,topK:i,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d}){var p;let m=e.type,f=[];null!=i&&f.push({type:"unsupported-setting",setting:"topK"}),null!=c&&"text"!==c.type&&f.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:h,stopSequences:g}=function({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if("prompt"===t&&1===e.length&&"user"===e[0].role&&1===e[0].content.length&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let a="";for(let{role:t,content:s}of("system"===e[0].role&&(a+=`${e[0].content}

`,e=e.slice(1)),e))switch(t){case"system":throw new eT({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=s.map(e=>{switch(e.type){case"text":return e.text;case"image":throw new eQ({functionality:"images"})}}).join("");a+=`${r}:
${e}

`;break}case"assistant":{let e=s.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new eQ({functionality:"tool-call messages"})}}).join("");a+=`${n}:
${e}

`;break}case"tool":throw new eQ({functionality:"tool messages"});default:throw Error(`Unsupported role: ${t}`)}return{prompt:a+=`${n}:
`,stopSequences:[`
${r}:`]}}({prompt:r,inputFormat:t}),y=[...null!=g?g:[],...null!=u?u:[]],v={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:a,top_p:s,frequency_penalty:o,presence_penalty:l,seed:d,prompt:h,stop:y.length>0?y:void 0};switch(m){case"regular":if(null==(p=e.tools)?void 0:p.length)throw new eQ({functionality:"tools"});if(e.toolChoice)throw new eQ({functionality:"toolChoice"});return{args:v,warnings:f};case"object-json":throw new eQ({functionality:"object-json mode"});case"object-tool":throw new eQ({functionality:"object-tool mode"});default:throw Error(`Unsupported type: ${m}`)}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:a}=await ts({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:e4(this.config.headers(),e.headers),body:t,failedResponseHandler:ne,successfulResponseHandler:tl(nu),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...i}=t,o=a.choices[0];return{text:o.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:r3(o.finish_reason),logprobs:no(o.logprobs),rawCall:{rawPrompt:s,rawSettings:i},rawResponse:{headers:n},response:nt(a),warnings:r}}async doStream(e){let t;let{args:r,warnings:n}=this.getArgs(e),{responseHeaders:a,value:s}=await ts({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:e4(this.config.headers(),e.headers),body:{...r,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},failedResponseHandler:ne,successfulResponseHandler:to(nc),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:i,...o}=r,l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c=!0;return{stream:s.pipeThrough(new TransformStream({transform(e,r){if(!e.success){l="error",r.enqueue({type:"error",error:e.error});return}let n=e.value;if("error"in n){l="error",r.enqueue({type:"error",error:n.error});return}c&&(c=!1,r.enqueue({type:"response-metadata",...nt(n)})),null!=n.usage&&(u={promptTokens:n.usage.prompt_tokens,completionTokens:n.usage.completion_tokens});let a=n.choices[0];(null==a?void 0:a.finish_reason)!=null&&(l=r3(a.finish_reason)),(null==a?void 0:a.text)!=null&&r.enqueue({type:"text-delta",textDelta:a.text});let s=no(null==a?void 0:a.logprobs);(null==s?void 0:s.length)&&(void 0===t&&(t=[]),t.push(...s))},flush(e){e.enqueue({type:"finish",finishReason:l,logprobs:t,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:a},warnings:n}}},nu=r8.object({id:r8.string().nullish(),created:r8.number().nullish(),model:r8.string().nullish(),choices:r8.array(r8.object({text:r8.string(),finish_reason:r8.string(),logprobs:r8.object({tokens:r8.array(r8.string()),token_logprobs:r8.array(r8.number()),top_logprobs:r8.array(r8.record(r8.string(),r8.number())).nullable()}).nullish()})),usage:r8.object({prompt_tokens:r8.number(),completion_tokens:r8.number()})}),nc=r8.union([r8.object({id:r8.string().nullish(),created:r8.number().nullish(),model:r8.string().nullish(),choices:r8.array(r8.object({text:r8.string(),finish_reason:r8.string().nullish(),index:r8.number(),logprobs:r8.object({tokens:r8.array(r8.string()),token_logprobs:r8.array(r8.number()),top_logprobs:r8.array(r8.record(r8.string(),r8.number())).nullable()}).nullish()})),usage:r8.object({prompt_tokens:r8.number(),completion_tokens:r8.number()}).nullish()}),r5]),nd=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.settings.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.settings.supportsParallelCalls)||e}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new eB({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:a}=await ts({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:e4(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:ne,successfulResponseHandler:tl(np),abortSignal:r,fetch:this.config.fetch});return{embeddings:a.data.map(e=>e.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},np=r8.object({data:r8.array(r8.object({embedding:r8.array(r8.number())})),usage:r8.object({prompt_tokens:r8.number()}).nullish()}),nm=function(e={}){var t,r,n,a;let s=null!=(r=null==(a=null!=(t=e.baseURL)?t:e.baseUrl)?void 0:a.replace(/\/$/,""))?r:"https://api.openai.com/v1",i=null!=(n=e.compatibility)?n:"compatible",o=()=>({Authorization:`Bearer ${function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new eR({message:`${n} API key must be a string.`});if("undefined"==typeof process)throw new eR({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new eR({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new eR({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(t,r={})=>new nr(t,r,{provider:"openai.chat",url:({path:e})=>`${s}${e}`,headers:o,compatibility:i,fetch:e.fetch}),u=(t,r={})=>new nl(t,r,{provider:"openai.completion",url:({path:e})=>`${s}${e}`,headers:o,compatibility:i,fetch:e.fetch}),c=(t,r={})=>new nd(t,r,{provider:"openai.embedding",url:({path:e})=>`${s}${e}`,headers:o,fetch:e.fetch}),d=(e,t)=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return"gpt-3.5-turbo-instruct"===e?u(e,t):l(e,t)},p=function(e,t){return d(e,t)};return p.languageModel=d,p.chat=l,p.completion=u,p.embedding=c,p.textEmbedding=c,p.textEmbeddingModel=c,p}({compatibility:"strict"}),nf=r(75658),nh=r(73048);let ng=Symbol("Let zodToJsonSchema decide on which parser to use"),ny={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},nv=e=>"string"==typeof e?{...ny,name:e}:{...ny,...e},n_=e=>{let t=nv(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function nb(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function nw(e,t,r,n,a){e[t]=r,nb(e,t,n,a)}let nx=(e,t)=>nZ(e.innerType._def,t),nk=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let n of e.checks)switch(n.kind){case"min":nw(r,"minimum",n.value,n.message,t);break;case"max":nw(r,"maximum",n.value,n.message,t)}return r},nT=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,nS={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===a&&(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function nE(e,t){let r={type:"string"};function n(e){return"escape"===t.patternStrategy?nO(e):e}if(e.checks)for(let a of e.checks)switch(a.kind){case"min":nw(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":nw(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":nj(r,"email",a.message,t);break;case"format:idn-email":nj(r,"idn-email",a.message,t);break;case"pattern:zod":nI(r,nS.email,a.message,t)}break;case"url":nj(r,"uri",a.message,t);break;case"uuid":nj(r,"uuid",a.message,t);break;case"regex":nI(r,a.regex,a.message,t);break;case"cuid":nI(r,nS.cuid,a.message,t);break;case"cuid2":nI(r,nS.cuid2,a.message,t);break;case"startsWith":nI(r,RegExp(`^${n(a.value)}`),a.message,t);break;case"endsWith":nI(r,RegExp(`${n(a.value)}$`),a.message,t);break;case"datetime":nj(r,"date-time",a.message,t);break;case"date":nj(r,"date",a.message,t);break;case"time":nj(r,"time",a.message,t);break;case"duration":nj(r,"duration",a.message,t);break;case"length":nw(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),nw(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"includes":nI(r,RegExp(n(a.value)),a.message,t);break;case"ip":"v6"!==a.version&&nj(r,"ipv4",a.message,t),"v4"!==a.version&&nj(r,"ipv6",a.message,t);break;case"emoji":nI(r,nS.emoji,a.message,t);break;case"ulid":nI(r,nS.ulid,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":nj(r,"binary",a.message,t);break;case"contentEncoding:base64":nw(r,"contentEncoding","base64",a.message,t);break;case"pattern:zod":nI(r,nS.base64,a.message,t)}break;case"nanoid":nI(r,nS.nanoid,a.message,t)}return r}let nO=e=>Array.from(e).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),nj=(e,t,r,n)=>{e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):nw(e,"format",t,r,n)},nI=(e,t,r,n)=>{e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:nC(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):nw(e,"pattern",nC(t,n),r,n)},nC=(e,t)=>{let r="function"==typeof e?e():e;if(!t.applyRegexFlags||!r.flags)return r.source;let n={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},a=n.i?r.source.toLowerCase():r.source,s="",i=!1,o=!1,l=!1;for(let e=0;e<a.length;e++){if(i){s+=a[e],i=!1;continue}if(n.i){if(o){if(a[e].match(/[a-z]/)){l?(s+=a[e]+`${a[e-2]}-${a[e]}`.toUpperCase(),l=!1):"-"===a[e+1]&&a[e+2]?.match(/[a-z]/)?(s+=a[e],l=!0):s+=`${a[e]}${a[e].toUpperCase()}`;continue}}else if(a[e].match(/[a-z]/)){s+=`[${a[e]}${a[e].toUpperCase()}]`;continue}}if(n.m){if("^"===a[e]){s+=`(^|(?<=[\r
]))`;continue}if("$"===a[e]){s+=`($|(?=[\r
]))`;continue}}if(n.s&&"."===a[e]){s+=o?`${a[e]}\r
`:`[${a[e]}\r
]`;continue}s+=a[e],"\\"===a[e]?i=!0:o&&"]"===a[e]?o=!1:o||"["!==a[e]||(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return s};function nN(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===w.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:nZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:nZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===w.ZodString&&e.keyType._def.checks?.length){let n=Object.entries(nE(e.keyType._def,t)).reduce((e,[t,r])=>"type"===t?e:{...e,[t]:r},{});return{...r,propertyNames:n}}return e.keyType?._def.typeName===w.ZodEnum?{...r,propertyNames:{enum:e.keyType._def.values}}:r}let nA={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},nP=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>nZ(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0},n$=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return nZ(e.innerType._def,t);let r=nZ(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},nM=(e,t)=>{if("input"===t.pipeStrategy)return nZ(e.in._def,t);if("output"===t.pipeStrategy)return nZ(e.out._def,t);let r=nZ(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=nZ(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(e=>void 0!==e)}},nR=(e,t)=>nZ(e.innerType._def,t);function nZ(e,t,r=!1){let n=t.seen.get(e);if(t.override){let a=t.override?.(e,t,n,r);if(a!==ng)return a}if(n&&!r){let e=nD(n,t);if(void 0!==e)return e}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let s=nU(e,e.typeName,t);return s&&nq(e,t,s),a.jsonSchema=s,s}let nD=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:nL(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},nL=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},nU=(e,t,r)=>{switch(t){case w.ZodString:return nE(e,r);case w.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",nb(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?nw(r,"minimum",n.value,n.message,t):nw(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),nw(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?nw(r,"maximum",n.value,n.message,t):nw(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),nw(r,"maximum",n.value,n.message,t));break;case"multipleOf":nw(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case w.ZodObject:return function(e,t){let r={type:"object",...Object.entries(e.shape()).reduce((e,[r,n])=>{if(void 0===n||void 0===n._def)return e;let a=nZ(n._def,{...t,currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]});return void 0===a?e:{properties:{...e.properties,[r]:a},required:n.isOptional()?e.required:[...e.required,r]}},{properties:{},required:[]}),additionalProperties:"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:nZ(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:nZ(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0};return r.required.length||delete r.required,r}(e,r);case w.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?nw(r,"minimum",n.value,n.message,t):nw(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),nw(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?nw(r,"maximum",n.value,n.message,t):nw(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),nw(r,"maximum",n.value,n.message,t));break;case"multipleOf":nw(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case w.ZodBoolean:return{type:"boolean"};case w.ZodDate:return function e(t,r,n){let a=n??r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,a)=>e(t,r,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return nk(t,r)}}(e,r);case w.ZodUndefined:return{not:{}};case w.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case w.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def?.typeName!==w.ZodAny&&(r.items=nZ(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&nw(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&nw(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(nw(r,"minItems",e.exactLength.value,e.exactLength.message,t),nw(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case w.ZodUnion:case w.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return nP(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in nA&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=nA[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return nP(e,t)}(e,r);case w.ZodIntersection:return function(e,t){let r=[nZ(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),nZ(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,a=[];return r.forEach(e=>{if(nT(e))a.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else n=void 0;a.push(t)}}),a.length?{allOf:a,...n}:void 0}(e,r);case w.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>nZ(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:nZ(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>nZ(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case w.ZodRecord:return nN(e,r);case w.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case w.ZodEnum:return{type:"string",enum:e.values};case w.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case w.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:nA[e.innerType._def.typeName],nullable:!0}:{type:[nA[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=nZ(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=nZ(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case w.ZodOptional:return n$(e,r);case w.ZodMap:return function(e,t){return"record"===t.mapStrategy?nN(e,t):{type:"array",maxItems:125,items:{type:"array",items:[nZ(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},nZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,r);case w.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:nZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&nw(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&nw(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case w.ZodLazy:return nZ(e.getter()._def,r);case w.ZodPromise:return nZ(e.type._def,r);case w.ZodNaN:case w.ZodNever:return{not:{}};case w.ZodEffects:return function(e,t){return"input"===t.effectStrategy?nZ(e.schema._def,t):{}}(e,r);case w.ZodAny:case w.ZodUnknown:return{};case w.ZodDefault:return function(e,t){return{...nZ(e.innerType._def,t),default:e.defaultValue()}}(e,r);case w.ZodBranded:return nZ(e.type._def,r);case w.ZodReadonly:return nR(e,r);case w.ZodCatch:return nx(e,r);case w.ZodPipeline:return nM(e,r);case w.ZodFunction:case w.ZodVoid:case w.ZodSymbol:default:return}},nq=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),nF=(e,t)=>{let r=n_(t),n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,n])=>({...e,[t]:nZ(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}}),{}):void 0,a="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,s=nZ(e._def,void 0===a?r:{...r,currentPath:[...r.basePath,r.definitionPath,a]},!1)??{},i="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==i&&(s.title=i);let o=void 0===a?n?{...s,[r.definitionPath]:n}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,a].join("/"),[r.definitionPath]:{...n,[a]:s}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===r.target&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};var nz={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},nB={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},nJ={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},nV={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},nK={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},nW={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},nG={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},nH={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>null==e||"object"!=typeof e||!("id"in e)||"string"!=typeof e.id||!("type"in e)||"string"!=typeof e.type||!("function"in e)||null==e.function||"object"!=typeof e.function||!("arguments"in e.function)||"string"!=typeof e.function.name||"string"!=typeof e.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},nY={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},nQ={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},nX={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},n0={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},n1={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},n2={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},n9={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},n4=[nz,nB,nJ,nV,nK,nW,nG,nH,nY,nQ,nX,n0,n1,n2,n9],n6={[nz.code]:nz,[nB.code]:nB,[nJ.code]:nJ,[nV.code]:nV,[nK.code]:nK,[nW.code]:nW,[nG.code]:nG,[nH.code]:nH,[nY.code]:nY,[nQ.code]:nQ,[nX.code]:nX,[n0.code]:n0,[n1.code]:n1,[n2.code]:n2,[n9.code]:n9};nz.name,nz.code,nB.name,nB.code,nJ.name,nJ.code,nV.name,nV.code,nK.name,nK.code,nW.name,nW.code,nG.name,nG.code,nH.name,nH.code,nY.name,nY.code,nQ.name,nQ.code,nX.name,nX.code,n0.name,n0.code,n1.name,n1.code,n2.name,n2.code,n9.name,n9.code;var n8=n4.map(e=>e.code),n7=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!n8.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let n=JSON.parse(e.slice(t+1));return n6[r].parse(n)},n3=Symbol.for("vercel.ai.schema");function n5(e){return"object"==typeof e&&null!==e&&n3 in e&&!0===e[n3]&&"jsonSchema"in e&&"validate"in e?e:function(e,{validate:t}={}){return{[n3]:!0,_type:void 0,[te]:!0,jsonSchema:e,validate:t}}(nF(e),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var ae=Object.defineProperty,at=(e,t)=>{for(var r in t)ae(e,r,{get:t[r],enumerable:!0})};async function ar(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var an="AI_RetryError",aa=`vercel.ai.error.${an}`,as=Symbol.for(aa),ai=class extends ed{constructor({message:e,reason:t,errors:r}){super({name:an,message:e}),this[x]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return ed.hasMarker(e,aa)}static isRetryError(e){return e instanceof Error&&e.name===an&&"string"==typeof e.reason&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};x=as;var ao=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>al(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function al(e,{maxRetries:t,delayInMs:r,backoffFactor:n},a=[]){try{return await e()}catch(l){if(e5(l)||0===t)throw l;let s=e3(l),i=[...a,l],o=i.length;if(o>t)throw new ai({message:`Failed after ${o} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:i});if(l instanceof Error&&eh.isAPICallError(l)&&!0===l.isRetryable&&o<=t)return await ar(r),al(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},i);if(1===o)throw l;throw new ai({message:`Failed after ${o} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:i})}}function au({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}var ac={startSpan:()=>ad,startActiveSpan:(e,t,r,n)=>"function"==typeof t?t(ad):"function"==typeof r?r(ad):"function"==typeof n?n(ad):void 0},ad={spanContext:()=>ap,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},ap={traceId:"",spanId:"",traceFlags:0},am=void 0;function af({name:e,tracer:t,attributes:r,fn:n,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await n(e);return a&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:nh.Q.ERROR,message:t.message})):e.setStatus({code:nh.Q.ERROR})}finally{e.end()}throw t}})}function ah({telemetry:e,attributes:t}){return Object.entries(t).reduce((t,[r,n])=>{if(void 0===n)return t;if("object"==typeof n&&"input"in n&&"function"==typeof n.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=n.input();return void 0===a?t:{...t,[r]:a}}if("object"==typeof n&&"output"in n&&"function"==typeof n.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=n.output();return void 0===a?t:{...t,[r]:a}}return{...t,[r]:n}},{})}var ag="AI_DownloadError",ay=`vercel.ai.error.${ag}`,av=Symbol.for(ay),a_=class extends ed{constructor({url:e,statusCode:t,statusText:r,cause:n,message:a=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:ag,message:a,cause:n}),this[k]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return ed.hasMarker(e,ay)}static isDownloadError(e){return e instanceof Error&&e.name===ag&&"string"==typeof e.url&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.statusText||"string"==typeof e.statusText)}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};async function ab({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let e=await t(n);if(!e.ok)throw new a_({url:n,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(r=e.headers.get("content-type"))?r:void 0}}catch(e){if(a_.isInstance(e))throw e;throw new a_({url:n,cause:e})}}k=av;var aw=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],ax="AI_InvalidDataContentError",ak=`vercel.ai.error.${ax}`,aT=Symbol.for(ak),aS=class extends ed{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:ax,message:r,cause:t}),this[T]=!0,this.content=e}static isInstance(e){return ed.hasMarker(e,ak)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===ax&&null!=e.content}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};T=aT;var aE=r8.union([r8.string(),r8.instanceof(Uint8Array),r8.instanceof(ArrayBuffer),r8.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function aO(e){return"string"==typeof e?e:e instanceof ArrayBuffer?td(new Uint8Array(e)):td(e)}function aj(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return function(e){let t=tc(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}(e)}catch(t){throw new aS({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new aS({content:e})}var aI="AI_InvalidMessageRoleError",aC=`vercel.ai.error.${aI}`,aN=Symbol.for(aC),aA=class extends ed{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:aI,message:t}),this[S]=!0,this.role=e}static isInstance(e){return ed.hasMarker(e,aC)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===aI&&"string"==typeof e.role}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};function aP(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}async function a$({prompt:e,modelSupportsImageUrls:t=!0,downloadImplementation:r=ab}){let n=[];null!=e.system&&n.push({role:"system",content:e.system});let a=t||null==e.messages?null:await aR(e.messages,r),s=e.type;switch(s){case"prompt":n.push({role:"user",content:[{type:"text",text:e.prompt}]});break;case"messages":n.push(...e.messages.map(e=>aM(e,a)));break;default:throw Error(`Unsupported prompt type: ${s}`)}return n}function aM(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"user",content:e.content.map(r=>{var n,a,s,i,o;switch(r.type){case"text":return{type:"text",text:r.text,providerMetadata:r.experimental_providerMetadata};case"image":{if(r.image instanceof URL){if(null==t)return{type:"image",image:r.image,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[r.image.toString()];return{type:"image",image:e.data,mimeType:null!=(n=r.mimeType)?n:e.mimeType,providerMetadata:r.experimental_providerMetadata}}}if("string"==typeof r.image)try{let n=new URL(r.image);switch(n.protocol){case"http:":case"https:":if(null==t)return{type:"image",image:n,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[n.toString()];return{type:"image",image:e.data,mimeType:null!=(a=r.mimeType)?a:e.mimeType,providerMetadata:r.experimental_providerMetadata}}case"data:":try{let{mimeType:e,base64Content:t}=aP(r.image);if(null==e||null==t)throw Error("Invalid data URL format");return{type:"image",image:aj(t),mimeType:e,providerMetadata:r.experimental_providerMetadata}}catch(t){throw Error(`Error processing data URL: ${e3(e)}`)}}}catch(e){}let i=aj(r.image);return{type:"image",image:i,mimeType:null!=(s=r.mimeType)?s:function(e){for(let{bytes:t,mimeType:r}of aw)if(e.length>=t.length&&t.every((t,r)=>e[r]===t))return r}(i),providerMetadata:r.experimental_providerMetadata}}case"file":if(r.data instanceof URL){if(null==t)return{type:"file",data:r.data,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[r.data.toString()];return{type:"file",data:td(e.data),mimeType:null!=(i=r.mimeType)?i:e.mimeType,providerMetadata:r.experimental_providerMetadata}}}if("string"==typeof r.data)try{let n=new URL(r.data);switch(n.protocol){case"http:":case"https:":if(null==t)return{type:"file",data:n,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[n.toString()];return{type:"file",data:td(e.data),mimeType:null!=(o=r.mimeType)?o:e.mimeType,providerMetadata:r.experimental_providerMetadata}}case"data:":try{let{mimeType:e,base64Content:t}=aP(r.data);if(null==e||null==t)throw Error("Invalid data URL format");return{type:"file",data:aO(t),mimeType:e,providerMetadata:r.experimental_providerMetadata}}catch(t){throw Error(`Error processing data URL: ${e3(e)}`)}}}catch(e){}return{type:"file",data:aO(r.data),mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata}}}).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:e.experimental_providerMetadata};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{let{experimental_providerMetadata:t,...r}=e;return{...r,providerMetadata:t}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,providerMetadata:e.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:throw new aA({role:r})}}async function aR(e,t){let r=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL);return Object.fromEntries((await Promise.all(r.map(async e=>({url:e,data:await t({url:e})})))).map(({url:e,data:t})=>[e.toString(),t]))}S=aN;var aZ="AI_InvalidArgumentError",aD=`vercel.ai.error.${aZ}`,aL=Symbol.for(aD),aU=class extends ed{constructor({parameter:e,value:t,message:r}){super({name:aZ,message:`Invalid argument for parameter ${e}: ${r}`}),this[E]=!0,this.parameter=e,this.value=t}static isInstance(e){return ed.hasMarker(e,aD)}static isInvalidArgumentError(e){return e instanceof Error&&e.name===aZ&&"string"==typeof e.parameter&&"string"==typeof e.value}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};E=aL;var aq=r8.lazy(()=>r8.union([r8.null(),r8.string(),r8.number(),r8.boolean(),r8.record(r8.string(),aq),r8.array(aq)])),aF=r8.record(r8.string(),r8.record(r8.string(),aq)),az=r8.object({type:r8.literal("text"),text:r8.string(),experimental_providerMetadata:aF.optional()}),aB=r8.object({type:r8.literal("image"),image:r8.union([aE,r8.instanceof(URL)]),mimeType:r8.string().optional(),experimental_providerMetadata:aF.optional()}),aJ=r8.object({type:r8.literal("file"),data:r8.union([aE,r8.instanceof(URL)]),mimeType:r8.string(),experimental_providerMetadata:aF.optional()}),aV=r8.object({type:r8.literal("tool-call"),toolCallId:r8.string(),toolName:r8.string(),args:r8.unknown()}),aK=r8.object({type:r8.literal("tool-result"),toolCallId:r8.string(),toolName:r8.string(),result:r8.unknown(),isError:r8.boolean().optional(),experimental_providerMetadata:aF.optional()}),aW=r8.object({role:r8.literal("system"),content:r8.string(),experimental_providerMetadata:aF.optional()}),aG=r8.object({role:r8.literal("user"),content:r8.union([r8.string(),r8.array(r8.union([az,aB,aJ]))]),experimental_providerMetadata:aF.optional()}),aH=r8.object({role:r8.literal("assistant"),content:r8.union([r8.string(),r8.array(r8.union([az,aV]))]),experimental_providerMetadata:aF.optional()}),aY=r8.object({role:r8.literal("tool"),content:r8.array(aK),experimental_providerMetadata:aF.optional()}),aQ=r8.union([aW,aG,aH,aY]);function aX(e,{contentType:t,dataStreamVersion:r}){var n;let a=new Headers(null!=(n=null==e?void 0:e.headers)?n:{});return a.has("Content-Type")||a.set("Content-Type",t),void 0!==r&&a.set("X-Vercel-AI-Data-Stream",r),a}var a0="AI_NoObjectGeneratedError",a1=`vercel.ai.error.${a0}`,a2=Symbol.for(a1),a9=class extends ed{constructor({message:e="No object generated."}={}){super({name:a0,message:e}),this[O]=!0}static isInstance(e){return ed.hasMarker(e,a1)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===a0}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};O=a2;e8({prefix:"aiobj-",size:24});e8({prefix:"aiobj-",size:24});var a4="AI_InvalidToolArgumentsError",a6=`vercel.ai.error.${a4}`,a8=Symbol.for(a6),a7=class extends ed{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${eb(r)}`}){super({name:a4,message:n,cause:r}),this[j]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return ed.hasMarker(e,a6)}static isInvalidToolArgumentsError(e){return e instanceof Error&&e.name===a4&&"string"==typeof e.toolName&&"string"==typeof e.toolArgs}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};j=a8;var a3="AI_NoSuchToolError",a5=`vercel.ai.error.${a3}`,se=Symbol.for(a5),st=class extends ed{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:a3,message:r}),this[I]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return ed.hasMarker(e,a5)}static isNoSuchToolError(e){return e instanceof Error&&e.name===a3&&"toolName"in e&&void 0!=e.toolName&&"string"==typeof e.name}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};I=se,Symbol.for("vercel.ai.error.AI_MessageConversionError");var sr=/^([\s\S]*?)(\s+)(\S*)$/;function sn({text:e="",toolCalls:t,toolResults:r}){let n=[];return n.push({role:"assistant",content:[{type:"text",text:e},...t]}),r.length>0&&n.push({role:"tool",content:r.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}))}),n}var sa=e8({prefix:"aitxt-",size:24});async function ss({model:e,tools:t,toolChoice:r,system:n,prompt:a,messages:s,maxRetries:i,abortSignal:o,headers:l,maxAutomaticRoundtrips:u=0,maxToolRoundtrips:c=u,maxSteps:d=null!=c?c+1:1,experimental_continuationSteps:p,experimental_continueSteps:m=null!=p&&p,experimental_telemetry:f,experimental_providerMetadata:h,_internal:{generateId:g=sa,currentDate:y=()=>new Date}={},onStepFinish:v,..._}){var b;if(d<1)throw new aU({parameter:"maxSteps",value:d,message:"maxSteps must be at least 1"});let w=function({model:e,settings:t,telemetry:r,headers:n}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=n?n:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}({model:e,telemetry:f,headers:l,settings:{..._,maxRetries:i}}),x=function({isEnabled:e}){return e?am||nf.g.getTracer("ai"):ac}({isEnabled:null!=(b=null==f?void 0:f.isEnabled)&&b});return af({name:"ai.generateText",attributes:ah({telemetry:f,attributes:{...au({operationId:"ai.generateText",telemetry:f}),...w,"ai.prompt":{input:()=>JSON.stringify({system:n,prompt:a,messages:s})},"ai.settings.maxSteps":d}}),tracer:x,fn:async u=>{var c,p,b,k,T,S;let E;let O=ao({maxRetries:i}),j=function(e){if(null==e.prompt&&null==e.messages)throw new eT({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new eT({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new eT({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new eT({prompt:e,message:"prompt must be a string"});return{type:"prompt",prompt:e.prompt,messages:void 0,system:e.system}}if(null!=e.messages){let t=tt({value:e.messages,schema:r8.array(aQ)});if(!t.success)throw new eT({prompt:e,message:"messages must be an array of CoreMessage",cause:t.error});return{type:"messages",prompt:void 0,messages:e.messages,system:e.system}}throw Error("unreachable")}({system:n,prompt:a,messages:s}),I={type:"regular",...function({tools:e,toolChoice:t}){return null!=e&&Object.keys(e).length>0?{tools:Object.entries(e).map(([e,t])=>({type:"function",name:e,description:t.description,parameters:n5(t.parameters).jsonSchema})),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:t,toolChoice:r})},C=function({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:i,seed:o,maxRetries:l}){if(null!=e){if(!Number.isInteger(e))throw new aU({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new aU({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new aU({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new aU({parameter:"topP",value:r,message:"topP must be a number"});if(null!=n&&"number"!=typeof n)throw new aU({parameter:"topK",value:n,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new aU({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=s&&"number"!=typeof s)throw new aU({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(null!=o&&!Number.isInteger(o))throw new aU({parameter:"seed",value:o,message:"seed must be an integer"});if(null!=l){if(!Number.isInteger(l))throw new aU({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new aU({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:null!=i&&i.length>0?i:void 0,seed:o,maxRetries:null!=l?l:2}}(_),N=await a$({prompt:j,modelSupportsImageUrls:e.supportsImageUrls}),A=[],P=[],$=0,M=[],R="",Z=[],D={completionTokens:0,promptTokens:0,totalTokens:0},L="initial";do{let r=0===$?j.type:"messages";A=(null!=(c=(E=await O(()=>af({name:"ai.generateText.doGenerate",attributes:ah({telemetry:f,attributes:{...au({operationId:"ai.generateText.doGenerate",telemetry:f}),...w,"ai.prompt.format":{input:()=>r},"ai.prompt.messages":{input:()=>JSON.stringify(N)},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":_.frequencyPenalty,"gen_ai.request.max_tokens":_.maxTokens,"gen_ai.request.presence_penalty":_.presencePenalty,"gen_ai.request.stop_sequences":_.stopSequences,"gen_ai.request.temperature":_.temperature,"gen_ai.request.top_k":_.topK,"gen_ai.request.top_p":_.topP}}),tracer:x,fn:async t=>{var n,a,s,i,u,c;let d=await e.doGenerate({mode:I,...C,inputFormat:r,prompt:N,providerMetadata:h,abortSignal:o,headers:l}),p={id:null!=(a=null==(n=d.response)?void 0:n.id)?a:g(),timestamp:null!=(i=null==(s=d.response)?void 0:s.timestamp)?i:y(),modelId:null!=(c=null==(u=d.response)?void 0:u.modelId)?c:e.modelId};return t.setAttributes(ah({telemetry:f,attributes:{"ai.response.finishReason":d.finishReason,"ai.response.text":{output:()=>d.text},"ai.response.toolCalls":{output:()=>JSON.stringify(d.toolCalls)},"ai.response.id":p.id,"ai.response.model":p.modelId,"ai.response.timestamp":p.timestamp.toISOString(),"ai.usage.promptTokens":d.usage.promptTokens,"ai.usage.completionTokens":d.usage.completionTokens,"ai.finishReason":d.finishReason,"ai.result.text":{output:()=>d.text},"ai.result.toolCalls":{output:()=>JSON.stringify(d.toolCalls)},"gen_ai.response.finish_reasons":[d.finishReason],"gen_ai.response.id":p.id,"gen_ai.response.model":p.modelId,"gen_ai.usage.input_tokens":d.usage.promptTokens,"gen_ai.usage.output_tokens":d.usage.completionTokens}})),{...d,response:p}}}))).toolCalls)?c:[]).map(e=>(function({toolCall:e,tools:t}){let r=e.toolName;if(null==t)throw new st({toolName:e.toolName});let n=t[r];if(null==n)throw new st({toolName:e.toolName,availableTools:Object.keys(t)});let a=n5(n.parameters),s=""===e.args.trim()?tt({value:{},schema:a}):tr({text:e.args,schema:a});if(!1===s.success)throw new a7({toolName:r,toolArgs:e.args,cause:s.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:s.value}})({toolCall:e,tools:t})),P=null==t?[]:await si({toolCalls:A,tools:t,tracer:x,telemetry:f});let n={promptTokens:(S=E.usage).promptTokens,completionTokens:S.completionTokens,totalTokens:S.promptTokens+S.completionTokens};D.completionTokens+=n.completionTokens,D.promptTokens+=n.promptTokens,D.totalTokens+=n.totalTokens;let a="done";++$<d&&(m&&"length"===E.finishReason&&0===A.length?a="continue":A.length>0&&P.length===A.length&&(a="tool-result"));let s="continue"===a?function(e){let t=function(e){let t=e.match(sr);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}(e);return t?t.prefix+t.whitespace:e}(null!=(p=E.text)?p:""):null!=(b=E.text)?b:"";R="continue"===a||"continue"===L?R+s:s;let i={stepType:L,text:s,toolCalls:A,toolResults:P,finishReason:E.finishReason,usage:n,warnings:E.warnings,logprobs:E.logprobs,response:{...E.response,headers:null==(k=E.rawResponse)?void 0:k.headers},experimental_providerMetadata:E.providerMetadata,isContinued:"continue"===a};if(Z.push(i),await (null==v?void 0:v(i)),"continue"===L){let e=M.pop();N.pop(),"string"==typeof e.content?e.content=R:e.content.push({text:s,type:"text"}),M.push(e),N.push(aM(e,null))}else if("continue"===a){let e=sn({text:R,toolCalls:A,toolResults:P});M.push(...e),N.push(...e.map(e=>aM(e,null)))}else{let e=sn({text:E.text,toolCalls:A,toolResults:P});M.push(...e),N.push(...e.map(e=>aM(e,null)))}L=a}while("done"!==L);return u.setAttributes(ah({telemetry:f,attributes:{"ai.response.finishReason":E.finishReason,"ai.response.text":{output:()=>E.text},"ai.response.toolCalls":{output:()=>JSON.stringify(E.toolCalls)},"ai.usage.promptTokens":E.usage.promptTokens,"ai.usage.completionTokens":E.usage.completionTokens,"ai.finishReason":E.finishReason,"ai.result.text":{output:()=>E.text},"ai.result.toolCalls":{output:()=>JSON.stringify(E.toolCalls)}}})),new so({text:R,toolCalls:A,toolResults:P,finishReason:E.finishReason,usage:D,warnings:E.warnings,response:{...E.response,headers:null==(T=E.rawResponse)?void 0:T.headers},logprobs:E.logprobs,responseMessages:M,steps:Z,providerMetadata:E.providerMetadata})}})}async function si({toolCalls:e,tools:t,tracer:r,telemetry:n}){return(await Promise.all(e.map(async e=>{let a=t[e.toolName];if((null==a?void 0:a.execute)==null)return;let s=await af({name:"ai.toolCall",attributes:ah({telemetry:n,attributes:{...au({operationId:"ai.toolCall",telemetry:n}),"ai.toolCall.name":e.toolName,"ai.toolCall.id":e.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(e.args)}}}),tracer:r,fn:async t=>{let r=await a.execute(e.args);try{t.setAttributes(ah({telemetry:n,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch(e){}return r}});return{toolCallId:e.toolCallId,toolName:e.toolName,args:e.args,result:s}}))).filter(e=>null!=e)}var so=class{constructor(e){this.text=e.text,this.toolCalls=e.toolCalls,this.toolResults=e.toolResults,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.response=e.response,this.responseMessages=e.responseMessages,this.roundtrips=e.steps,this.steps=e.steps,this.experimental_providerMetadata=e.providerMetadata,this.rawResponse={headers:e.response.headers},this.logprobs=e.logprobs}};function sl(e,t){let r,n;let a=e.getReader(),s=t.getReader(),i=!1,o=!1;async function l(e){try{null==r&&(r=a.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=s.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(i){await u(e);return}if(o){await l(e);return}null==r&&(r=a.read()),null==n&&(n=s.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:a})),n.then(e=>({result:e,reader:s}))]);t.done||e.enqueue(t.value),c===a?(r=void 0,t.done&&(await u(e),i=!0)):(n=void 0,t.done&&(o=!0,await l(e)))}catch(t){e.error(t)}},cancel(){a.cancel(),s.cancel()}})}e8({prefix:"aitxt-",size:24});var su="AI_NoSuchProviderError",sc=`vercel.ai.error.${su}`;function sd(e){let t=new TextEncoder,r="",n=e||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(e,a){let s="string"==typeof e?e:e.content;a.enqueue(t.encode(s)),r+=s,n.onToken&&await n.onToken(s),n.onText&&"string"==typeof e&&await n.onText(e)},async flush(){n.onCompletion&&await n.onCompletion(r),!n.onFinal||"experimental_onFunctionCall"in n||await n.onFinal(r)}})}N=Symbol.for(sc);function sp(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,n)=>{let a=t.decode(r);n.enqueue(e.encode(function(e,t){let r=n4.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}("text",a)))}})}new TextDecoder("utf-8");function sm(e,t){return sf(e,t)}function sf(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&sg(null==(r=e.data)?void 0:r.chunk,t);return}sg(e,t)}})).pipeThrough(sd(t)).pipeThrough(sp())}function sh(e,t){var r;let n=sf(e,null==t?void 0:t.callbacks),a=null==t?void 0:t.data,s=null==t?void 0:t.init;return new Response(a?sl(a.stream,n):n,{status:null!=(r=null==s?void 0:s.status)?r:200,statusText:null==s?void 0:s.statusText,headers:aX(s,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function sg(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function sy(e,t){return(function(e){let t;let r=e[Symbol.asyncIterator](),n=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return new ReadableStream({async pull(e){var t;let{value:a,done:s}=await r.next();if(s){e.close();return}let i=n(null!=(t=a.delta)?t:"");i&&e.enqueue(i)}})})(e).pipeThrough(sd(t)).pipeThrough(sp())}function sv(e,t={}){var r;let{init:n,data:a,callbacks:s}=t,i=sy(e,s);return new Response(a?sl(a.stream,i):i,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:aX(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}at({},{toAIStream:()=>sm,toDataStream:()=>sf,toDataStreamResponse:()=>sh}),at({},{toDataStream:()=>sy,toDataStreamResponse:()=>sv});Symbol("internal_openai_fn_messages"),Response;let s_=(0,R.j)("c55021cc21adeaf5e8bf92ce8dbe562a25a0ee72",sb);async function sb(e,t){let r=`Translate the following MD file to the ${t} locale and provide the result in the exact MD format.

        Do not translate date, url, tags, and categories properties in front matter.

        Do not translate 'figure short code'. Only translate title, seoTitle, author, description, and summary properties.

        Add locale to the beginning of the url property.  In 'See Also' section, add locale to the urls after https://blog.aspose.com/:

${e}`;console.log("language is "+t);let{text:n}=await ss({model:nm("gpt-4o"),maxTokens:Number("1500"),temperature:Number("0.3"),maxRetries:5,prompt:r});return console.log("****************************** start"),console.log(n),console.log("****************************** end"),n}(0,U.h)([s_]),(0,R.j)("491dce1831ed72dd6342582e5105d6cda67d50c0",s_);var sw=r(82361);let sx=r(57147).promises;async function sk(e){let{readable:t,writable:r}=new TransformStream,n=r.getWriter();return globalThis.eventEmitter.on("update",e=>{n.write(`data: ${JSON.stringify(e)}

`)}),e.signal.addEventListener("abort",()=>{n.close()}),new Response(t,{headers:{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}})}async function sT(e){let t=await e.text();console.log(t);let{readable:r,writable:n}=new TransformStream,a=n.getWriter(),s=0,i=[{code:"ar",name:"Arabic"},{code:"cs",name:"Czech"},{code:"de",name:"German"},{code:"es",name:"Spanish"},{code:"fa",name:"Persian"},{code:"fr",name:"French"},{code:"he",name:"Hebrew"},{code:"id",name:"Indonesian"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"th",name:"Thai"},{code:"tr",name:"Turkish"},{code:"uk",name:"Ukrainian"},{code:"vi",name:"Vietnamese"},{code:"zh-hant",name:"Chinese Tradition"},{code:"zh",name:"Chinese"},{code:"sv",name:"Swedish"}];for(let{code:r,name:n}of(await er(D().join(`${process.cwd()}/public`,"blog-posts"))||await sx.mkdir(D().join(`${process.cwd()}/public`,"blog-posts")),await er(D().join(`${process.cwd()}/public/blog-posts`,e.headers.get("uuid")))||await sx.mkdir(D().join(`${process.cwd()}/public/blog-posts`,e.headers.get("uuid"))),i)){let a=`${process.cwd()}/public/blog-posts/${e.headers.get("uuid")}/index.${r}.md`;try{console.log("emietting ....");let e=(s+1)/i.length*100,r=`Translating in ${n}, Progress: ${e.toFixed(2)}%`;globalThis.eventEmitter.emit("update",r),s++;let o=(await s_(t,n)).replace(/^\s*```markdown\s*|\s*```$/g,"");await sx.writeFile(a,o),console.log(`File created: ${a}`)}catch(e){console.error(`Failed to create file ${a}:`,e)}}return a.close(),new Response(JSON.stringify({status:"success"}),{status:200})}globalThis.eventEmitter||(globalThis.eventEmitter=new sw.EventEmitter),(0,U.h)([sk,sT]),(0,R.j)("971f594933864ba06767d9eae312520d74b15a00",sk),(0,R.j)("f434b86a9144c55c3e4d1282bcb6638ca92a9bad",sT);let sS=new P.AppRouteRouteModule({definition:{kind:$.x.APP_ROUTE,page:"/api/openAI/route",pathname:"/api/openAI",filename:"route",bundlePath:"app/api/openAI/route"},resolvedPagePath:"/Users/Mustafa/Desktop/my-ai-app/src/app/api/openAI/route.ts",nextConfigOutput:"",userland:A}),{requestAsyncStorage:sE,staticGenerationAsyncStorage:sO,serverHooks:sj}=sS,sI="/api/openAI/route";function sC(){return(0,M.patchFetch)({serverHooks:sj,staticGenerationAsyncStorage:sO})}},40618:(e,t)=>{"use strict";function r(e){for(let t=0;t<e.length;t++){let r=e[t];if("function"!=typeof r)throw Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`)}}Object.defineProperty(t,"h",{enumerable:!0,get:function(){return r}})},24330:(e,t,r)=>{"use strict";Object.defineProperty(t,"j",{enumerable:!0,get:function(){return a}});let n=r(51749);function a(e,t){return(0,n.registerServerReference)(t,e,null)}},37971:(e,t,r)=>{"use strict";var n=r(97049),a={stream:!0},s=new Map;function i(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function o(){}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,u=Symbol.for("react.element"),c=Symbol.for("react.lazy"),d=Symbol.iterator,p=Array.isArray,m=Object.getPrototypeOf,f=Object.prototype,h=new WeakMap;function g(e,t,r,n){var a=1,s=0,i=null;e=JSON.stringify(e,function e(o,l){if(null===l)return null;if("object"==typeof l){if("function"==typeof l.then){null===i&&(i=new FormData),s++;var u,c,g=a++;return l.then(function(n){n=JSON.stringify(n,e);var a=i;a.append(t+g,n),0==--s&&r(a)},function(e){n(e)}),"$@"+g.toString(16)}if(p(l))return l;if(l instanceof FormData){null===i&&(i=new FormData);var y=i,v=t+(o=a++)+"_";return l.forEach(function(e,t){y.append(v+t,e)}),"$K"+o.toString(16)}if(l instanceof Map)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),o=a++,i.append(t+o,l),"$Q"+o.toString(16);if(l instanceof Set)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),o=a++,i.append(t+o,l),"$W"+o.toString(16);if(null===(c=l)||"object"!=typeof c?null:"function"==typeof(c=d&&c[d]||c["@@iterator"])?c:null)return Array.from(l);if((o=m(l))!==f&&(null===o||null!==m(o)))throw Error("Only plain objects, and a few built-ins, can be passed to Server Actions. Classes or null prototypes are not supported.");return l}if("string"==typeof l)return"Z"===l[l.length-1]&&this[o]instanceof Date?"$D"+l:l="$"===l[0]?"$"+l:l;if("boolean"==typeof l)return l;if("number"==typeof l)return Number.isFinite(u=l)?0===u&&-1/0==1/u?"$-0":u:1/0===u?"$Infinity":-1/0===u?"$-Infinity":"$NaN";if(void 0===l)return"$undefined";if("function"==typeof l){if(void 0!==(l=h.get(l)))return l=JSON.stringify(l,e),null===i&&(i=new FormData),o=a++,i.set(t+o,l),"$F"+o.toString(16);throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof l){if(Symbol.for(o=l.description)!==l)throw Error("Only global symbols received from Symbol.for(...) can be passed to Server Functions. The symbol Symbol.for("+l.description+") cannot be found among global symbols.");return"$S"+o}if("bigint"==typeof l)return"$n"+l.toString(10);throw Error("Type "+typeof l+" is not supported as an argument to a Server Function.")}),null===i?r(e):(i.set(t+"0",e),0===s&&r(i))}var y=new WeakMap;function v(e){var t=h.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var r=null;if(null!==t.bound){if((r=y.get(t))||(n=t,i=new Promise(function(e,t){a=e,s=t}),g(n,"",function(e){if("string"==typeof e){var t=new FormData;t.append("0",e),e=t}i.status="fulfilled",i.value=e,a(e)},function(e){i.status="rejected",i.reason=e,s(e)}),r=i,y.set(t,r)),"rejected"===r.status)throw r.reason;if("fulfilled"!==r.status)throw r;t=r.value;var n,a,s,i,o=new FormData;t.forEach(function(t,r){o.append("$ACTION_"+e+":"+r,t)}),r=o,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:r}}function _(e,t){var r=h.get(this);if(!r)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(r.id!==e)return!1;var n=r.bound;if(null===n)return 0===t;switch(n.status){case"fulfilled":return n.value.length===t;case"pending":throw n;case"rejected":throw n.reason;default:throw"string"!=typeof n.status&&(n.status="pending",n.then(function(e){n.status="fulfilled",n.value=e},function(e){n.status="rejected",n.reason=e})),n}}function b(e,t,r){Object.defineProperties(e,{$$FORM_ACTION:{value:void 0===r?v:function(){var e=h.get(this);if(!e)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var t=e.bound;return null===t&&(t=Promise.resolve([])),r(e.id,t)}},$$IS_SIGNATURE_EQUAL:{value:_},bind:{value:k}}),h.set(e,t)}var w=Function.prototype.bind,x=Array.prototype.slice;function k(){var e=w.apply(this,arguments),t=h.get(this);if(t){var r=x.call(arguments,1),n=null;n=null!==t.bound?Promise.resolve(t.bound).then(function(e){return e.concat(r)}):Promise.resolve(r),Object.defineProperties(e,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:_},bind:{value:k}}),h.set(e,{id:t.id,bound:n})}return e}function T(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function S(e){switch(e.status){case"resolved_model":A(e);break;case"resolved_module":P(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":throw e;default:throw e.reason}}function E(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}function O(e,t,r){switch(e.status){case"fulfilled":E(t,e.value);break;case"pending":case"blocked":case"cyclic":e.value=t,e.reason=r;break;case"rejected":r&&E(r,e.reason)}}function j(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.reason;e.status="rejected",e.reason=t,null!==r&&E(r,t)}}function I(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.value,n=e.reason;e.status="resolved_module",e.value=t,null!==r&&(P(e),O(e,r,n))}}T.prototype=Object.create(Promise.prototype),T.prototype.then=function(e,t){switch(this.status){case"resolved_model":A(this);break;case"resolved_module":P(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":case"cyclic":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var C=null,N=null;function A(e){var t=C,r=N;C=e,N=null;var n=e.value;e.status="cyclic",e.value=null,e.reason=null;try{var a=JSON.parse(n,e._response._fromJSON);if(null!==N&&0<N.deps)N.value=a,e.status="blocked",e.value=null,e.reason=null;else{var s=e.value;e.status="fulfilled",e.value=a,null!==s&&E(s,a)}}catch(t){e.status="rejected",e.reason=t}finally{C=t,N=r}}function P(e){try{var t=e.value,r=globalThis.__next_require__(t[0]);if(4===t.length&&"function"==typeof r.then){if("fulfilled"===r.status)r=r.value;else throw r.reason}var n="*"===t[2]?r:""===t[2]?r.__esModule?r.default:r:r[t[2]];e.status="fulfilled",e.value=n}catch(t){e.status="rejected",e.reason=t}}function $(e,t){e._chunks.forEach(function(e){"pending"===e.status&&j(e,t)})}function M(e,t){var r=e._chunks,n=r.get(t);return n||(n=new T("pending",null,null,e),r.set(t,n)),n}function R(e,t){if("resolved_model"===(e=M(e,t)).status&&A(e),"fulfilled"===e.status)return e.value;throw e.reason}function Z(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function D(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function L(e){var t,r=e.ssrManifest.moduleMap;return(r={_bundlerConfig:r,_moduleLoading:e.ssrManifest.moduleLoading,_callServer:void 0!==D?D:Z,_encodeFormAction:e.encodeFormAction,_nonce:e="string"==typeof e.nonce?e.nonce:void 0,_chunks:new Map,_stringDecoder:new TextDecoder,_fromJSON:null,_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]})._fromJSON=(t=r,function(e,r){return"string"==typeof r?function(e,t,r,n){if("$"===n[0]){if("$"===n)return u;switch(n[1]){case"$":return n.slice(1);case"L":return{$$typeof:c,_payload:e=M(e,t=parseInt(n.slice(2),16)),_init:S};case"@":if(2===n.length)return new Promise(function(){});return M(e,t=parseInt(n.slice(2),16));case"S":return Symbol.for(n.slice(2));case"F":return t=R(e,t=parseInt(n.slice(2),16)),function(e,t){function r(){var e=Array.prototype.slice.call(arguments),r=t.bound;return r?"fulfilled"===r.status?n(t.id,r.value.concat(e)):Promise.resolve(r).then(function(r){return n(t.id,r.concat(e))}):n(t.id,e)}var n=e._callServer;return b(r,t,e._encodeFormAction),r}(e,t);case"Q":return new Map(e=R(e,t=parseInt(n.slice(2),16)));case"W":return new Set(e=R(e,t=parseInt(n.slice(2),16)));case"I":return 1/0;case"-":return"$-0"===n?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(n.slice(2)));case"n":return BigInt(n.slice(2));default:switch((e=M(e,n=parseInt(n.slice(1),16))).status){case"resolved_model":A(e);break;case"resolved_module":P(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":var a;return n=C,e.then(function(e,t,r,n){if(N){var a=N;n||a.deps++}else a=N={deps:n?0:1,value:null};return function(n){t[r]=n,a.deps--,0===a.deps&&"blocked"===e.status&&(n=e.value,e.status="fulfilled",e.value=a.value,null!==n&&E(n,a.value))}}(n,t,r,"cyclic"===e.status),(a=n,function(e){return j(a,e)})),null;default:throw e.reason}}}return n}(t,this,e,r):"object"==typeof r&&null!==r?e=r[0]===u?{$$typeof:u,type:r[1],key:r[2],ref:null,props:r[3],_owner:null}:r:r}),r}function U(e,t){function n(t){$(e,t)}var u=t.getReader();u.read().then(function t(c){var d=c.value;if(c.done)$(e,Error("Connection closed."));else{var p=0,m=e._rowState,f=e._rowID,h=e._rowTag,g=e._rowLength;c=e._buffer;for(var y=d.length;p<y;){var v=-1;switch(m){case 0:58===(v=d[p++])?m=1:f=f<<4|(96<v?v-87:v-48);continue;case 1:84===(m=d[p])?(h=m,m=2,p++):64<m&&91>m?(h=m,m=3,p++):(h=0,m=3);continue;case 2:44===(v=d[p++])?m=4:g=g<<4|(96<v?v-87:v-48);continue;case 3:v=d.indexOf(10,p);break;case 4:(v=p+g)>d.length&&(v=-1)}var _=d.byteOffset+p;if(-1<v){p=new Uint8Array(d.buffer,_,v-p),g=e,_=h;var b=g._stringDecoder;h="";for(var w=0;w<c.length;w++)h+=b.decode(c[w],a);switch(h+=b.decode(p),_){case 73:!function(e,t,n){var a=e._chunks,u=a.get(t);n=JSON.parse(n,e._fromJSON);var c=function(e,t){if(e){var r=e[t[0]];if(e=r[t[2]])r=e.name;else{if(!(e=r["*"]))throw Error('Could not find the module "'+t[0]+'" in the React SSR Manifest. This is probably a bug in the React Server Components bundler.');r=t[2]}return 4===t.length?[e.id,e.chunks,r,1]:[e.id,e.chunks,r]}return t}(e._bundlerConfig,n);if(function(e,t,r){if(null!==e)for(var n=1;n<t.length;n+=2){var a=l.current;if(a){var s=a.preinitScript,i=e.prefix+t[n],o=e.crossOrigin;o="string"==typeof o?"use-credentials"===o?o:"":void 0,s.call(a,i,{crossOrigin:o,nonce:r})}}}(e._moduleLoading,n[1],e._nonce),n=function(e){for(var t=e[1],n=[],a=0;a<t.length;){var l=t[a++];t[a++];var u=s.get(l);if(void 0===u){u=r.e(l),n.push(u);var c=s.set.bind(s,l,null);u.then(c,o),s.set(l,u)}else null!==u&&n.push(u)}return 4===e.length?0===n.length?i(e[0]):Promise.all(n).then(function(){return i(e[0])}):0<n.length?Promise.all(n):null}(c)){if(u){var d=u;d.status="blocked"}else d=new T("blocked",null,null,e),a.set(t,d);n.then(function(){return I(d,c)},function(e){return j(d,e)})}else u?I(u,c):a.set(t,new T("resolved_module",c,null,e))}(g,f,h);break;case 72:if(f=h[0],g=JSON.parse(h=h.slice(1),g._fromJSON),h=l.current)switch(f){case"D":h.prefetchDNS(g);break;case"C":"string"==typeof g?h.preconnect(g):h.preconnect(g[0],g[1]);break;case"L":f=g[0],p=g[1],3===g.length?h.preload(f,p,g[2]):h.preload(f,p);break;case"m":"string"==typeof g?h.preloadModule(g):h.preloadModule(g[0],g[1]);break;case"S":"string"==typeof g?h.preinitStyle(g):h.preinitStyle(g[0],0===g[1]?void 0:g[1],3===g.length?g[2]:void 0);break;case"X":"string"==typeof g?h.preinitScript(g):h.preinitScript(g[0],g[1]);break;case"M":"string"==typeof g?h.preinitModuleScript(g):h.preinitModuleScript(g[0],g[1])}break;case 69:p=(h=JSON.parse(h)).digest,(h=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.")).stack="Error: "+h.message,h.digest=p,(_=(p=g._chunks).get(f))?j(_,h):p.set(f,new T("rejected",null,h,g));break;case 84:g._chunks.set(f,new T("fulfilled",h,null,g));break;case 68:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");default:(_=(p=g._chunks).get(f))?(g=_,f=h,"pending"===g.status&&(h=g.value,p=g.reason,g.status="resolved_model",g.value=f,null!==h&&(A(g),O(g,h,p)))):p.set(f,new T("resolved_model",h,null,g))}p=v,3===m&&p++,g=f=h=m=0,c.length=0}else{d=new Uint8Array(d.buffer,_,d.byteLength-p),c.push(d),g-=d.byteLength;break}}return e._rowState=m,e._rowID=f,e._rowTag=h,e._rowLength=g,u.read().then(t).catch(n)}}).catch(n)}t.createFromFetch=function(e,t){var r=L(t);return e.then(function(e){U(r,e.body)},function(e){$(r,e)}),M(r,0)},t.createFromReadableStream=function(e,t){return U(t=L(t),e),M(t,0)},t.createServerReference=function(e){return function(e,t,r){function n(){var r=Array.prototype.slice.call(arguments);return t(e,r)}return b(n,{id:e,bound:null},r),n}(e,D)},t.encodeReply=function(e){return new Promise(function(t,r){g(e,"",t,r)})}},30561:(e,t,r)=>{"use strict";e.exports=r(37971)},88769:()=>{},24672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DetachedPromise",{enumerable:!0,get:function(){return r}});class r{constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}},21890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{atLeastOneTask:function(){return a},scheduleImmediate:function(){return n},scheduleOnNextTick:function(){return r}});let r=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},n=e=>{setImmediate(e)};function a(){return new Promise(e=>n(e))}},9702:(e,t)=>{"use strict";let r,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return s},decrypt:function(){return l},encrypt:function(){return o},generateEncryptionKeyBase64:function(){return u},getActionEncryptionKey:function(){return f},getClientReferenceManifestSingleton:function(){return m},getServerModuleMap:function(){return p},setReferenceManifestsSingleton:function(){return d},stringToUint8Array:function(){return i}});let a=null;function s(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function i(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function o(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function l(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}async function u(e){if(e&&void 0!==n)return n;a||(a=new Promise(async(e,t)=>{try{let t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=await crypto.subtle.exportKey("raw",t),n=btoa(s(r));e([t,n])}catch(e){t(e)}}));let[t,i]=await a;return r=t,e&&(n=i),i}let c=Symbol.for("next.server.action-manifests");function d({clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}){globalThis[c]={clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}}function p(){let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.serverModuleMap}function m(){let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.clientReferenceManifest}async function f(){if(r)return r;let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Error("Missing encryption key for Server Actions");return r=await crypto.subtle.importKey("raw",i(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},60166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return p},encryptActionBoundArgs:function(){return d}}),r(88769);let n=r(51749),a=r(30561),s=r(18175),i=r(9702),o=new TextEncoder,l=new TextDecoder;async function u(e,t){let r=await (0,i.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=atob(t),a=n.slice(0,16),s=n.slice(16),o=l.decode(await (0,i.decrypt)(r,(0,i.stringToUint8Array)(a),(0,i.stringToUint8Array)(s)));if(!o.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return o.slice(e.length)}async function c(e,t){let r=await (0,i.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=new Uint8Array(16);crypto.getRandomValues(n);let a=(0,i.arrayBufferToString)(n.buffer),s=await (0,i.encrypt)(r,n,o.encode(e+t));return btoa(a+(0,i.arrayBufferToString)(s))}async function d(e,t){let r=(0,i.getClientReferenceManifestSingleton)(),a=await (0,s.streamToString)((0,n.renderToReadableStream)(t,r.clientModules));return await c(e,a)}async function p(e,t){let r=await u(e,await t),s=await (0,a.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(o.encode(r)),e.close()}}),{ssrManifest:{moduleLoading:{},moduleMap:{}}}),l=(0,i.getServerModuleMap)();return await (0,n.decodeReply)(await (0,a.encodeReply)(s),l)}},97049:(e,t,r)=>{"use strict";e.exports=r(23191).vendored["react-rsc"].ReactDOM},51749:(e,t,r)=>{"use strict";e.exports=r(23191).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},49303:(e,t,r)=>{"use strict";e.exports=r(30517)},63502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ENCODED_TAGS",{enumerable:!0,get:function(){return r}});let r={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])}}},18175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{chainStreams:function(){return d},continueDynamicDataResume:function(){return T},continueDynamicHTMLResume:function(){return k},continueDynamicPrerender:function(){return w},continueFizzStream:function(){return b},continueStaticPrerender:function(){return x},createBufferedTransformStream:function(){return f},createRootLayoutValidatorStream:function(){return _},renderToInitialFizzStream:function(){return h},streamFromString:function(){return p},streamToString:function(){return m}});let n=r(64994),a=r(71376),s=r(24672),i=r(21890),o=r(63502),l=r(5893);function u(){}let c=new TextEncoder;function d(...e){if(0===e.length)throw Error("Invariant: chainStreams requires at least one stream");if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,n=e[0].pipeTo(r,{preventClose:!0}),a=1;for(;a<e.length-1;a++){let t=e[a];n=n.then(()=>t.pipeTo(r,{preventClose:!0}))}let s=e[a];return(n=n.then(()=>s.pipeTo(r))).catch(u),t}function p(e){return new ReadableStream({start(t){t.enqueue(c.encode(e)),t.close()}})}async function m(e){let t=new TextDecoder("utf-8",{fatal:!0}),r="";for await(let n of e)r+=t.decode(n,{stream:!0});return r+t.decode()}function f(){let e,t=[],r=0,n=n=>{if(e)return;let a=new s.DetachedPromise;e=a,(0,i.scheduleImmediate)(()=>{try{let e=new Uint8Array(r),a=0;for(let r=0;r<t.length;r++){let n=t[r];e.set(n,a),a+=n.byteLength}t.length=0,r=0,n.enqueue(e)}catch{}finally{e=void 0,a.resolve()}})};return new TransformStream({transform(e,a){t.push(e),r+=e.byteLength,n(a)},flush(){if(e)return e.promise}})}function h({ReactDOMServer:e,element:t,streamOptions:r}){return(0,n.getTracer)().trace(a.AppRenderSpan.renderToReadableStream,async()=>e.renderToReadableStream(t,r))}function g(e){let t=!1,r=!1,n=!1;return new TransformStream({async transform(a,s){if(n=!0,r){s.enqueue(a);return}let u=await e();if(t){if(u){let e=c.encode(u);s.enqueue(e)}s.enqueue(a),r=!0}else{let e=(0,l.indexOfUint8Array)(a,o.ENCODED_TAGS.CLOSED.HEAD);if(-1!==e){if(u){let t=c.encode(u),r=new Uint8Array(a.length+t.length);r.set(a.slice(0,e)),r.set(t,e),r.set(a.slice(e),e+t.length),s.enqueue(r)}else s.enqueue(a);r=!0,t=!0}}t?(0,i.scheduleImmediate)(()=>{r=!1}):s.enqueue(a)},async flush(t){if(n){let r=await e();r&&t.enqueue(c.encode(r))}}})}function y(e){let t=null,r=!1;async function n(n){if(t)return;let a=e.getReader();await (0,i.atLeastOneTask)();try{for(;;){let{done:e,value:t}=await a.read();if(e){r=!0;return}n.enqueue(t)}}catch(e){n.error(e)}}return new TransformStream({transform(e,r){r.enqueue(e),t||(t=n(r))},flush(e){if(!r)return t||n(e)}})}function v(e){let t=!1,r=c.encode(e);return new TransformStream({transform(n,a){if(t)return a.enqueue(n);let s=(0,l.indexOfUint8Array)(n,r);if(s>-1){if(t=!0,n.length===e.length)return;let r=n.slice(0,s);if(a.enqueue(r),n.length>e.length+s){let t=n.slice(s+e.length);a.enqueue(t)}}else a.enqueue(n)},flush(e){e.enqueue(r)}})}function _(){let e=!1,t=!1;return new TransformStream({async transform(r,n){!e&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.HTML)>-1&&(e=!0),!t&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.BODY)>-1&&(t=!0),n.enqueue(r)},flush(r){let n=[];e||n.push("html"),t||n.push("body"),n.length&&r.enqueue(c.encode(`<script>self.__next_root_layout_missing_tags=${JSON.stringify(n)}</script>`))}})}async function b(e,{suffix:t,inlinedDataStream:r,isStaticGeneration:n,getServerInsertedHTML:a,serverInsertedHTMLToHead:o,validateRootLayout:l}){let u="</body></html>",d=t?t.split(u,1)[0]:null;return n&&"allReady"in e&&await e.allReady,function(e,t){let r=e;for(let e of t)e&&(r=r.pipeThrough(e));return r}(e,[f(),a&&!o?new TransformStream({transform:async(e,t)=>{let r=await a();r&&t.enqueue(c.encode(r)),t.enqueue(e)}}):null,null!=d&&d.length>0?function(e){let t,r=!1,n=r=>{let n=new s.DetachedPromise;t=n,(0,i.scheduleImmediate)(()=>{try{r.enqueue(c.encode(e))}catch{}finally{t=void 0,n.resolve()}})};return new TransformStream({transform(e,t){t.enqueue(e),r||(r=!0,n(t))},flush(n){if(t)return t.promise;r||n.enqueue(c.encode(e))}})}(d):null,r?y(r):null,l?_():null,v(u),a&&o?g(a):null])}async function w(e,{getServerInsertedHTML:t}){return e.pipeThrough(f()).pipeThrough(new TransformStream({transform(e,t){(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.HTML)||(e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.BODY),e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.HTML),t.enqueue(e))}})).pipeThrough(g(t))}async function x(e,{inlinedDataStream:t,getServerInsertedHTML:r}){return e.pipeThrough(f()).pipeThrough(g(r)).pipeThrough(y(t)).pipeThrough(v("</body></html>"))}async function k(e,{inlinedDataStream:t,getServerInsertedHTML:r}){return e.pipeThrough(f()).pipeThrough(g(r)).pipeThrough(y(t)).pipeThrough(v("</body></html>"))}async function T(e,{inlinedDataStream:t}){return e.pipeThrough(y(t)).pipeThrough(v("</body></html>"))}},5893:(e,t)=>{"use strict";function r(e,t){if(0===t.length)return 0;if(0===e.length||t.length>e.length)return -1;for(let r=0;r<=e.length-t.length;r++){let n=!0;for(let a=0;a<t.length;a++)if(e[r+a]!==t[a]){n=!1;break}if(n)return r}return -1}function n(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function a(e,t){let n=r(e,t);if(0===n)return e.subarray(t.length);if(!(n>-1))return e;{let r=new Uint8Array(e.length-t.length);return r.set(e.slice(0,n)),r.set(e.slice(n+t.length),n),r}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{indexOfUint8Array:function(){return r},isEquivalentUint8Arrays:function(){return n},removeFromUint8Array:function(){return a}})},45762:e=>{"use strict";let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function a(e,a,i){null==i&&null!==a&&"object"==typeof a&&(i=a,a=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let o=JSON.parse(e,a);if(null===o||"object"!=typeof o)return o;let l=i&&i.protoAction||"error",u=i&&i.constructorAction||"error";if("ignore"===l&&"ignore"===u)return o;if("ignore"!==l&&"ignore"!==u){if(!1===r.test(e)&&!1===n.test(e))return o}else if("ignore"!==l&&"ignore"===u){if(!1===r.test(e))return o}else if(!1===n.test(e))return o;return s(o,{protoAction:l,constructorAction:u,safe:i&&i.safe})}function s(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let a=[e];for(;a.length;){let e=a;for(let s of(a=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(s,"__proto__")){if(!0===n)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete s.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype")){if(!0===n)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete s.constructor}for(let e in s){let t=s[e];t&&"object"==typeof t&&a.push(t)}}}return e}function i(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return a(e,t,r)}finally{Error.stackTraceLimit=n}}e.exports=i,e.exports.default=i,e.exports.parse=i,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return a(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=s}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(81310));module.exports=n})();