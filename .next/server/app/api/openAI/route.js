(()=>{var e={};e.id=241,e.ids=[241],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},71017:e=>{"use strict";e.exports=require("path")},61915:(e,t,r)=>{"use strict";let n,a;r.r(t),r.d(t,{originalPathname:()=>iz,patchFetch:()=>iJ,requestAsyncStorage:()=>iL,routeModule:()=>iD,serverHooks:()=>iq,staticGenerationAsyncStorage:()=>iU});var s,i,o,l,u,c,d,p,f,m,h,g,y,v,b,_,w,x,k,S,T,A,E,I,j,O,C,N,$,P,M,R,Z,F,D,L,U={};r.r(U),r.d(U,{GET:()=>iZ,POST:()=>iF});var q=r(49303),z=r(88716),J=r(60670),B=r(24330);r(60166);var V=r(71017),K=r.n(V),W=r(57147),H=r(40618);let G=(0,B.j)("79ee2a44b6ed1508152f9793fd7aa4c7ebe6eddb",Y);async function Y(e){let t;let r=[],n=/##\s*(.+?)\n([\s\S]*?)(?=\n##|\n*$)/g;for(;null!==(t=n.exec(e));){let e=t[1].trim(),n=t[2].trim();r.push({heading:e,content:n})}return r}let Q=(0,B.j)("2859c842cec278deeb531eab66802251f4986202",X);async function X(e,t){let r=e.find(e=>e.heading===t);return("Meta Title"==t||"Meta Description"==t||"Short Summary"==t)&&(r.content=r?.content.replace(":","")),r}let ee=(0,B.j)("6bf2eba56f8251ad2a4378b34e19f90d8baa72a7",et);async function et(e){let t=await ea(e),r=ec();return`${r}-${t}`}let er=(0,B.j)("35d1c05691d37598ee1eaed5d9b940afcd1c3ef7",en);async function en(e,t){return"/"+t+"/"+await ea(e)+"/"}let ea=(0,B.j)("6b6e2c58292cbd04a20d5cd2a871d54854aadb5a",es);async function es(e){return e.replace(/c#/gi,"csharp").toLowerCase().replace(/[^a-z0-9\s]/g,"").trim().replace(/\s+/g,"-")}let ei=(0,B.j)("018bf649b069052d463e63420ad4733b291b2cc8",eo);async function eo(e){let t=["in","the","for","and","of","on","at","to","with","using"];return(e=e.replace(":","")).toLowerCase().replace(/\b\w+/g,(e,r)=>0!==r&&t.includes(e)?e:e.charAt(0).toUpperCase()+e.slice(1)).replace(/Csharp/i,"C#")}let el=(0,B.j)("edf92e052a771a140cb9db39bc91895ba07598b1",eu);async function eu(e){return e.split("\n").map(e=>{let t=(e.match(/^#+/)||[""])[0].length;return t<2?e.replace(/^#+/,"##"):t>2?e.replace(/^#+/,"##"):e}).join("\n")}let ec=()=>{let e=new Date,t=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Karachi",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(e),r=t.find(e=>"year"===e.type)?.value,n=t.find(e=>"month"===e.type)?.value,a=t.find(e=>"day"===e.type)?.value;return`${r}-${n}-${a}`},ed=(0,B.j)("29c7b38884e84fdbabfc3f511a1e0312ac567d2d",ep);async function ep(e){try{return await W.promises.access(e),!0}catch{return!1}}let ef=(0,B.j)("a02da7af8ec7de61ff09818383be663a2b1a5f79",em);async function em(){let e=new Date,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getUTCDay()],r=e.getUTCDate().toString().padStart(2,"0"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getUTCMonth()],a=e.getUTCFullYear(),s=e.getUTCHours().toString().padStart(2,"0"),i=e.getUTCMinutes().toString().padStart(2,"0"),o=e.getUTCSeconds().toString().padStart(2,"0");return`${t}, ${r} ${n} ${a} ${s}:${i}:${o} +0000`}let eh=(0,B.j)("0f8bda16527999eed4031f1fdddd12ab3bf5807c",eg);async function eg(e){return console.log("start"),await new Promise(e=>setTimeout(e,1e3)),console.log("end"),`# ${e}
This file is for language: ${e}`}let ey=(0,B.j)("be1a8b9faf8845669d00be381144d8bc5e7d747c",ev);async function ev(e){let t={},r=e.split("\n"),n=/^##\s+(.+)$/,a=!1,s=!1,i="",o={},l="",u=!1;for(let e of r){if(!s&&"---"===e){(a=!a)||(s=!0);continue}if(a){let[r,...n]=e.split(":");t.metadata||(t.metadata={}),r&&n&&(t.metadata[r.trim()]=n.join(":").trim().replace(/^"(.*)"$/,"$1"));continue}if(/^\{\{< figure .+ ?>\}\}$/.test(e)){if(!u){l=e,u=!0;continue}i&&(o[i]+=e+"\n");continue}let r=e.match(n);if(r){o[i=r[1].trim()]="";continue}i&&(o[i]+=e+"\n")}for(let e in t.metadata=t.metadata||{},t.firstFigure=l||null,t.sections=o,o)o[e]=o[e].trim();return t}let eb=(0,B.j)("9b9fba13d514fbfc57de4c5a6e952262a1a23c06",e_);async function e_(e){let t="";if(e.metadata){for(let[r,n]of(t+="---\n",Object.entries(e.metadata)))t+=`${r}: ${n}
`;t+="---\n\n"}if(e.firstFigure&&(t+=`${e.firstFigure}

`),e.sections)for(let[r,n]of Object.entries(e.sections))t+=`## ${r}

`+(n?`${n}

`:"\n");return t.trim()}let ew=(0,B.j)("457bef4e76de664f50b40421b80f8c301fbe03a9",ex);async function ex(e,t){try{return await ed(K().join(`${process.cwd()}/public/blog-posts`,t))||await W.promises.mkdir(K().join(`${process.cwd()}/public/blog-posts`,t)),await W.promises.writeFile(`${process.cwd()}/public/blog-posts/${t}/index.md`,e),console.log("optimized file created"),!0}catch(e){return console.log("optimized file creation failed"),!1}}let ek=(0,B.j)("1b59c1b85588f8963ca0f472fe29e3f23a4da34f",eS);async function eS(e,t){let r=(e,t)=>{let r=RegExp(`${t}:\\s*(\\[[^\\]]*\\])`),n=e.match(r);return n?n[0]:null},n=r(e,"tags"),a=r(e,"categories"),s=r(t,"tags"),i=r(t,"categories"),o=t;return n&&s&&n!==s&&(o=o.replace(s,n)),a&&i&&a!==i&&(o=o.replace(i,a)),o}let eT=(0,B.j)("19d3a45c6f9fa458f89cd6309f26a40e6b0b7815",eA);async function eA(e,t){let r=RegExp(`## (?:Explore|See More|Discover More|Read More)[\\s\\S]*?(?=\\n##|$)`,"gi");return e.replace(r,e=>e.replace(/(\()https:\/\/blog\.aspose\.com\/(?![a-z]{2}\/)([^)\s]*)/g,`$1https://blog.aspose.com/${t}/$2`))}(0,H.h)([G,Q,ee,er,ea,ei,el,ed,ef,eh,ey,eb,ew,ek,eT]),(0,B.j)("04ef008bdf6542d424cf173749d32caeb0c1aa61",G),(0,B.j)("db70233def9dcbc77d1f11373fa7446935c2d8c6",Q),(0,B.j)("c9eea8a60497f3998a29d82114c6f68354f1b7dd",ee),(0,B.j)("059792cae592e2d04053a89e536767b39c69ad33",er),(0,B.j)("32ad231a00c7b908b9aae5dad7fe8efedbe6cc46",ea),(0,B.j)("1cac3e835255a55ac755ac0702b5c6c1ef5e6780",ei),(0,B.j)("b7c3f7f40ddccfd03d04f5ed3d2b4a39e3609af8",el),(0,B.j)("e76e789f95d50ccc1d31e5513188a7449aa882cb",ed),(0,B.j)("b1e571bebd309c1b005524d5f610230fedcefdc8",ef),(0,B.j)("be5785310fdf67e55068b8d6b905402671ed7f28",eh),(0,B.j)("7d8be15379a81b1105299c2a329534c85050ddcc",ey),(0,B.j)("e90e3d1cb3062eb1f0a44fc52cfc8d2c0b77ce83",eb),(0,B.j)("436796644f04f7926b86d6e041b792c7aac19ea8",ew),(0,B.j)("1fccce18336e2b3d1f0698c8018774f1d429111d",ek),(0,B.j)("02ad6b089652329b79ceb6083fe813377cd43a3a",eT);var eE="vercel.ai.error",eI=Symbol.for(eE),ej=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[s]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,eE)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};s=eI;var eO=ej,eC="AI_APICallError",eN=`vercel.ai.error.${eC}`,e$=Symbol.for(eN),eP=class extends eO{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:s,cause:o,isRetryable:l=null!=n&&(408===n||409===n||429===n||n>=500),data:u}){super({name:eC,message:e,cause:o}),this[i]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(e){return eO.hasMarker(e,eN)}static isAPICallError(e){return e instanceof Error&&e.name===eC&&"string"==typeof e.url&&"object"==typeof e.requestBodyValues&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.responseHeaders||"object"==typeof e.responseHeaders)&&(null==e.responseBody||"string"==typeof e.responseBody)&&(null==e.cause||"object"==typeof e.cause)&&"boolean"==typeof e.isRetryable&&(null==e.data||"object"==typeof e.data)}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};i=e$;var eM="AI_EmptyResponseBodyError",eR=`vercel.ai.error.${eM}`,eZ=Symbol.for(eR),eF=class extends eO{constructor({message:e="Empty response body"}={}){super({name:eM,message:e}),this[o]=!0}static isInstance(e){return eO.hasMarker(e,eR)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===eM}};function eD(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}o=eZ;var eL="AI_InvalidPromptError",eU=`vercel.ai.error.${eL}`,eq=Symbol.for(eU),ez=class extends eO{constructor({prompt:e,message:t,cause:r}){super({name:eL,message:`Invalid prompt: ${t}`,cause:r}),this[l]=!0,this.prompt=e}static isInstance(e){return eO.hasMarker(e,eU)}static isInvalidPromptError(e){return e instanceof Error&&e.name===eL&&null!=prompt}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};l=eq;var eJ="AI_InvalidResponseDataError",eB=`vercel.ai.error.${eJ}`,eV=Symbol.for(eB),eK=class extends eO{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:eJ,message:t}),this[u]=!0,this.data=e}static isInstance(e){return eO.hasMarker(e,eB)}static isInvalidResponseDataError(e){return e instanceof Error&&e.name===eJ&&null!=e.data}toJSON(){return{name:this.name,message:this.message,stack:this.stack,data:this.data}}};u=eV;var eW="AI_JSONParseError",eH=`vercel.ai.error.${eW}`,eG=Symbol.for(eH),eY=class extends eO{constructor({text:e,cause:t}){super({name:eW,message:`JSON parsing failed: Text: ${e}.
Error message: ${eD(t)}`,cause:t}),this[c]=!0,this.text=e}static isInstance(e){return eO.hasMarker(e,eH)}static isJSONParseError(e){return e instanceof Error&&e.name===eW&&"text"in e&&"string"==typeof e.text}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};c=eG;var eQ="AI_LoadAPIKeyError",eX=`vercel.ai.error.${eQ}`,e0=Symbol.for(eX),e1=class extends eO{constructor({message:e}){super({name:eQ,message:e}),this[d]=!0}static isInstance(e){return eO.hasMarker(e,eX)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===eQ}};d=e0,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError");var e9="AI_TooManyEmbeddingValuesForCallError",e4=`vercel.ai.error.${e9}`,e2=Symbol.for(e4),e6=class extends eO{constructor(e){super({name:e9,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[p]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return eO.hasMarker(e,e4)}static isTooManyEmbeddingValuesForCallError(e){return e instanceof Error&&e.name===e9&&"provider"in e&&"string"==typeof e.provider&&"modelId"in e&&"string"==typeof e.modelId&&"maxEmbeddingsPerCall"in e&&"number"==typeof e.maxEmbeddingsPerCall&&"values"in e&&Array.isArray(e.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};p=e2;var e8="AI_TypeValidationError",e3=`vercel.ai.error.${e8}`,e5=Symbol.for(e3),e7=class e extends eO{constructor({value:e,cause:t}){super({name:e8,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${eD(t)}`,cause:t}),this[f]=!0,this.value=e}static isInstance(e){return eO.hasMarker(e,e3)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===e8}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};f=e5;var te="AI_UnsupportedFunctionalityError",tt=`vercel.ai.error.${te}`,tr=Symbol.for(tt),tn=class extends eO{constructor({functionality:e}){super({name:te,message:`'${e}' functionality not supported.`}),this[m]=!0,this.functionality=e}static isInstance(e){return eO.hasMarker(e,tt)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===te&&"string"==typeof e.functionality}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};function ta(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(ta):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&ta(t)))}m=tr;let ts=(e,t=21)=>(r=t)=>{let n="",a=r;for(;a--;)n+=e[Math.random()*e.length|0];return n};var ti=r(45762);let to=[239,187,191];class tl extends TransformStream{constructor(){let e;super({start(t){e=function(e){let t,r,n,a,s,i,o;return l(),{feed:function(l){var u;r=r?r+l:l,t&&(u=r,to.every((e,t)=>u.charCodeAt(t)===e))&&(r=r.slice(to.length)),t=!1;let c=r.length,d=0,p=!1;for(;d<c;){let t;p&&("\n"===r[d]&&++d,p=!1);let l=-1,u=a;for(let e=n;l<0&&e<c;++e)":"===(t=r[e])&&u<0?u=e-d:"\r"===t?(p=!0,l=e-d):"\n"===t&&(l=e-d);if(l<0){n=c-d,a=u;break}n=0,a=-1,function(t,r,n,a){if(0===a){o.length>0&&(e({type:"event",id:s,event:i||void 0,data:o.slice(0,-1)}),o="",s=void 0),i=void 0;return}let l=n<0,u=t.slice(r,r+(l?a:n)),c=0;c=l?a:" "===t[r+n+1]?n+2:n+1;let d=r+c,p=a-c,f=t.slice(d,d+p).toString();if("data"===u)o+=f?"".concat(f,"\n"):"\n";else if("event"===u)i=f;else if("id"!==u||f.includes("\0")){if("retry"===u){let t=parseInt(f,10);Number.isNaN(t)||e({type:"reconnect-interval",value:t})}}else s=f}(r,d,u,l),d+=l+1}d===c?r="":d>0&&(r=r.slice(d))},reset:l};function l(){t=!0,r="",n=0,a=-1,s=void 0,i=void 0,o=""}}(e=>{"event"===e.type&&t.enqueue(e)})},transform(t){e.feed(t)}})}}function tu(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function tc(e){let t={};return e.headers.forEach((e,r)=>{t[r]=e}),t}var td=(({prefix:e="",size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{let n=ts(r,t);return t=>`${e}${n(t)}`})();function tp(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}var tf=Symbol.for("vercel.ai.validator");function tm({value:e,schema:t}){let r="object"==typeof t&&null!==t&&tf in t&&!0===t[tf]&&"validate"in t?t:{[tf]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:e7.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:e7.wrap({value:e,cause:t})}}}function th({text:e,schema:t}){try{let r=ti.parse(e);if(null==t)return{success:!0,value:r};return tm({value:r,schema:t})}catch(t){return{success:!1,error:eY.isJSONParseError(t)?t:new eY({text:e,cause:t})}}}function tg(e){try{return ti.parse(e),!0}catch(e){return!1}}var ty=()=>globalThis.fetch,tv=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i})=>tb({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i}),tb=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:a,abortSignal:s,fetch:i=ty()})=>{try{let o=await i(e,{method:"POST",headers:Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),body:r.content,signal:s}),l=tc(o);if(!o.ok){let t;try{t=await a({response:o,url:e,requestBodyValues:r.values})}catch(t){if(tp(t)||eP.isAPICallError(t))throw t;throw new eP({message:"Failed to process error response",cause:t,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw t.value}try{return await n({response:o,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(tp(t)||eP.isAPICallError(t)))throw t;throw new eP({message:"Failed to process successful response",cause:t,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(t){if(tp(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let n=t.cause;if(null!=n)throw new eP({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r.values,isRetryable:!0})}throw t}},t_=e=>async({response:t})=>{let r=tc(t);if(null==t.body)throw new eF({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new tl).pipeThrough(new TransformStream({transform({data:t},r){"[DONE]"!==t&&r.enqueue(th({text:t,schema:e}))}}))}},tw=e=>async({response:t,url:r,requestBodyValues:n})=>{let a=await t.text(),s=th({text:a,schema:e}),i=tc(t);if(!s.success)throw new eP({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:a,url:r,requestBodyValues:n});return{responseHeaders:i,value:s.value}},{btoa:tx,atob:tk}=globalThis;(function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(h||(h={})),(g||(g={})).mergeShapes=(e,t)=>({...e,...t});let tS=h.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tT=e=>{switch(typeof e){case"undefined":return tS.undefined;case"string":return tS.string;case"number":return isNaN(e)?tS.nan:tS.number;case"boolean":return tS.boolean;case"function":return tS.function;case"bigint":return tS.bigint;case"symbol":return tS.symbol;case"object":if(Array.isArray(e))return tS.array;if(null===e)return tS.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return tS.promise;if("undefined"!=typeof Map&&e instanceof Map)return tS.map;if("undefined"!=typeof Set&&e instanceof Set)return tS.set;if("undefined"!=typeof Date&&e instanceof Date)return tS.date;return tS.object;default:return tS.unknown}},tA=h.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class tE extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof tE))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,h.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}tE.create=e=>new tE(e);let tI=(e,t)=>{let r;switch(e.code){case tA.invalid_type:r=e.received===tS.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case tA.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,h.jsonStringifyReplacer)}`;break;case tA.unrecognized_keys:r=`Unrecognized key(s) in object: ${h.joinValues(e.keys,", ")}`;break;case tA.invalid_union:r="Invalid input";break;case tA.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${h.joinValues(e.options)}`;break;case tA.invalid_enum_value:r=`Invalid enum value. Expected ${h.joinValues(e.options)}, received '${e.received}'`;break;case tA.invalid_arguments:r="Invalid function arguments";break;case tA.invalid_return_type:r="Invalid function return type";break;case tA.invalid_date:r="Invalid date";break;case tA.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:h.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case tA.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case tA.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case tA.custom:r="Invalid input";break;case tA.invalid_intersection_types:r="Intersection results could not be merged";break;case tA.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case tA.not_finite:r="Number must be finite";break;default:r=t.defaultError,h.assertNever(e)}return{message:r}},tj=tI;function tO(){return tj}let tC=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}};function tN(e,t){let r=tO(),n=tC({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===tI?void 0:tI].filter(e=>!!e)});e.common.issues.push(n)}class t${constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return tP;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return t$.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:a}=n;if("aborted"===t.status||"aborted"===a.status)return tP;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||n.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let tP=Object.freeze({status:"aborted"}),tM=e=>({status:"dirty",value:e}),tR=e=>({status:"valid",value:e}),tZ=e=>"aborted"===e.status,tF=e=>"dirty"===e.status,tD=e=>"valid"===e.status,tL=e=>"undefined"!=typeof Promise&&e instanceof Promise;function tU(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function tq(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(y||(y={}));class tz{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let tJ=(e,t)=>{if(tD(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new tE(e.common.issues);return this._error=t,this._error}}};function tB(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var s,i;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(s=null!=o?o:n)&&void 0!==s?s:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(i=null!=o?o:r)&&void 0!==i?i:a.defaultError}},description:a}}class tV{get description(){return this._def.description}_getType(e){return tT(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new t$,ctx:{common:e.parent.common,data:e.data,parsedType:tT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(tL(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tT(e)},a=this._parseSync({data:e,path:n.path,parent:n});return tJ(n,a)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tT(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return tD(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>tD(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tT(e)},n=this._parse({data:e,path:r.path,parent:r});return tJ(r,await (tL(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let a=e(t),s=()=>n.addIssue({code:tA.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new rO({schema:this,typeName:_.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return rC.create(this,this._def)}nullable(){return rN.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rf.create(this)}promise(){return rj.create(this,this._def)}or(e){return rh.create([this,e],this._def)}and(e){return rv.create(this,e,this._def)}transform(e){return new rO({...tB(this._def),schema:this,typeName:_.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new r$({...tB(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:_.ZodDefault})}brand(){return new rZ({typeName:_.ZodBranded,type:this,...tB(this._def)})}catch(e){return new rP({...tB(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:_.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return rF.create(this,e)}readonly(){return rD.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let tK=/^c[^\s-]{8,}$/i,tW=/^[0-9a-z]+$/,tH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tY=/^[a-z0-9_-]{21}$/i,tQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,t0=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,t1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,t9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,t4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,t2=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,t6=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,t8=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,t3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",t5=RegExp(`^${t3}$`);function t7(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function re(e){let t=`${t3}T${t7(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class rt extends tV{_parse(e){var t,r,a,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tS.string){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.string,received:t.parsedType}),tP}let o=new t$;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(tN(i=this._getOrReturnCtx(e,i),{code:tA.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(tN(i=this._getOrReturnCtx(e,i),{code:tA.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(i=this._getOrReturnCtx(e,i),t?tN(i,{code:tA.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&tN(i,{code:tA.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)t0.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"email",code:tA.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:tA.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)tG.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:tA.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)tY.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:tA.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)tK.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:tA.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)tW.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:tA.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)tH.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:tA.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(t){tN(i=this._getOrReturnCtx(e,i),{validation:"url",code:tA.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"regex",code:tA.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(tN(i=this._getOrReturnCtx(e,i),{code:tA.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(tN(i=this._getOrReturnCtx(e,i),{code:tA.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(tN(i=this._getOrReturnCtx(e,i),{code:tA.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?re(l).test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{code:tA.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?t5.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{code:tA.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${t7(l)}$`).test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{code:tA.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?tX.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"duration",code:tA.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(t=e.data,("v4"===(r=l.version)||!r)&&t1.test(t)||("v6"===r||!r)&&t4.test(t)||(tN(i=this._getOrReturnCtx(e,i),{validation:"ip",code:tA.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!tQ.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));if("object"!=typeof a||null===a||!a.typ||!a.alg||t&&a.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,l.alg)&&(tN(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:tA.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(a=e.data,("v4"===(s=l.version)||!s)&&t9.test(a)||("v6"===s||!s)&&t2.test(a)||(tN(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:tA.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?t6.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"base64",code:tA.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?t8.test(e.data)||(tN(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:tA.invalid_string,message:l.message}),o.dirty()):h.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:tA.invalid_string,...y.errToObj(r)})}_addCheck(e){return new rt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...y.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...y.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...y.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...y.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new rt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new rt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new rt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}rt.create=e=>{var t;return new rt({checks:[],typeName:_.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tB(e)})};class rr extends tV{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tS.number){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.number,received:t.parsedType}),tP}let r=new t$;for(let n of this._def.checks)"int"===n.kind?h.isInteger(e.data)||(tN(t=this._getOrReturnCtx(e,t),{code:tA.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,n.value)&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(tN(t=this._getOrReturnCtx(e,t),{code:tA.not_finite,message:n.message}),r.dirty()):h.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,n){return new rr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(n)}]})}_addCheck(e){return new rr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&h.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}rr.create=e=>new rr({checks:[],typeName:_.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...tB(e)});class rn extends tV{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==tS.bigint)return this._getInvalidInput(e);let r=new t$;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):h.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.bigint,received:t.parsedType}),tP}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,n){return new rn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(n)}]})}_addCheck(e){return new rn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}rn.create=e=>{var t;return new rn({checks:[],typeName:_.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tB(e)})};class ra extends tV{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tS.boolean){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.boolean,received:t.parsedType}),tP}return tR(e.data)}}ra.create=e=>new ra({typeName:_.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...tB(e)});class rs extends tV{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tS.date){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.date,received:t.parsedType}),tP}if(isNaN(e.data.getTime()))return tN(this._getOrReturnCtx(e),{code:tA.invalid_date}),tP;let r=new t$;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(tN(t=this._getOrReturnCtx(e,t),{code:tA.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):h.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rs({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}rs.create=e=>new rs({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:_.ZodDate,...tB(e)});class ri extends tV{_parse(e){if(this._getType(e)!==tS.symbol){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.symbol,received:t.parsedType}),tP}return tR(e.data)}}ri.create=e=>new ri({typeName:_.ZodSymbol,...tB(e)});class ro extends tV{_parse(e){if(this._getType(e)!==tS.undefined){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.undefined,received:t.parsedType}),tP}return tR(e.data)}}ro.create=e=>new ro({typeName:_.ZodUndefined,...tB(e)});class rl extends tV{_parse(e){if(this._getType(e)!==tS.null){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.null,received:t.parsedType}),tP}return tR(e.data)}}rl.create=e=>new rl({typeName:_.ZodNull,...tB(e)});class ru extends tV{constructor(){super(...arguments),this._any=!0}_parse(e){return tR(e.data)}}ru.create=e=>new ru({typeName:_.ZodAny,...tB(e)});class rc extends tV{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tR(e.data)}}rc.create=e=>new rc({typeName:_.ZodUnknown,...tB(e)});class rd extends tV{_parse(e){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.never,received:t.parsedType}),tP}}rd.create=e=>new rd({typeName:_.ZodNever,...tB(e)});class rp extends tV{_parse(e){if(this._getType(e)!==tS.undefined){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.void,received:t.parsedType}),tP}return tR(e.data)}}rp.create=e=>new rp({typeName:_.ZodVoid,...tB(e)});class rf extends tV{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==tS.array)return tN(t,{code:tA.invalid_type,expected:tS.array,received:t.parsedType}),tP;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(tN(t,{code:e?tA.too_big:tA.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(tN(t,{code:tA.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(tN(t,{code:tA.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new tz(t,e,t.path,r)))).then(e=>t$.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new tz(t,e,t.path,r)));return t$.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new rf({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new rf({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new rf({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}rf.create=(e,t)=>new rf({type:e,minLength:null,maxLength:null,exactLength:null,typeName:_.ZodArray,...tB(t)});class rm extends tV{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=h.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==tS.object){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.object,received:t.parsedType}),tP}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof rd&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||s.push(e);let i=[];for(let e of a){let t=n[e],a=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new tz(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof rd){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(tN(r,{code:tA.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new tz(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>t$.mergeObjectSync(t,e)):t$.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new rm({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,a,s,i;let o=null!==(s=null===(a=(n=this._def).errorMap)||void 0===a?void 0:a.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=y.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new rm({...this._def,unknownKeys:"strip"})}passthrough(){return new rm({...this._def,unknownKeys:"passthrough"})}extend(e){return new rm({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new rm({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new rm({...this._def,catchall:e})}pick(e){let t={};return h.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new rm({...this._def,shape:()=>t})}omit(e){let t={};return h.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new rm({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof rm){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=rC.create(e(a))}return new rm({...t._def,shape:()=>r})}return t instanceof rf?new rf({...t._def,type:e(t.element)}):t instanceof rC?rC.create(e(t.unwrap())):t instanceof rN?rN.create(e(t.unwrap())):t instanceof rb?rb.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return h.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new rm({...this._def,shape:()=>t})}required(e){let t={};return h.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof rC;)e=e._def.innerType;t[r]=e}}),new rm({...this._def,shape:()=>t})}keyof(){return rA(h.objectKeys(this.shape))}}rm.create=(e,t)=>new rm({shape:()=>e,unknownKeys:"strip",catchall:rd.create(),typeName:_.ZodObject,...tB(t)}),rm.strictCreate=(e,t)=>new rm({shape:()=>e,unknownKeys:"strict",catchall:rd.create(),typeName:_.ZodObject,...tB(t)}),rm.lazycreate=(e,t)=>new rm({shape:e,unknownKeys:"strip",catchall:rd.create(),typeName:_.ZodObject,...tB(t)});class rh extends tV{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new tE(e.ctx.common.issues));return tN(t,{code:tA.invalid_union,unionErrors:r}),tP});{let e;let n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new tE(e));return tN(t,{code:tA.invalid_union,unionErrors:a}),tP}}get options(){return this._def.options}}rh.create=(e,t)=>new rh({options:e,typeName:_.ZodUnion,...tB(t)});let rg=e=>{if(e instanceof rS)return rg(e.schema);if(e instanceof rO)return rg(e.innerType());if(e instanceof rT)return[e.value];if(e instanceof rE)return e.options;if(e instanceof rI)return h.objectValues(e.enum);if(e instanceof r$)return rg(e._def.innerType);if(e instanceof ro)return[void 0];else if(e instanceof rl)return[null];else if(e instanceof rC)return[void 0,...rg(e.unwrap())];else if(e instanceof rN)return[null,...rg(e.unwrap())];else if(e instanceof rZ)return rg(e.unwrap());else if(e instanceof rD)return rg(e.unwrap());else if(e instanceof rP)return rg(e._def.innerType);else return[]};class ry extends tV{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tS.object)return tN(t,{code:tA.invalid_type,expected:tS.object,received:t.parsedType}),tP;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(tN(t,{code:tA.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),tP)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=rg(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new ry({typeName:_.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...tB(r)})}}class rv extends tV{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(tZ(e)||tZ(n))return tP;let a=function e(t,r){let n=tT(t),a=tT(r);if(t===r)return{valid:!0,data:t};if(n===tS.object&&a===tS.object){let n=h.objectKeys(r),a=h.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};s[n]=a.data}return{valid:!0,data:s}}if(n===tS.array&&a===tS.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let s=e(t[a],r[a]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===tS.date&&a===tS.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return a.valid?((tF(e)||tF(n))&&t.dirty(),{status:t.value,value:a.data}):(tN(r,{code:tA.invalid_intersection_types}),tP)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rv.create=(e,t,r)=>new rv({left:e,right:t,typeName:_.ZodIntersection,...tB(r)});class rb extends tV{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tS.array)return tN(r,{code:tA.invalid_type,expected:tS.array,received:r.parsedType}),tP;if(r.data.length<this._def.items.length)return tN(r,{code:tA.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tP;!this._def.rest&&r.data.length>this._def.items.length&&(tN(r,{code:tA.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new tz(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>t$.mergeArray(t,e)):t$.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new rb({...this._def,rest:e})}}rb.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new rb({items:e,typeName:_.ZodTuple,rest:null,...tB(t)})};class r_ extends tV{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tS.object)return tN(r,{code:tA.invalid_type,expected:tS.object,received:r.parsedType}),tP;let n=[],a=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new tz(r,e,r.path,e)),value:s._parse(new tz(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?t$.mergeObjectAsync(t,n):t$.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new r_(t instanceof tV?{keyType:e,valueType:t,typeName:_.ZodRecord,...tB(r)}:{keyType:rt.create(),valueType:e,typeName:_.ZodRecord,...tB(t)})}}class rw extends tV{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tS.map)return tN(r,{code:tA.invalid_type,expected:tS.map,received:r.parsedType}),tP;let n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new tz(r,e,r.path,[s,"key"])),value:a._parse(new tz(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return tP;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return tP;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}rw.create=(e,t,r)=>new rw({valueType:t,keyType:e,typeName:_.ZodMap,...tB(r)});class rx extends tV{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tS.set)return tN(r,{code:tA.invalid_type,expected:tS.set,received:r.parsedType}),tP;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(tN(r,{code:tA.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(tN(r,{code:tA.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return tP;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>a._parse(new tz(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new rx({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new rx({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}rx.create=(e,t)=>new rx({valueType:e,minSize:null,maxSize:null,typeName:_.ZodSet,...tB(t)});class rk extends tV{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tS.function)return tN(t,{code:tA.invalid_type,expected:tS.function,received:t.parsedType}),tP;function r(e,r){return tC({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tO(),tI].filter(e=>!!e),issueData:{code:tA.invalid_arguments,argumentsError:r}})}function n(e,r){return tC({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tO(),tI].filter(e=>!!e),issueData:{code:tA.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof rj){let e=this;return tR(async function(...t){let i=new tE([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw i.addIssue(n(l,e)),i})})}{let e=this;return tR(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new tE([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new tE([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rk({...this._def,args:rb.create(e).rest(rc.create())})}returns(e){return new rk({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new rk({args:e||rb.create([]).rest(rc.create()),returns:t||rc.create(),typeName:_.ZodFunction,...tB(r)})}}class rS extends tV{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}rS.create=(e,t)=>new rS({getter:e,typeName:_.ZodLazy,...tB(t)});class rT extends tV{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return tN(t,{received:t.data,code:tA.invalid_literal,expected:this._def.value}),tP}return{status:"valid",value:e.data}}get value(){return this._def.value}}function rA(e,t){return new rE({values:e,typeName:_.ZodEnum,...tB(t)})}rT.create=(e,t)=>new rT({value:e,typeName:_.ZodLiteral,...tB(t)});class rE extends tV{constructor(){super(...arguments),v.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return tN(t,{expected:h.joinValues(r),received:t.parsedType,code:tA.invalid_type}),tP}if(tU(this,v,"f")||tq(this,v,new Set(this._def.values),"f"),!tU(this,v,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return tN(t,{received:t.data,code:tA.invalid_enum_value,options:r}),tP}return tR(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return rE.create(e,{...this._def,...t})}exclude(e,t=this._def){return rE.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}v=new WeakMap,rE.create=rA;class rI extends tV{constructor(){super(...arguments),b.set(this,void 0)}_parse(e){let t=h.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==tS.string&&r.parsedType!==tS.number){let e=h.objectValues(t);return tN(r,{expected:h.joinValues(e),received:r.parsedType,code:tA.invalid_type}),tP}if(tU(this,b,"f")||tq(this,b,new Set(h.getValidEnumValues(this._def.values)),"f"),!tU(this,b,"f").has(e.data)){let e=h.objectValues(t);return tN(r,{received:r.data,code:tA.invalid_enum_value,options:e}),tP}return tR(e.data)}get enum(){return this._def.values}}b=new WeakMap,rI.create=(e,t)=>new rI({values:e,typeName:_.ZodNativeEnum,...tB(t)});class rj extends tV{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==tS.promise&&!1===t.common.async?(tN(t,{code:tA.invalid_type,expected:tS.promise,received:t.parsedType}),tP):tR((t.parsedType===tS.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}rj.create=(e,t)=>new rj({type:e,typeName:_.ZodPromise,...tB(t)});class rO extends tV{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{tN(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return tP;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?tP:"dirty"===n.status||"dirty"===t.value?tM(n.value):n});{if("aborted"===t.value)return tP;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?tP:"dirty"===n.status||"dirty"===t.value?tM(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?tP:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?tP:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>tD(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!tD(e))return e;let s=n.transform(e.value,a);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}h.assertNever(n)}}rO.create=(e,t,r)=>new rO({schema:e,typeName:_.ZodEffects,effect:t,...tB(r)}),rO.createWithPreprocess=(e,t,r)=>new rO({schema:t,effect:{type:"preprocess",transform:e},typeName:_.ZodEffects,...tB(r)});class rC extends tV{_parse(e){return this._getType(e)===tS.undefined?tR(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rC.create=(e,t)=>new rC({innerType:e,typeName:_.ZodOptional,...tB(t)});class rN extends tV{_parse(e){return this._getType(e)===tS.null?tR(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rN.create=(e,t)=>new rN({innerType:e,typeName:_.ZodNullable,...tB(t)});class r$ extends tV{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===tS.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}r$.create=(e,t)=>new r$({innerType:e,typeName:_.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...tB(t)});class rP extends tV{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return tL(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new tE(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new tE(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rP.create=(e,t)=>new rP({innerType:e,typeName:_.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...tB(t)});class rM extends tV{_parse(e){if(this._getType(e)!==tS.nan){let t=this._getOrReturnCtx(e);return tN(t,{code:tA.invalid_type,expected:tS.nan,received:t.parsedType}),tP}return{status:"valid",value:e.data}}}rM.create=e=>new rM({typeName:_.ZodNaN,...tB(e)});let rR=Symbol("zod_brand");class rZ extends tV{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class rF extends tV{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tP:"dirty"===e.status?(t.dirty(),tM(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tP:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new rF({in:e,out:t,typeName:_.ZodPipeline})}}class rD extends tV{_parse(e){let t=this._def.innerType._parse(e),r=e=>(tD(e)&&(e.value=Object.freeze(e.value)),e);return tL(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function rL(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function rU(e,t={},r){return e?ru.create().superRefine((n,a)=>{var s,i;let o=e(n);if(o instanceof Promise)return o.then(e=>{var s,i;if(!e){let e=rL(t,n),o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i;a.addIssue({code:"custom",...e,fatal:o})}});if(!o){let e=rL(t,n),o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i;a.addIssue({code:"custom",...e,fatal:o})}}):ru.create()}rD.create=(e,t)=>new rD({innerType:e,typeName:_.ZodReadonly,...tB(t)});let rq={object:rm.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(_||(_={}));let rz=rt.create,rJ=rr.create,rB=rM.create,rV=rn.create,rK=ra.create,rW=rs.create,rH=ri.create,rG=ro.create,rY=rl.create,rQ=ru.create,rX=rc.create,r0=rd.create,r1=rp.create,r9=rf.create,r4=rm.create,r2=rm.strictCreate,r6=rh.create,r8=ry.create,r3=rv.create,r5=rb.create,r7=r_.create,ne=rw.create,nt=rx.create,nr=rk.create,nn=rS.create,na=rT.create,ns=rE.create,ni=rI.create,no=rj.create,nl=rO.create,nu=rC.create,nc=rN.create,nd=rO.createWithPreprocess,np=rF.create;var nf=Object.freeze({__proto__:null,defaultErrorMap:tI,setErrorMap:function(e){tj=e},getErrorMap:tO,makeIssue:tC,EMPTY_PATH:[],addIssueToContext:tN,ParseStatus:t$,INVALID:tP,DIRTY:tM,OK:tR,isAborted:tZ,isDirty:tF,isValid:tD,isAsync:tL,get util(){return h},get objectUtil(){return g},ZodParsedType:tS,getParsedType:tT,ZodType:tV,datetimeRegex:re,ZodString:rt,ZodNumber:rr,ZodBigInt:rn,ZodBoolean:ra,ZodDate:rs,ZodSymbol:ri,ZodUndefined:ro,ZodNull:rl,ZodAny:ru,ZodUnknown:rc,ZodNever:rd,ZodVoid:rp,ZodArray:rf,ZodObject:rm,ZodUnion:rh,ZodDiscriminatedUnion:ry,ZodIntersection:rv,ZodTuple:rb,ZodRecord:r_,ZodMap:rw,ZodSet:rx,ZodFunction:rk,ZodLazy:rS,ZodLiteral:rT,ZodEnum:rE,ZodNativeEnum:rI,ZodPromise:rj,ZodEffects:rO,ZodTransformer:rO,ZodOptional:rC,ZodNullable:rN,ZodDefault:r$,ZodCatch:rP,ZodNaN:rM,BRAND:rR,ZodBranded:rZ,ZodPipeline:rF,ZodReadonly:rD,custom:rU,Schema:tV,ZodSchema:tV,late:rq,get ZodFirstPartyTypeKind(){return _},coerce:{string:e=>rt.create({...e,coerce:!0}),number:e=>rr.create({...e,coerce:!0}),boolean:e=>ra.create({...e,coerce:!0}),bigint:e=>rn.create({...e,coerce:!0}),date:e=>rs.create({...e,coerce:!0})},any:rQ,array:r9,bigint:rV,boolean:rK,date:rW,discriminatedUnion:r8,effect:nl,enum:ns,function:nr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>rU(t=>t instanceof e,t),intersection:r3,lazy:nn,literal:na,map:ne,nan:rB,nativeEnum:ni,never:r0,null:rY,nullable:nc,number:rJ,object:r4,oboolean:()=>rK().optional(),onumber:()=>rJ().optional(),optional:nu,ostring:()=>rz().optional(),pipeline:np,preprocess:nd,promise:no,record:r7,set:nt,strictObject:r2,string:rz,symbol:rH,transformer:nl,tuple:r5,undefined:rG,union:r6,unknown:rX,void:r1,NEVER:tP,ZodIssueCode:tA,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:tE});function nm(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.content)?void 0:t.map(({token:e,logprob:t,top_logprobs:r})=>({token:e,logprob:t,topLogprobs:r?r.map(({token:e,logprob:t})=>({token:e,logprob:t})):[]})))?r:void 0}function nh(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var ng=nf.object({error:nf.object({message:nf.string(),type:nf.string().nullish(),param:nf.any().nullish(),code:nf.union([nf.string(),nf.number()]).nullish()})}),ny=(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:a,requestBodyValues:s})=>{let i=await n.text(),o=tc(n);if(""===i.trim())return{responseHeaders:o,value:new eP({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(n)})};try{let l=function({text:e,schema:t}){try{let r=ti.parse(e);if(null==t)return r;return function({value:e,schema:t}){let r=tm({value:e,schema:t});if(!r.success)throw e7.wrap({value:e,cause:r.error});return r.value}({value:r,schema:t})}catch(t){if(eY.isJSONParseError(t)||e7.isTypeValidationError(t))throw t;throw new eY({text:e,cause:t})}}({text:i,schema:e});return{responseHeaders:o,value:new eP({message:t(l),url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,data:l,isRetryable:null==r?void 0:r(n,l)})}}catch(e){return{responseHeaders:o,value:new eP({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(n)})}}})({errorSchema:ng,errorToMessage:e=>e.error.message});function nv({id:e,model:t,created:r}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=r?new Date(1e3*r):void 0}}var nb=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){return!0===this.settings.structuredOutputs}get defaultObjectGenerationMode(){return this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:a,topK:s,frequencyPenalty:i,presencePenalty:o,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var p,f,m;let h=e.type,g=[];null!=s&&g.push({type:"unsupported-setting",setting:"topK"}),null!=u&&"json"===u.type&&null!=u.schema&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});let y=this.settings.useLegacyFunctionCalling;if(y&&!0===this.settings.parallelToolCalls)throw new tn({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(y&&!0===this.settings.structuredOutputs)throw new tn({functionality:"structuredOutputs with useLegacyFunctionCalling"});let v={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:a,frequency_penalty:i,presence_penalty:o,stop:l,seed:c,max_completion_tokens:null!=(f=null==(p=null==d?void 0:d.openai)?void 0:p.maxCompletionTokens)?f:void 0,response_format:(null==u?void 0:u.type)==="json"?{type:"json_object"}:void 0,messages:function({prompt:e,useLegacyFunctionCalling:t=!1}){let r=[];for(let{role:n,content:a}of e)switch(n){case"system":r.push({role:"system",content:a});break;case"user":if(1===a.length&&"text"===a[0].type){r.push({role:"user",content:a[0].text});break}r.push({role:"user",content:a.map(e=>{var t,r,n;switch(e.type){case"text":return{type:"text",text:e.text};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(t=e.mimeType)?t:"image/jpeg"};base64,${function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return tx(t)}(e.image)}`,detail:null==(n=null==(r=e.providerMetadata)?void 0:r.openai)?void 0:n.imageDetail}};case"file":throw new tn({functionality:"File content parts in user messages"})}})});break;case"assistant":{let e="",n=[];for(let t of a)switch(t.type){case"text":e+=t.text;break;case"tool-call":n.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.args)}});break;default:throw Error(`Unsupported part: ${t}`)}if(t){if(n.length>1)throw new tn({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:e,function_call:n.length>0?n[0].function:void 0})}else r.push({role:"assistant",content:e,tool_calls:n.length>0?n:void 0});break}case"tool":for(let e of a)t?r.push({role:"function",name:e.toolName,content:JSON.stringify(e.result)}):r.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result)});break;default:throw Error(`Unsupported role: ${n}`)}return r}({prompt:t,useLegacyFunctionCalling:y})};switch(nk(this.modelId)&&(v.temperature=void 0,v.top_p=void 0,v.frequency_penalty=void 0,v.presence_penalty=void 0),h){case"regular":return{args:{...v,...function({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r=!1}){var n;let a=(null==(n=e.tools)?void 0:n.length)?e.tools:void 0;if(null==a)return{tools:void 0,tool_choice:void 0};let s=e.toolChoice;if(t){let e=a.map(e=>({name:e.name,description:e.description,parameters:e.parameters}));if(null==s)return{functions:e,function_call:void 0};switch(s.type){case"auto":case"none":case void 0:return{functions:e,function_call:void 0};case"required":throw new tn({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:e,function_call:{name:s.toolName}}}}let i=a.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.parameters,strict:!0===r||void 0}}));if(null==s)return{tools:i,tool_choice:void 0};let o=s.type;switch(o){case"auto":case"none":case"required":return{tools:i,tool_choice:o};case"tool":return{tools:i,tool_choice:{type:"function",function:{name:s.toolName}}};default:throw Error(`Unsupported tool choice type: ${o}`)}}({mode:e,useLegacyFunctionCalling:y,structuredOutputs:this.settings.structuredOutputs})},warnings:g};case"object-json":return{args:{...v,response_format:!0===this.settings.structuredOutputs?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:null!=(m=e.name)?m:"response",description:e.description}}:{type:"json_object"}},warnings:g};case"object-tool":return{args:y?{...v,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...v,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:!0===this.settings.structuredOutputs||void 0}}]},warnings:g};default:throw Error(`Unsupported type: ${h}`)}}async doGenerate(e){var t,r,n,a,s,i,o,l,u,c;let{args:d,warnings:p}=this.getArgs(e),{responseHeaders:f,value:m}=await tv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:tu(this.config.headers(),e.headers),body:d,failedResponseHandler:ny,successfulResponseHandler:tw(nw),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:h,...g}=d,y=m.choices[0],v=(null==(r=null==(t=m.usage)?void 0:t.completion_tokens_details)?void 0:r.reasoning_tokens)!=null?{openai:{reasoningTokens:null==(a=null==(n=m.usage)?void 0:n.completion_tokens_details)?void 0:a.reasoning_tokens}}:void 0;return{text:null!=(s=y.message.content)?s:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&y.message.function_call?[{toolCallType:"function",toolCallId:td(),toolName:y.message.function_call.name,args:y.message.function_call.arguments}]:null==(i=y.message.tool_calls)?void 0:i.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:td(),toolName:e.function.name,args:e.function.arguments}}),finishReason:nh(y.finish_reason),usage:{promptTokens:null!=(l=null==(o=m.usage)?void 0:o.prompt_tokens)?l:NaN,completionTokens:null!=(c=null==(u=m.usage)?void 0:u.completion_tokens)?c:NaN},rawCall:{rawPrompt:h,rawSettings:g},rawResponse:{headers:f},response:nv(m),warnings:p,logprobs:nm(y.logprobs),providerMetadata:v}}async doStream(e){let t;if(nk(this.modelId)){let t=await this.doGenerate(e);return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(let r of t.toolCalls)e.enqueue({type:"tool-call",...r});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}let{args:r,warnings:n}=this.getArgs(e),{responseHeaders:a,value:s}=await tv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:tu(this.config.headers(),e.headers),body:{...r,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},failedResponseHandler:ny,successfulResponseHandler:t_(nx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=r,l=[],u="unknown",c={promptTokens:void 0,completionTokens:void 0},d=!0,{useLegacyFunctionCalling:p}=this.settings;return{stream:s.pipeThrough(new TransformStream({transform(e,r){var n,a,s,i,o,f,m,h,g,y,v,b,_,w;if(!e.success){u="error",r.enqueue({type:"error",error:e.error});return}let x=e.value;if("error"in x){u="error",r.enqueue({type:"error",error:x.error});return}d&&(d=!1,r.enqueue({type:"response-metadata",...nv(x)})),null!=x.usage&&(c={promptTokens:null!=(n=x.usage.prompt_tokens)?n:void 0,completionTokens:null!=(a=x.usage.completion_tokens)?a:void 0});let k=x.choices[0];if((null==k?void 0:k.finish_reason)!=null&&(u=nh(k.finish_reason)),(null==k?void 0:k.delta)==null)return;let S=k.delta;null!=S.content&&r.enqueue({type:"text-delta",textDelta:S.content});let T=nm(null==k?void 0:k.logprobs);(null==T?void 0:T.length)&&(void 0===t&&(t=[]),t.push(...T));let A=p&&null!=S.function_call?[{type:"function",id:td(),function:S.function_call,index:0}]:S.tool_calls;if(null!=A)for(let e of A){let t=e.index;if(null==l[t]){if("function"!==e.type)throw new eK({data:e,message:"Expected 'function' type."});if(null==e.id)throw new eK({data:e,message:"Expected 'id' to be a string."});if((null==(s=e.function)?void 0:s.name)==null)throw new eK({data:e,message:"Expected 'function.name' to be a string."});l[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(i=e.function.arguments)?i:""}};let n=l[t];(null==(o=n.function)?void 0:o.name)!=null&&(null==(f=n.function)?void 0:f.arguments)!=null&&(n.function.arguments.length>0&&r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.id,toolName:n.function.name,argsTextDelta:n.function.arguments}),tg(n.function.arguments)&&r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(m=n.id)?m:td(),toolName:n.function.name,args:n.function.arguments}));continue}let n=l[t];(null==(h=e.function)?void 0:h.arguments)!=null&&(n.function.arguments+=null!=(y=null==(g=e.function)?void 0:g.arguments)?y:""),r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.id,toolName:n.function.name,argsTextDelta:null!=(v=e.function.arguments)?v:""}),(null==(b=n.function)?void 0:b.name)!=null&&(null==(_=n.function)?void 0:_.arguments)!=null&&tg(n.function.arguments)&&r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(w=n.id)?w:td(),toolName:n.function.name,args:n.function.arguments})}},flush(e){var r,n;e.enqueue({type:"finish",finishReason:u,logprobs:t,usage:{promptTokens:null!=(r=c.promptTokens)?r:NaN,completionTokens:null!=(n=c.completionTokens)?n:NaN}})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:a},warnings:n}}},n_=nf.object({prompt_tokens:nf.number().nullish(),completion_tokens:nf.number().nullish(),completion_tokens_details:nf.object({reasoning_tokens:nf.number().nullish()}).nullish()}).nullish(),nw=nf.object({id:nf.string().nullish(),created:nf.number().nullish(),model:nf.string().nullish(),choices:nf.array(nf.object({message:nf.object({role:nf.literal("assistant").nullish(),content:nf.string().nullish(),function_call:nf.object({arguments:nf.string(),name:nf.string()}).nullish(),tool_calls:nf.array(nf.object({id:nf.string().nullish(),type:nf.literal("function"),function:nf.object({name:nf.string(),arguments:nf.string()})})).nullish()}),index:nf.number(),logprobs:nf.object({content:nf.array(nf.object({token:nf.string(),logprob:nf.number(),top_logprobs:nf.array(nf.object({token:nf.string(),logprob:nf.number()}))})).nullable()}).nullish(),finish_reason:nf.string().nullish()})),usage:n_}),nx=nf.union([nf.object({id:nf.string().nullish(),created:nf.number().nullish(),model:nf.string().nullish(),choices:nf.array(nf.object({delta:nf.object({role:nf.enum(["assistant"]).nullish(),content:nf.string().nullish(),function_call:nf.object({name:nf.string().optional(),arguments:nf.string().optional()}).nullish(),tool_calls:nf.array(nf.object({index:nf.number(),id:nf.string().nullish(),type:nf.literal("function").optional(),function:nf.object({name:nf.string().nullish(),arguments:nf.string().nullish()})})).nullish()}).nullish(),logprobs:nf.object({content:nf.array(nf.object({token:nf.string(),logprob:nf.number(),top_logprobs:nf.array(nf.object({token:nf.string(),logprob:nf.number()}))})).nullable()}).nullish(),finish_reason:nf.string().nullable().optional(),index:nf.number()})),usage:n_}),ng]);function nk(e){return e.startsWith("o1-")}function nS(e){return null==e?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([e,t])=>({token:e,logprob:t})):[]}))}var nT=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:a,topP:s,topK:i,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d}){var p;let f=e.type,m=[];null!=i&&m.push({type:"unsupported-setting",setting:"topK"}),null!=c&&"text"!==c.type&&m.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:h,stopSequences:g}=function({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if("prompt"===t&&1===e.length&&"user"===e[0].role&&1===e[0].content.length&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let a="";for(let{role:t,content:s}of("system"===e[0].role&&(a+=`${e[0].content}

`,e=e.slice(1)),e))switch(t){case"system":throw new ez({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=s.map(e=>{switch(e.type){case"text":return e.text;case"image":throw new tn({functionality:"images"})}}).join("");a+=`${r}:
${e}

`;break}case"assistant":{let e=s.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new tn({functionality:"tool-call messages"})}}).join("");a+=`${n}:
${e}

`;break}case"tool":throw new tn({functionality:"tool messages"});default:throw Error(`Unsupported role: ${t}`)}return{prompt:a+=`${n}:
`,stopSequences:[`
${r}:`]}}({prompt:r,inputFormat:t}),y=[...null!=g?g:[],...null!=u?u:[]],v={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:a,top_p:s,frequency_penalty:o,presence_penalty:l,seed:d,prompt:h,stop:y.length>0?y:void 0};switch(f){case"regular":if(null==(p=e.tools)?void 0:p.length)throw new tn({functionality:"tools"});if(e.toolChoice)throw new tn({functionality:"toolChoice"});return{args:v,warnings:m};case"object-json":throw new tn({functionality:"object-json mode"});case"object-tool":throw new tn({functionality:"object-tool mode"});default:throw Error(`Unsupported type: ${f}`)}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:a}=await tv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:tu(this.config.headers(),e.headers),body:t,failedResponseHandler:ny,successfulResponseHandler:tw(nA),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...i}=t,o=a.choices[0];return{text:o.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:nh(o.finish_reason),logprobs:nS(o.logprobs),rawCall:{rawPrompt:s,rawSettings:i},rawResponse:{headers:n},response:nv(a),warnings:r}}async doStream(e){let t;let{args:r,warnings:n}=this.getArgs(e),{responseHeaders:a,value:s}=await tv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:tu(this.config.headers(),e.headers),body:{...r,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},failedResponseHandler:ny,successfulResponseHandler:t_(nE),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:i,...o}=r,l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c=!0;return{stream:s.pipeThrough(new TransformStream({transform(e,r){if(!e.success){l="error",r.enqueue({type:"error",error:e.error});return}let n=e.value;if("error"in n){l="error",r.enqueue({type:"error",error:n.error});return}c&&(c=!1,r.enqueue({type:"response-metadata",...nv(n)})),null!=n.usage&&(u={promptTokens:n.usage.prompt_tokens,completionTokens:n.usage.completion_tokens});let a=n.choices[0];(null==a?void 0:a.finish_reason)!=null&&(l=nh(a.finish_reason)),(null==a?void 0:a.text)!=null&&r.enqueue({type:"text-delta",textDelta:a.text});let s=nS(null==a?void 0:a.logprobs);(null==s?void 0:s.length)&&(void 0===t&&(t=[]),t.push(...s))},flush(e){e.enqueue({type:"finish",finishReason:l,logprobs:t,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:a},warnings:n}}},nA=nf.object({id:nf.string().nullish(),created:nf.number().nullish(),model:nf.string().nullish(),choices:nf.array(nf.object({text:nf.string(),finish_reason:nf.string(),logprobs:nf.object({tokens:nf.array(nf.string()),token_logprobs:nf.array(nf.number()),top_logprobs:nf.array(nf.record(nf.string(),nf.number())).nullable()}).nullish()})),usage:nf.object({prompt_tokens:nf.number(),completion_tokens:nf.number()})}),nE=nf.union([nf.object({id:nf.string().nullish(),created:nf.number().nullish(),model:nf.string().nullish(),choices:nf.array(nf.object({text:nf.string(),finish_reason:nf.string().nullish(),index:nf.number(),logprobs:nf.object({tokens:nf.array(nf.string()),token_logprobs:nf.array(nf.number()),top_logprobs:nf.array(nf.record(nf.string(),nf.number())).nullable()}).nullish()})),usage:nf.object({prompt_tokens:nf.number(),completion_tokens:nf.number()}).nullish()}),ng]),nI=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.settings.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.settings.supportsParallelCalls)||e}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new e6({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:a}=await tv({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:tu(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:ny,successfulResponseHandler:tw(nj),abortSignal:r,fetch:this.config.fetch});return{embeddings:a.data.map(e=>e.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},nj=nf.object({data:nf.array(nf.object({embedding:nf.array(nf.number())})),usage:nf.object({prompt_tokens:nf.number()}).nullish()});function nO(e={}){var t,r,n,a;let s=null!=(r=null==(a=null!=(t=e.baseURL)?t:e.baseUrl)?void 0:a.replace(/\/$/,""))?r:"https://api.openai.com/v1",i=null!=(n=e.compatibility)?n:"compatible",o=()=>({Authorization:`Bearer ${function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new e1({message:`${n} API key must be a string.`});if("undefined"==typeof process)throw new e1({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new e1({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new e1({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(t,r={})=>new nb(t,r,{provider:"openai.chat",url:({path:e})=>`${s}${e}`,headers:o,compatibility:i,fetch:e.fetch}),u=(t,r={})=>new nT(t,r,{provider:"openai.completion",url:({path:e})=>`${s}${e}`,headers:o,compatibility:i,fetch:e.fetch}),c=(t,r={})=>new nI(t,r,{provider:"openai.embedding",url:({path:e})=>`${s}${e}`,headers:o,fetch:e.fetch}),d=(e,t)=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return"gpt-3.5-turbo-instruct"===e?u(e,t):l(e,t)},p=function(e,t){return d(e,t)};return p.languageModel=d,p.chat=l,p.completion=u,p.embedding=c,p.textEmbedding=c,p.textEmbeddingModel=c,p}var nC=nO({compatibility:"strict"}),nN="vercel.ai.error",n$=Symbol.for(nN),nP=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[w]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,nN)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};w=n$;var nM=nP,nR="AI_APICallError",nZ=`vercel.ai.error.${nR}`,nF=Symbol.for(nZ),nD=class extends nM{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:s,cause:i,isRetryable:o=null!=n&&(408===n||409===n||429===n||n>=500),data:l}){super({name:nR,message:e,cause:i}),this[x]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=s,this.isRetryable=o,this.data=l}static isInstance(e){return nM.hasMarker(e,nZ)}static isAPICallError(e){return e instanceof Error&&e.name===nR&&"string"==typeof e.url&&"object"==typeof e.requestBodyValues&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.responseHeaders||"object"==typeof e.responseHeaders)&&(null==e.responseBody||"string"==typeof e.responseBody)&&(null==e.cause||"object"==typeof e.cause)&&"boolean"==typeof e.isRetryable&&(null==e.data||"object"==typeof e.data)}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};function nL(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}x=nF,Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var nU="AI_InvalidArgumentError",nq=`vercel.ai.error.${nU}`,nz=Symbol.for(nq),nJ=class extends nM{constructor({message:e,cause:t,argument:r}){super({name:nU,message:e,cause:t}),this[k]=!0,this.argument=r}static isInstance(e){return nM.hasMarker(e,nq)}};k=nz;var nB="AI_InvalidPromptError",nV=`vercel.ai.error.${nB}`,nK=Symbol.for(nV),nW=class extends nM{constructor({prompt:e,message:t,cause:r}){super({name:nB,message:`Invalid prompt: ${t}`,cause:r}),this[S]=!0,this.prompt=e}static isInstance(e){return nM.hasMarker(e,nV)}static isInvalidPromptError(e){return e instanceof Error&&e.name===nB&&null!=prompt}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};S=nK,Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var nH="AI_JSONParseError",nG=`vercel.ai.error.${nH}`,nY=Symbol.for(nG),nQ=class extends nM{constructor({text:e,cause:t}){super({name:nH,message:`JSON parsing failed: Text: ${e}.
Error message: ${nL(t)}`,cause:t}),this[T]=!0,this.text=e}static isInstance(e){return nM.hasMarker(e,nG)}static isJSONParseError(e){return e instanceof Error&&e.name===nH&&"text"in e&&"string"==typeof e.text}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};T=nY,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var nX="AI_NoSuchModelError",n0=`vercel.ai.error.${nX}`,n1=Symbol.for(n0),n9=class extends nM{constructor({errorName:e=nX,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[A]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return nM.hasMarker(e,n0)}static isNoSuchModelError(e){return e instanceof Error&&e.name===nX&&"string"==typeof e.modelId&&"string"==typeof e.modelType}toJSON(){return{name:this.name,message:this.message,stack:this.stack,modelId:this.modelId,modelType:this.modelType}}};A=n1,Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var n4="AI_TypeValidationError",n2=`vercel.ai.error.${n4}`,n6=Symbol.for(n2),n8=class e extends nM{constructor({value:e,cause:t}){super({name:n4,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${nL(t)}`,cause:t}),this[E]=!0,this.value=e}static isInstance(e){return nM.hasMarker(e,n2)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===n4}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};E=n6;var n3="AI_UnsupportedFunctionalityError",n5=`vercel.ai.error.${n3}`,n7=Symbol.for(n5),ae=class extends nM{constructor({functionality:e}){super({name:n3,message:`'${e}' functionality not supported.`}),this[I]=!0,this.functionality=e}static isInstance(e){return nM.hasMarker(e,n5)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===n3&&"string"==typeof e.functionality}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};function at(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(at):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&at(t)))}I=n7;let ar=(e,t=21)=>(r=t)=>{let n="",a=0|r;for(;a--;)n+=e[Math.random()*e.length|0];return n};var an=({prefix:e,size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let a=ar(r,t);if(null==e)return a;if(r.includes(n))throw new nJ({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return t=>`${e}${n}${a(t)}`};an();var aa=Symbol.for("vercel.ai.validator");function as({value:e,schema:t}){let r="object"==typeof t&&null!==t&&aa in t&&!0===t[aa]&&"validate"in t?t:{[aa]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:n8.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:n8.wrap({value:e,cause:t})}}}var{btoa:ai,atob:ao}=globalThis;function al(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return ai(t)}var au=r(75658),ac=r(73048),ad="vercel.ai.error",ap=Symbol.for(ad),af=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[j]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,ad)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};j=ap;var am=af,ah=(Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError"),"AI_InvalidArgumentError"),ag=`vercel.ai.error.${ah}`,ay=Symbol.for(ag),av=class extends am{constructor({message:e,cause:t,argument:r}){super({name:ah,message:e,cause:t}),this[O]=!0,this.argument=r}static isInstance(e){return am.hasMarker(e,ag)}};function ab(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(ab):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&ab(t)))}O=ay,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),Symbol.for("vercel.ai.error.AI_JSONParseError"),Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),Symbol.for("vercel.ai.error.AI_TypeValidationError"),Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");(({prefix:e,size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let a=ar(r,t);if(null!=e){if(r.includes(n))throw new av({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return t=>`${e}${n}${a(t)}`}})();var a_=Symbol.for("vercel.ai.validator"),{btoa:aw,atob:ax}=globalThis;let ak=Symbol("Let zodToJsonSchema decide on which parser to use"),aS={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},aT=e=>"string"==typeof e?{...aS,name:e}:{...aS,...e},aA=e=>{let t=aT(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function aE(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function aI(e,t,r,n,a){e[t]=r,aE(e,t,n,a)}function aj(e,t){return aK(e.type._def,t)}let aO=(e,t)=>aK(e.innerType._def,t),aC=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let n of e.checks)switch(n.kind){case"min":aI(r,"minimum",n.value,n.message,t);break;case"max":aI(r,"maximum",n.value,n.message,t)}return r},aN=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,a$={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===a&&(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function aP(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":aI(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":aI(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":aZ(r,"email",n.message,t);break;case"format:idn-email":aZ(r,"idn-email",n.message,t);break;case"pattern:zod":aF(r,a$.email,n.message,t)}break;case"url":aZ(r,"uri",n.message,t);break;case"uuid":aZ(r,"uuid",n.message,t);break;case"regex":aF(r,n.regex,n.message,t);break;case"cuid":aF(r,a$.cuid,n.message,t);break;case"cuid2":aF(r,a$.cuid2,n.message,t);break;case"startsWith":aF(r,RegExp(`^${aM(n.value,t)}`),n.message,t);break;case"endsWith":aF(r,RegExp(`${aM(n.value,t)}$`),n.message,t);break;case"datetime":aZ(r,"date-time",n.message,t);break;case"date":aZ(r,"date",n.message,t);break;case"time":aZ(r,"time",n.message,t);break;case"duration":aZ(r,"duration",n.message,t);break;case"length":aI(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t),aI(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":aF(r,RegExp(aM(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&aZ(r,"ipv4",n.message,t),"v4"!==n.version&&aZ(r,"ipv6",n.message,t);break;case"base64url":aF(r,a$.base64url,n.message,t);break;case"jwt":aF(r,a$.jwt,n.message,t);break;case"cidr":"v6"!==n.version&&aF(r,a$.ipv4Cidr,n.message,t),"v4"!==n.version&&aF(r,a$.ipv6Cidr,n.message,t);break;case"emoji":aF(r,a$.emoji(),n.message,t);break;case"ulid":aF(r,a$.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":aZ(r,"binary",n.message,t);break;case"contentEncoding:base64":aI(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":aF(r,a$.base64,n.message,t)}break;case"nanoid":aF(r,a$.nanoid,n.message,t)}return r}function aM(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)aR.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let aR=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function aZ(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):aI(e,"format",t,r,n)}function aF(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:aD(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):aI(e,"pattern",aD(t,n),r,n)}function aD(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,a="",s=!1,i=!1,o=!1;for(let e=0;e<n.length;e++){if(s){a+=n[e],s=!1;continue}if(r.i){if(i){if(n[e].match(/[a-z]/)){o?(a+=n[e]+`${n[e-2]}-${n[e]}`.toUpperCase(),o=!1):"-"===n[e+1]&&n[e+2]?.match(/[a-z]/)?(a+=n[e],o=!0):a+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){a+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(r.m){if("^"===n[e]){a+=`(^|(?<=[\r
]))`;continue}if("$"===n[e]){a+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===n[e]){a+=i?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}a+=n[e],"\\"===n[e]?s=!0:i&&"]"===n[e]?i=!1:i||"["!==n[e]||(i=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function aL(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===_.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:aK(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:aK(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===_.ZodString&&e.keyType._def.checks?.length){let{type:n,...a}=aP(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===_.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===_.ZodBranded&&e.keyType._def.type._def.typeName===_.ZodString&&e.keyType._def.type._def.checks?.length){let{type:n,...a}=aj(e.keyType._def,t);return{...r,propertyNames:a}}return r}let aU={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},aq=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>aK(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0},az=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return aK(e.innerType._def,t);let r=aK(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},aJ=(e,t)=>{if("input"===t.pipeStrategy)return aK(e.in._def,t);if("output"===t.pipeStrategy)return aK(e.out._def,t);let r=aK(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=aK(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(e=>void 0!==e)}},aB=(e,t)=>aK(e.innerType._def,t),aV=(e,t,r)=>{switch(t){case _.ZodString:return aP(e,r);case _.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",aE(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?aI(r,"minimum",n.value,n.message,t):aI(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),aI(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?aI(r,"maximum",n.value,n.message,t):aI(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),aI(r,"maximum",n.value,n.message,t));break;case"multipleOf":aI(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case _.ZodObject:return function(e,t){let r="openAi"===t.target,n={type:"object",properties:{}},a=[],s=e.shape();for(let e in s){let i=s[e];if(void 0===i||void 0===i._def)continue;let o=function(e){try{return e.isOptional()}catch{return!0}}(i);o&&r&&(i instanceof rC&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),o=!1);let l=aK(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(n.properties[e]=l,o||a.push(e))}a.length&&(n.required=a);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return aK(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(n.additionalProperties=i),n}(e,r);case _.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?aI(r,"minimum",n.value,n.message,t):aI(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),aI(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?aI(r,"maximum",n.value,n.message,t):aI(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),aI(r,"maximum",n.value,n.message,t));break;case"multipleOf":aI(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case _.ZodBoolean:return{type:"boolean"};case _.ZodDate:return function e(t,r,n){let a=n??r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,a)=>e(t,r,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return aC(t,r)}}(e,r);case _.ZodUndefined:return{not:{}};case _.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case _.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==_.ZodAny&&(r.items=aK(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&aI(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&aI(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(aI(r,"minItems",e.exactLength.value,e.exactLength.message,t),aI(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case _.ZodUnion:case _.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return aq(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in aU&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=aU[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return aq(e,t)}(e,r);case _.ZodIntersection:return function(e,t){let r=[aK(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),aK(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,a=[];return r.forEach(e=>{if(aN(e))a.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else n=void 0;a.push(t)}}),a.length?{allOf:a,...n}:void 0}(e,r);case _.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>aK(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:aK(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>aK(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case _.ZodRecord:return aL(e,r);case _.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case _.ZodEnum:return{type:"string",enum:Array.from(e.values)};case _.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case _.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:aU[e.innerType._def.typeName],nullable:!0}:{type:[aU[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=aK(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=aK(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case _.ZodOptional:return az(e,r);case _.ZodMap:return function(e,t){return"record"===t.mapStrategy?aL(e,t):{type:"array",maxItems:125,items:{type:"array",items:[aK(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},aK(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,r);case _.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:aK(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&aI(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&aI(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case _.ZodLazy:return()=>e.getter()._def;case _.ZodPromise:return aK(e.type._def,r);case _.ZodNaN:case _.ZodNever:return{not:{}};case _.ZodEffects:return function(e,t){return"input"===t.effectStrategy?aK(e.schema._def,t):{}}(e,r);case _.ZodAny:case _.ZodUnknown:return{};case _.ZodDefault:return function(e,t){return{...aK(e.innerType._def,t),default:e.defaultValue()}}(e,r);case _.ZodBranded:return aj(e,r);case _.ZodReadonly:return aB(e,r);case _.ZodCatch:return aO(e,r);case _.ZodPipeline:return aJ(e,r);case _.ZodFunction:case _.ZodVoid:case _.ZodSymbol:default:return}};function aK(e,t,r=!1){let n=t.seen.get(e);if(t.override){let a=t.override?.(e,t,n,r);if(a!==ak)return a}if(n&&!r){let e=aW(n,t);if(void 0!==e)return e}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let s=aV(e,e.typeName,t),i="function"==typeof s?aK(s(),t):s;if(i&&aG(e,t,i),t.postProcess){let r=t.postProcess(i,e,t);return a.jsonSchema=i,r}return a.jsonSchema=i,i}let aW=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:aH(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},aH=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},aG=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),aY=(e,t)=>{let r=aA(t),n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,n])=>({...e,[t]:aK(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}}),{}):void 0,a="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,s=aK(e._def,void 0===a?r:{...r,currentPath:[...r.basePath,r.definitionPath,a]},!1)??{},i="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==i&&(s.title=i);let o=void 0===a?n?{...s,[r.definitionPath]:n}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,a].join("/"),[r.definitionPath]:{...n,[a]:s}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var aQ={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},aX={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},a0={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},a1={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},a9={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},a4={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},a2={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},a6={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>null==e||"object"!=typeof e||!("id"in e)||"string"!=typeof e.id||!("type"in e)||"string"!=typeof e.type||!("function"in e)||null==e.function||"object"!=typeof e.function||!("arguments"in e.function)||"string"!=typeof e.function.name||"string"!=typeof e.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},a8={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},a3={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},a5={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},a7={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},se={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},st={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},sr={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},sn=[aQ,aX,a0,a1,a9,a4,a2,a6,a8,a3,a5,a7,se,st,sr],sa={[aQ.code]:aQ,[aX.code]:aX,[a0.code]:a0,[a1.code]:a1,[a9.code]:a9,[a4.code]:a4,[a2.code]:a2,[a6.code]:a6,[a8.code]:a8,[a3.code]:a3,[a5.code]:a5,[a7.code]:a7,[se.code]:se,[st.code]:st,[sr.code]:sr};aQ.name,aQ.code,aX.name,aX.code,a0.name,a0.code,a1.name,a1.code,a9.name,a9.code,a4.name,a4.code,a2.name,a2.code,a6.name,a6.code,a8.name,a8.code,a3.name,a3.code,a5.name,a5.code,a7.name,a7.code,se.name,se.code,st.name,st.code,sr.name,sr.code;var ss=sn.map(e=>e.code),si=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!ss.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let n=JSON.parse(e.slice(t+1));return sa[r].parse(n)},so=Symbol.for("vercel.ai.schema");function sl(e){return"object"==typeof e&&null!==e&&so in e&&!0===e[so]&&"jsonSchema"in e&&"validate"in e?e:function(e,{validate:t}={}){return{[so]:!0,_type:void 0,[a_]:!0,jsonSchema:e,validate:t}}(aY(e),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var su=Object.defineProperty,sc=(e,t)=>{for(var r in t)su(e,r,{get:t[r],enumerable:!0})};async function sd(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var sp="AI_RetryError",sf=`vercel.ai.error.${sp}`,sm=Symbol.for(sf),sh=class extends nM{constructor({message:e,reason:t,errors:r}){super({name:sp,message:e}),this[C]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return nM.hasMarker(e,sf)}static isRetryError(e){return e instanceof Error&&e.name===sp&&"string"==typeof e.reason&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};C=sm;var sg=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>sy(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function sy(e,{maxRetries:t,delayInMs:r,backoffFactor:n},a=[]){try{return await e()}catch(u){var s;if((s=u)instanceof Error&&("AbortError"===s.name||"TimeoutError"===s.name)||0===t)throw u;let i=null==u?"unknown error":"string"==typeof u?u:u instanceof Error?u.message:JSON.stringify(u),o=[...a,u],l=o.length;if(l>t)throw new sh({message:`Failed after ${l} attempts. Last error: ${i}`,reason:"maxRetriesExceeded",errors:o});if(u instanceof Error&&nD.isAPICallError(u)&&!0===u.isRetryable&&l<=t)return await sd(r),sy(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},o);if(1===l)throw u;throw new sh({message:`Failed after ${l} attempts with non-retryable error: '${i}'`,reason:"errorNotRetryable",errors:o})}}function sv({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}var sb={startSpan:()=>s_,startActiveSpan:(e,t,r,n)=>"function"==typeof t?t(s_):"function"==typeof r?r(s_):"function"==typeof n?n(s_):void 0},s_={spanContext:()=>sw,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},sw={traceId:"",spanId:"",traceFlags:0};function sx({name:e,tracer:t,attributes:r,fn:n,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await n(e);return a&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:ac.Q.ERROR,message:t.message})):e.setStatus({code:ac.Q.ERROR})}finally{e.end()}throw t}})}function sk({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,n])=>{if(void 0===n)return t;if("object"==typeof n&&"input"in n&&"function"==typeof n.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=n.input();return void 0===a?t:{...t,[r]:a}}if("object"==typeof n&&"output"in n&&"function"==typeof n.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=n.output();return void 0===a?t:{...t,[r]:a}}return{...t,[r]:n}},{})}var sS="AI_DownloadError",sT=`vercel.ai.error.${sS}`,sA=Symbol.for(sT),sE=class extends nM{constructor({url:e,statusCode:t,statusText:r,cause:n,message:a=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:sS,message:a,cause:n}),this[N]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return nM.hasMarker(e,sT)}static isDownloadError(e){return e instanceof Error&&e.name===sS&&"string"==typeof e.url&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.statusText||"string"==typeof e.statusText)}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};async function sI({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let e=await t(n);if(!e.ok)throw new sE({url:n,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(r=e.headers.get("content-type"))?r:void 0}}catch(e){if(sE.isInstance(e))throw e;throw new sE({url:n,cause:e})}}N=sA;var sj=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],sO="AI_InvalidDataContentError",sC=`vercel.ai.error.${sO}`,sN=Symbol.for(sC),s$=class extends nM{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:sO,message:r,cause:t}),this[$]=!0,this.content=e}static isInstance(e){return nM.hasMarker(e,sC)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===sO&&null!=e.content}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};$=sN;var sP=nf.union([nf.string(),nf.instanceof(Uint8Array),nf.instanceof(ArrayBuffer),nf.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function sM(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return function(e){let t=ao(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}(e)}catch(t){throw new s$({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new s$({content:e})}var sR="AI_InvalidMessageRoleError",sZ=`vercel.ai.error.${sR}`,sF=Symbol.for(sZ),sD=class extends nM{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:sR,message:t}),this[P]=!0,this.role=e}static isInstance(e){return nM.hasMarker(e,sZ)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===sR&&"string"==typeof e.role}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};async function sL({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=sI}){let a=await sU(e.messages,n,t,r);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"user",content:e.content.map(e=>(function(e,t){let r,n,a;if("text"===e.type)return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let s=e.mimeType,i=e.type;switch(i){case"image":r=e.image;break;case"file":r=e.data;break;default:throw Error(`Unsupported part type: ${i}`)}try{n="string"==typeof r?new URL(r):r}catch(e){n=r}if(n instanceof URL){if("data:"===n.protocol){let{mimeType:e,base64Content:t}=function(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}(n.toString());if(null==e||null==t)throw Error(`Invalid data URL format in part ${i}`);s=e,a=sM(t)}else{let e=t[n.toString()];e?(a=e.data,null!=s||(s=e.mimeType)):a=n}}else a=sM(n);switch(i){case"image":return null==s&&a instanceof Uint8Array&&(s=function(e){for(let{bytes:t,mimeType:r}of sj)if(e.length>=t.length&&t.every((t,r)=>e[r]===t))return r}(a)),{type:"image",image:a,mimeType:s,providerMetadata:e.experimental_providerMetadata};case"file":var o;if(null==s)throw Error("Mime type is missing for file part");return{type:"file",data:a instanceof Uint8Array?"string"==typeof(o=a)?o:o instanceof ArrayBuffer?al(new Uint8Array(o)):al(o):a,mimeType:s,providerMetadata:e.experimental_providerMetadata}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:e.experimental_providerMetadata};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{let{experimental_providerMetadata:t,...r}=e;return{...r,providerMetadata:t}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,content:e.experimental_content,isError:e.isError,providerMetadata:e.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:throw new sD({role:r})}})(e,a))]}async function sU(e,t,r,n){let a=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).filter(e=>!("image"===e.type&&!0===r)).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL).filter(e=>!n(e));return Object.fromEntries((await Promise.all(a.map(async e=>({url:e,data:await t({url:e})})))).map(({url:e,data:t})=>[e.toString(),t]))}P=sF;var sq="AI_InvalidArgumentError",sz=`vercel.ai.error.${sq}`,sJ=Symbol.for(sz),sB=class extends nM{constructor({parameter:e,value:t,message:r}){super({name:sq,message:`Invalid argument for parameter ${e}: ${r}`}),this[M]=!0,this.parameter=e,this.value=t}static isInstance(e){return nM.hasMarker(e,sz)}static isInvalidArgumentError(e){return e instanceof Error&&e.name===sq&&"string"==typeof e.parameter&&"string"==typeof e.value}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};M=sJ;var sV=nf.lazy(()=>nf.union([nf.null(),nf.string(),nf.number(),nf.boolean(),nf.record(nf.string(),sV),nf.array(sV)])),sK=nf.record(nf.string(),nf.record(nf.string(),sV)),sW=nf.array(nf.union([nf.object({type:nf.literal("text"),text:nf.string()}),nf.object({type:nf.literal("image"),data:nf.string(),mimeType:nf.string().optional()})])),sH=nf.object({type:nf.literal("text"),text:nf.string(),experimental_providerMetadata:sK.optional()}),sG=nf.object({type:nf.literal("image"),image:nf.union([sP,nf.instanceof(URL)]),mimeType:nf.string().optional(),experimental_providerMetadata:sK.optional()}),sY=nf.object({type:nf.literal("file"),data:nf.union([sP,nf.instanceof(URL)]),mimeType:nf.string(),experimental_providerMetadata:sK.optional()}),sQ=nf.object({type:nf.literal("tool-call"),toolCallId:nf.string(),toolName:nf.string(),args:nf.unknown()}),sX=nf.object({type:nf.literal("tool-result"),toolCallId:nf.string(),toolName:nf.string(),result:nf.unknown(),content:sW.optional(),isError:nf.boolean().optional(),experimental_providerMetadata:sK.optional()}),s0=nf.object({role:nf.literal("system"),content:nf.string(),experimental_providerMetadata:sK.optional()}),s1=nf.object({role:nf.literal("user"),content:nf.union([nf.string(),nf.array(nf.union([sH,sG,sY]))]),experimental_providerMetadata:sK.optional()}),s9=nf.object({role:nf.literal("assistant"),content:nf.union([nf.string(),nf.array(nf.union([sH,sQ]))]),experimental_providerMetadata:sK.optional()}),s4=nf.object({role:nf.literal("tool"),content:nf.array(sX),experimental_providerMetadata:sK.optional()}),s2=nf.union([s0,s1,s9,s4]);function s6(e){return"object"==typeof e&&null!==e&&("function"===e.role||"data"===e.role||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":"object"==typeof e&&null!==e&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e)?"has-core-specific-parts":"object"==typeof e&&null!==e&&"role"in e&&"content"in e&&"string"==typeof e.content&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var s8="AI_MessageConversionError",s3=`vercel.ai.error.${s8}`,s5=Symbol.for(s3),s7=class extends nM{constructor({originalMessage:e,message:t}){super({name:s8,message:t}),this[R]=!0,this.originalMessage=e}static isInstance(e){return nM.hasMarker(e,s3)}};R=s5;function ie(e,{contentType:t,dataStreamVersion:r}){var n;let a=new Headers(null!=(n=null==e?void 0:e.headers)?n:{});return a.has("Content-Type")||a.set("Content-Type",t),void 0!==r&&a.set("X-Vercel-AI-Data-Stream",r),a}var it="AI_NoObjectGeneratedError",ir=`vercel.ai.error.${it}`,ia=Symbol.for(ir),is=class extends nM{constructor({message:e="No object generated."}={}){super({name:it,message:e}),this[Z]=!0}static isInstance(e){return nM.hasMarker(e,ir)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===it}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};Z=ia;an({prefix:"aiobj",size:24});an({prefix:"aiobj",size:24});var ii="AI_InvalidToolArgumentsError",io=`vercel.ai.error.${ii}`,il=Symbol.for(io),iu=class extends nM{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${nL(r)}`}){super({name:ii,message:n,cause:r}),this[F]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return nM.hasMarker(e,io)}static isInvalidToolArgumentsError(e){return e instanceof Error&&e.name===ii&&"string"==typeof e.toolName&&"string"==typeof e.toolArgs}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};F=il;var ic="AI_NoSuchToolError",id=`vercel.ai.error.${ic}`,ip=Symbol.for(id),im=class extends nM{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:ic,message:r}),this[D]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return nM.hasMarker(e,id)}static isNoSuchToolError(e){return e instanceof Error&&e.name===ic&&"toolName"in e&&void 0!=e.toolName&&"string"==typeof e.name}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};D=ip;var ih=/^([\s\S]*?)(\s+)(\S*)$/,ig=an({prefix:"aitxt",size:24});async function iy({model:e,tools:t,toolChoice:r,system:n,prompt:a,messages:s,maxRetries:i,abortSignal:o,headers:l,maxAutomaticRoundtrips:u=0,maxToolRoundtrips:c=u,maxSteps:d=null!=c?c+1:1,experimental_continuationSteps:p,experimental_continueSteps:f=null!=p&&p,experimental_telemetry:m,experimental_providerMetadata:h,experimental_activeTools:g,_internal:{generateId:y=ig,currentDate:v=()=>new Date}={},onStepFinish:b,..._}){if(d<1)throw new sB({parameter:"maxSteps",value:d,message:"maxSteps must be at least 1"});let w=function({model:e,settings:t,telemetry:r,headers:n}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=n?n:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}({model:e,telemetry:m,headers:l,settings:{..._,maxRetries:i}}),x=function({prompt:e,tools:t}){if(null==e.prompt&&null==e.messages)throw new nW({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new nW({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new nW({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new nW({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(null!=e.messages){let r=function(e){if(!Array.isArray(e))return"other";if(0===e.length)return"messages";let t=e.map(s6);return t.some(e=>"has-ui-specific-parts"===e)?"ui-messages":t.every(e=>"has-core-specific-parts"===e||"message"===e)?"messages":"other"}(e.messages);if("other"===r)throw new nW({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n="ui-messages"===r?function(e,t){var r;let n=null!=(r=null==t?void 0:t.tools)?r:{},a=[];for(let t of e){let{role:e,content:r,toolInvocations:s,experimental_attachments:i}=t;switch(e){case"system":a.push({role:"system",content:r});break;case"user":a.push({role:"user",content:i?[{type:"text",text:r},...function(e){var t,r,n;let a=[];for(let s of e){let e;try{e=new URL(s.url)}catch(e){throw Error(`Invalid URL: ${s.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=s.contentType)?void 0:t.startsWith("image/"))a.push({type:"image",image:e});else{if(!s.contentType)throw Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:e,mimeType:s.contentType})}break;case"data:":{let e,t,i;try{[e,t]=s.url.split(","),i=e.split(";")[0].split(":")[1]}catch(e){throw Error(`Error processing data URL: ${s.url}`)}if(null==i||null==t)throw Error(`Invalid data URL format: ${s.url}`);if(null==(r=s.contentType)?void 0:r.startsWith("image/"))a.push({type:"image",image:sM(t)});else if(null==(n=s.contentType)?void 0:n.startsWith("text/"))a.push({type:"text",text:function(e){try{return new TextDecoder().decode(e)}catch(e){throw Error("Error decoding Uint8Array to text")}}(sM(t))});else{if(!s.contentType)throw Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:t,mimeType:s.contentType})}break}default:throw Error(`Unsupported URL protocol: ${e.protocol}`)}}return a}(i)]:r});break;case"assistant":if(null==s){a.push({role:"assistant",content:r});break}a.push({role:"assistant",content:[{type:"text",text:r},...s.map(({toolCallId:e,toolName:t,args:r})=>({type:"tool-call",toolCallId:e,toolName:t,args:r}))]}),a.push({role:"tool",content:s.map(e=>{if(!("result"in e))throw new s7({originalMessage:t,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:r,toolName:a,result:s}=e,i=n[a];return(null==i?void 0:i.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:r,toolName:a,result:i.experimental_toToolResultContent(s),experimental_content:i.experimental_toToolResultContent(s)}:{type:"tool-result",toolCallId:r,toolName:a,result:s}})});break;case"function":case"data":case"tool":break;default:throw new s7({originalMessage:t,message:`Unsupported role: ${e}`})}}return a}(e.messages,{tools:t}):e.messages,a=as({value:n,schema:nf.array(s2)});if(!a.success)throw new nW({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:n,system:e.system}}throw Error("unreachable")}({prompt:{system:n,prompt:a,messages:s},tools:t}),k=function({isEnabled:e=!1,tracer:t}={}){return e?t||au.g.getTracer("ai"):sb}(m);return sx({name:"ai.generateText",attributes:sk({telemetry:m,attributes:{...sv({operationId:"ai.generateText",telemetry:m}),...w,"ai.prompt":{input:()=>JSON.stringify({system:n,prompt:a,messages:s})},"ai.settings.maxSteps":d}}),tracer:k,fn:async n=>{var a,s,u,c,p,S,T;let A;let E=sg({maxRetries:i}),I={type:"regular",...function({tools:e,toolChoice:t,activeTools:r}){return null!=e&&Object.keys(e).length>0?{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{let r=t.type;switch(r){case void 0:case"function":return{type:"function",name:e,description:t.description,parameters:sl(t.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:t,toolChoice:r,activeTools:g})},j=function({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:i,seed:o,maxRetries:l}){if(null!=e){if(!Number.isInteger(e))throw new sB({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new sB({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new sB({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new sB({parameter:"topP",value:r,message:"topP must be a number"});if(null!=n&&"number"!=typeof n)throw new sB({parameter:"topK",value:n,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new sB({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=s&&"number"!=typeof s)throw new sB({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(null!=o&&!Number.isInteger(o))throw new sB({parameter:"seed",value:o,message:"seed must be an integer"});if(null!=l){if(!Number.isInteger(l))throw new sB({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new sB({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:null!=i&&i.length>0?i:void 0,seed:o,maxRetries:null!=l?l:2}}(_),O=[],C=[],N=0,$=[],P="",M=[],R={completionTokens:0,promptTokens:0,totalTokens:0},Z="initial";do{1===N&&(x.type="messages");let r=0===N?x.type:"messages",n=await sL({prompt:{type:r,system:x.system,messages:[...x.messages,...$]},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl});O=(null!=(a=(A=await E(()=>sx({name:"ai.generateText.doGenerate",attributes:sk({telemetry:m,attributes:{...sv({operationId:"ai.generateText.doGenerate",telemetry:m}),...w,"ai.prompt.format":{input:()=>r},"ai.prompt.messages":{input:()=>JSON.stringify(n)},"ai.prompt.tools":{input:()=>{var e;return null==(e=I.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=I.toolChoice?JSON.stringify(I.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":_.frequencyPenalty,"gen_ai.request.max_tokens":_.maxTokens,"gen_ai.request.presence_penalty":_.presencePenalty,"gen_ai.request.stop_sequences":_.stopSequences,"gen_ai.request.temperature":_.temperature,"gen_ai.request.top_k":_.topK,"gen_ai.request.top_p":_.topP}}),tracer:k,fn:async t=>{var a,s,i,u,c,d;let p=await e.doGenerate({mode:I,...j,inputFormat:r,prompt:n,providerMetadata:h,abortSignal:o,headers:l}),f={id:null!=(s=null==(a=p.response)?void 0:a.id)?s:y(),timestamp:null!=(u=null==(i=p.response)?void 0:i.timestamp)?u:v(),modelId:null!=(d=null==(c=p.response)?void 0:c.modelId)?d:e.modelId};return t.setAttributes(sk({telemetry:m,attributes:{"ai.response.finishReason":p.finishReason,"ai.response.text":{output:()=>p.text},"ai.response.toolCalls":{output:()=>JSON.stringify(p.toolCalls)},"ai.response.id":f.id,"ai.response.model":f.modelId,"ai.response.timestamp":f.timestamp.toISOString(),"ai.usage.promptTokens":p.usage.promptTokens,"ai.usage.completionTokens":p.usage.completionTokens,"ai.finishReason":p.finishReason,"ai.result.text":{output:()=>p.text},"ai.result.toolCalls":{output:()=>JSON.stringify(p.toolCalls)},"gen_ai.response.finish_reasons":[p.finishReason],"gen_ai.response.id":f.id,"gen_ai.response.model":f.modelId,"gen_ai.usage.input_tokens":p.usage.promptTokens,"gen_ai.usage.output_tokens":p.usage.completionTokens}})),{...p,response:f}}}))).toolCalls)?a:[]).map(e=>(function({toolCall:e,tools:t}){let r=e.toolName;if(null==t)throw new im({toolName:e.toolName});let n=t[r];if(null==n)throw new im({toolName:e.toolName,availableTools:Object.keys(t)});let a=sl(n.parameters),s=""===e.args.trim()?as({value:{},schema:a}):function({text:e,schema:t}){try{let r=ti.parse(e);if(null==t)return{success:!0,value:r};return as({value:r,schema:t})}catch(t){return{success:!1,error:nQ.isJSONParseError(t)?t:new nQ({text:e,cause:t})}}}({text:e.args,schema:a});if(!1===s.success)throw new iu({toolName:r,toolArgs:e.args,cause:s.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:s.value}})({toolCall:e,tools:t})),C=null==t?[]:await iv({toolCalls:O,tools:t,tracer:k,telemetry:m,abortSignal:o});let i={promptTokens:(T=A.usage).promptTokens,completionTokens:T.completionTokens,totalTokens:T.promptTokens+T.completionTokens};R.completionTokens+=i.completionTokens,R.promptTokens+=i.promptTokens,R.totalTokens+=i.totalTokens;let p="done";++N<d&&(f&&"length"===A.finishReason&&0===O.length?p="continue":O.length>0&&C.length===O.length&&(p="tool-result"));let g=null!=(s=A.text)?s:"",S="continue"===Z&&P.trimEnd()!==P?g.trimStart():g,F="continue"===p?function(e){let t=function(e){let t=e.match(ih);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}(e);return t?t.prefix+t.whitespace:e}(S):S;if(P="continue"===p||"continue"===Z?P+F:F,"continue"===Z){let e=$[$.length-1];"string"==typeof e.content?e.content+=F:e.content.push({text:F,type:"text"})}else $.push(...function({text:e="",tools:t,toolCalls:r,toolResults:n}){let a=[];return a.push({role:"assistant",content:[{type:"text",text:e},...r]}),n.length>0&&a.push({role:"tool",content:n.map(e=>{let r=t[e.toolName];return(null==r?void 0:r.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:r.experimental_toToolResultContent(e.result),experimental_content:r.experimental_toToolResultContent(e.result)}:{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}})}),a}({text:P,tools:null!=t?t:{},toolCalls:O,toolResults:C}));let D={stepType:Z,text:F,toolCalls:O,toolResults:C,finishReason:A.finishReason,usage:i,warnings:A.warnings,logprobs:A.logprobs,request:null!=(u=A.request)?u:{},response:{...A.response,headers:null==(c=A.rawResponse)?void 0:c.headers,messages:JSON.parse(JSON.stringify($))},experimental_providerMetadata:A.providerMetadata,isContinued:"continue"===p};M.push(D),await (null==b?void 0:b(D)),Z=p}while("done"!==Z);return n.setAttributes(sk({telemetry:m,attributes:{"ai.response.finishReason":A.finishReason,"ai.response.text":{output:()=>A.text},"ai.response.toolCalls":{output:()=>JSON.stringify(A.toolCalls)},"ai.usage.promptTokens":A.usage.promptTokens,"ai.usage.completionTokens":A.usage.completionTokens,"ai.finishReason":A.finishReason,"ai.result.text":{output:()=>A.text},"ai.result.toolCalls":{output:()=>JSON.stringify(A.toolCalls)}}})),new ib({text:P,toolCalls:O,toolResults:C,finishReason:A.finishReason,usage:R,warnings:A.warnings,request:null!=(p=A.request)?p:{},response:{...A.response,headers:null==(S=A.rawResponse)?void 0:S.headers,messages:$},logprobs:A.logprobs,responseMessages:$,steps:M,providerMetadata:A.providerMetadata})}})}async function iv({toolCalls:e,tools:t,tracer:r,telemetry:n,abortSignal:a}){return(await Promise.all(e.map(async e=>{let s=t[e.toolName];if((null==s?void 0:s.execute)==null)return;let i=await sx({name:"ai.toolCall",attributes:sk({telemetry:n,attributes:{...sv({operationId:"ai.toolCall",telemetry:n}),"ai.toolCall.name":e.toolName,"ai.toolCall.id":e.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(e.args)}}}),tracer:r,fn:async t=>{let r=await s.execute(e.args,{abortSignal:a});try{t.setAttributes(sk({telemetry:n,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch(e){}return r}});return{toolCallId:e.toolCallId,toolName:e.toolName,args:e.args,result:i}}))).filter(e=>null!=e)}var ib=class{constructor(e){this.text=e.text,this.toolCalls=e.toolCalls,this.toolResults=e.toolResults,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.request=e.request,this.response=e.response,this.responseMessages=e.responseMessages,this.roundtrips=e.steps,this.steps=e.steps,this.experimental_providerMetadata=e.providerMetadata,this.rawResponse={headers:e.response.headers},this.logprobs=e.logprobs}};function i_(e,t){let r,n;let a=e.getReader(),s=t.getReader(),i=!1,o=!1;async function l(e){try{null==r&&(r=a.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=s.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(i){await u(e);return}if(o){await l(e);return}null==r&&(r=a.read()),null==n&&(n=s.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:a})),n.then(e=>({result:e,reader:s}))]);t.done||e.enqueue(t.value),c===a?(r=void 0,t.done&&(await u(e),i=!0)):(n=void 0,t.done&&(o=!0,await l(e)))}catch(t){e.error(t)}},cancel(){a.cancel(),s.cancel()}})}an({prefix:"aitxt",size:24});var iw="AI_NoSuchProviderError",ix=`vercel.ai.error.${iw}`;function ik(e){let t=new TextEncoder,r="",n=e||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(e,a){let s="string"==typeof e?e:e.content;a.enqueue(t.encode(s)),r+=s,n.onToken&&await n.onToken(s),n.onText&&"string"==typeof e&&await n.onText(e)},async flush(){n.onCompletion&&await n.onCompletion(r),!n.onFinal||"experimental_onFunctionCall"in n||await n.onFinal(r)}})}L=Symbol.for(ix);function iS(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,n)=>{let a=t.decode(r);n.enqueue(e.encode(function(e,t){let r=sn.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}("text",a)))}})}new TextDecoder("utf-8");function iT(e,t){return iA(e,t)}function iA(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&iI(null==(r=e.data)?void 0:r.chunk,t);return}iI(e,t)}})).pipeThrough(ik(t)).pipeThrough(iS())}function iE(e,t){var r;let n=iA(e,null==t?void 0:t.callbacks),a=null==t?void 0:t.data,s=null==t?void 0:t.init;return new Response(a?i_(a.stream,n):n,{status:null!=(r=null==s?void 0:s.status)?r:200,statusText:null==s?void 0:s.statusText,headers:ie(s,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function iI(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function ij(e,t){return(function(e){let t;let r=e[Symbol.asyncIterator](),n=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return new ReadableStream({async pull(e){var t;let{value:a,done:s}=await r.next();if(s){e.close();return}let i=n(null!=(t=a.delta)?t:"");i&&e.enqueue(i)}})})(e).pipeThrough(ik(t)).pipeThrough(iS())}function iO(e,t={}){var r;let{init:n,data:a,callbacks:s}=t,i=ij(e,s);return new Response(a?i_(a.stream,i):i,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:ie(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}sc({},{toAIStream:()=>iT,toDataStream:()=>iA,toDataStreamResponse:()=>iE}),sc({},{toDataStream:()=>ij,toDataStreamResponse:()=>iO});Symbol("internal_openai_fn_messages"),Response;let iC=(0,B.j)("c55021cc21adeaf5e8bf92ce8dbe562a25a0ee72",iN);async function iN(e){let{text:t}=await iy({model:nC(e.model),maxTokens:e.maxTokens,temperature:e.temperature,maxRetries:5,prompt:e.prompt});return console.log("****************************** content start "),console.log(t),console.log("****************************** content end"),t.replace(/^[\s\S]*?\n---/,"---")}(0,H.h)([iC]),(0,B.j)("f70718a0eb8e6f33dbbc647a7d62a4f9af363464",iC);var i$=r(82361);let iP=(0,B.j)("b3d38c3f8c8c069590b17b8a47db23dbd3a7d459",iM);async function iM(e){console.log("reqst came");let t=nO({baseURL:"https://api.groq.com/openai/v1",apiKey:process.env.GROQ_API_KEY}),{text:r}=await iy({model:t("mixtral-8x7b-32768"),prompt:e});return r.replace(/^[\s\S]*?\n---/,"---")}(0,H.h)([iP]),(0,B.j)("5bb158193285ee3a766d06506dbb0499387d848a",iP);let iR=r(57147).promises;async function iZ(e){let{readable:t,writable:r}=new TransformStream,n=r.getWriter();return globalThis.eventEmitter.on("update",e=>{n.write(`data: ${JSON.stringify(e)}

`)}),e.signal.addEventListener("abort",()=>{n.close()}),new Response(t,{headers:{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}})}async function iF(e){let t=await e.text(),{readable:r,writable:n}=new TransformStream,a=n.getWriter(),s=0,i=JSON.parse(e.headers.get("languages"));for(let{value:r,label:n}of(await ed(K().join(`${process.cwd()}/public`,"blog-posts"))||await iR.mkdir(K().join(`${process.cwd()}/public`,"blog-posts")),await ed(K().join(`${process.cwd()}/public/blog-posts`,e.headers.get("uuid")))||await iR.mkdir(K().join(`${process.cwd()}/public/blog-posts`,e.headers.get("uuid"))),i)){let a,o=await eT(t,r),l=`${process.cwd()}/public/blog-posts/${e.headers.get("uuid")}/index.${r}.md`,u=`Translate the following MD file to the ${n} locale and provide the result in the exact MD format.

        1. Do not translate the "gist" tag or modify its content.

        2. Also, do not translate 'date', 'url', 'tags:', and 'categories:' and list of urls at the bottom if present. Only translate title, seoTitle, description, and summary properties. I noticed sometimes you translate 'tags:' and 'categories:' properties which you should not do so and it is very important. 

        3. Prepend the locale followed by a forward slash sign to the beginning of the url: property:

${o}`;s++;try{console.log(`emietting .....${s} ${e.headers.get("model")}`);let t=(s+1)/i.length*100,r=`Translating in ${n}, Progress: ${t.toFixed(2)}%`;globalThis.eventEmitter.emit("update",r),"Mixtral"==e.headers.get("model")&&(a=await iP(u)),"gpt-4o-mini"==e.headers.get("model")&&(a=await iC({model:"gpt-4o-mini",maxTokens:Number("8000"),temperature:Number("0.7"),maxRetries:5,prompt:u}));let c=a.replace(/^\s*```markdown\s*|\s*```$/g,""),d=await ek(o,c);await iR.writeFile(l,d),console.log(`File created: ${l}`)}catch(e){console.error(`Failed to create file ${l}:`,e)}}return a.close(),new Response(JSON.stringify({status:"success"}),{status:200})}globalThis.eventEmitter||(globalThis.eventEmitter=new i$.EventEmitter),(0,H.h)([iZ,iF]),(0,B.j)("971f594933864ba06767d9eae312520d74b15a00",iZ),(0,B.j)("f434b86a9144c55c3e4d1282bcb6638ca92a9bad",iF);let iD=new q.AppRouteRouteModule({definition:{kind:z.x.APP_ROUTE,page:"/api/openAI/route",pathname:"/api/openAI",filename:"route",bundlePath:"app/api/openAI/route"},resolvedPagePath:"/Users/Mustafa/Desktop/my-ai-app/src/app/api/openAI/route.ts",nextConfigOutput:"",userland:U}),{requestAsyncStorage:iL,staticGenerationAsyncStorage:iU,serverHooks:iq}=iD,iz="/api/openAI/route";function iJ(){return(0,J.patchFetch)({serverHooks:iq,staticGenerationAsyncStorage:iU})}},40618:(e,t)=>{"use strict";function r(e){for(let t=0;t<e.length;t++){let r=e[t];if("function"!=typeof r)throw Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`)}}Object.defineProperty(t,"h",{enumerable:!0,get:function(){return r}})},24330:(e,t,r)=>{"use strict";Object.defineProperty(t,"j",{enumerable:!0,get:function(){return a}});let n=r(51749);function a(e,t){return(0,n.registerServerReference)(t,e,null)}},37971:(e,t,r)=>{"use strict";var n=r(97049),a={stream:!0},s=new Map;function i(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function o(){}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,u=Symbol.for("react.element"),c=Symbol.for("react.lazy"),d=Symbol.iterator,p=Array.isArray,f=Object.getPrototypeOf,m=Object.prototype,h=new WeakMap;function g(e,t,r,n){var a=1,s=0,i=null;e=JSON.stringify(e,function e(o,l){if(null===l)return null;if("object"==typeof l){if("function"==typeof l.then){null===i&&(i=new FormData),s++;var u,c,g=a++;return l.then(function(n){n=JSON.stringify(n,e);var a=i;a.append(t+g,n),0==--s&&r(a)},function(e){n(e)}),"$@"+g.toString(16)}if(p(l))return l;if(l instanceof FormData){null===i&&(i=new FormData);var y=i,v=t+(o=a++)+"_";return l.forEach(function(e,t){y.append(v+t,e)}),"$K"+o.toString(16)}if(l instanceof Map)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),o=a++,i.append(t+o,l),"$Q"+o.toString(16);if(l instanceof Set)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),o=a++,i.append(t+o,l),"$W"+o.toString(16);if(null===(c=l)||"object"!=typeof c?null:"function"==typeof(c=d&&c[d]||c["@@iterator"])?c:null)return Array.from(l);if((o=f(l))!==m&&(null===o||null!==f(o)))throw Error("Only plain objects, and a few built-ins, can be passed to Server Actions. Classes or null prototypes are not supported.");return l}if("string"==typeof l)return"Z"===l[l.length-1]&&this[o]instanceof Date?"$D"+l:l="$"===l[0]?"$"+l:l;if("boolean"==typeof l)return l;if("number"==typeof l)return Number.isFinite(u=l)?0===u&&-1/0==1/u?"$-0":u:1/0===u?"$Infinity":-1/0===u?"$-Infinity":"$NaN";if(void 0===l)return"$undefined";if("function"==typeof l){if(void 0!==(l=h.get(l)))return l=JSON.stringify(l,e),null===i&&(i=new FormData),o=a++,i.set(t+o,l),"$F"+o.toString(16);throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof l){if(Symbol.for(o=l.description)!==l)throw Error("Only global symbols received from Symbol.for(...) can be passed to Server Functions. The symbol Symbol.for("+l.description+") cannot be found among global symbols.");return"$S"+o}if("bigint"==typeof l)return"$n"+l.toString(10);throw Error("Type "+typeof l+" is not supported as an argument to a Server Function.")}),null===i?r(e):(i.set(t+"0",e),0===s&&r(i))}var y=new WeakMap;function v(e){var t=h.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var r=null;if(null!==t.bound){if((r=y.get(t))||(n=t,i=new Promise(function(e,t){a=e,s=t}),g(n,"",function(e){if("string"==typeof e){var t=new FormData;t.append("0",e),e=t}i.status="fulfilled",i.value=e,a(e)},function(e){i.status="rejected",i.reason=e,s(e)}),r=i,y.set(t,r)),"rejected"===r.status)throw r.reason;if("fulfilled"!==r.status)throw r;t=r.value;var n,a,s,i,o=new FormData;t.forEach(function(t,r){o.append("$ACTION_"+e+":"+r,t)}),r=o,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:r}}function b(e,t){var r=h.get(this);if(!r)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(r.id!==e)return!1;var n=r.bound;if(null===n)return 0===t;switch(n.status){case"fulfilled":return n.value.length===t;case"pending":throw n;case"rejected":throw n.reason;default:throw"string"!=typeof n.status&&(n.status="pending",n.then(function(e){n.status="fulfilled",n.value=e},function(e){n.status="rejected",n.reason=e})),n}}function _(e,t,r){Object.defineProperties(e,{$$FORM_ACTION:{value:void 0===r?v:function(){var e=h.get(this);if(!e)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var t=e.bound;return null===t&&(t=Promise.resolve([])),r(e.id,t)}},$$IS_SIGNATURE_EQUAL:{value:b},bind:{value:k}}),h.set(e,t)}var w=Function.prototype.bind,x=Array.prototype.slice;function k(){var e=w.apply(this,arguments),t=h.get(this);if(t){var r=x.call(arguments,1),n=null;n=null!==t.bound?Promise.resolve(t.bound).then(function(e){return e.concat(r)}):Promise.resolve(r),Object.defineProperties(e,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:b},bind:{value:k}}),h.set(e,{id:t.id,bound:n})}return e}function S(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function T(e){switch(e.status){case"resolved_model":N(e);break;case"resolved_module":$(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":throw e;default:throw e.reason}}function A(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}function E(e,t,r){switch(e.status){case"fulfilled":A(t,e.value);break;case"pending":case"blocked":case"cyclic":e.value=t,e.reason=r;break;case"rejected":r&&A(r,e.reason)}}function I(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.reason;e.status="rejected",e.reason=t,null!==r&&A(r,t)}}function j(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.value,n=e.reason;e.status="resolved_module",e.value=t,null!==r&&($(e),E(e,r,n))}}S.prototype=Object.create(Promise.prototype),S.prototype.then=function(e,t){switch(this.status){case"resolved_model":N(this);break;case"resolved_module":$(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":case"cyclic":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var O=null,C=null;function N(e){var t=O,r=C;O=e,C=null;var n=e.value;e.status="cyclic",e.value=null,e.reason=null;try{var a=JSON.parse(n,e._response._fromJSON);if(null!==C&&0<C.deps)C.value=a,e.status="blocked",e.value=null,e.reason=null;else{var s=e.value;e.status="fulfilled",e.value=a,null!==s&&A(s,a)}}catch(t){e.status="rejected",e.reason=t}finally{O=t,C=r}}function $(e){try{var t=e.value,r=globalThis.__next_require__(t[0]);if(4===t.length&&"function"==typeof r.then){if("fulfilled"===r.status)r=r.value;else throw r.reason}var n="*"===t[2]?r:""===t[2]?r.__esModule?r.default:r:r[t[2]];e.status="fulfilled",e.value=n}catch(t){e.status="rejected",e.reason=t}}function P(e,t){e._chunks.forEach(function(e){"pending"===e.status&&I(e,t)})}function M(e,t){var r=e._chunks,n=r.get(t);return n||(n=new S("pending",null,null,e),r.set(t,n)),n}function R(e,t){if("resolved_model"===(e=M(e,t)).status&&N(e),"fulfilled"===e.status)return e.value;throw e.reason}function Z(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function F(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function D(e){var t,r=e.ssrManifest.moduleMap;return(r={_bundlerConfig:r,_moduleLoading:e.ssrManifest.moduleLoading,_callServer:void 0!==F?F:Z,_encodeFormAction:e.encodeFormAction,_nonce:e="string"==typeof e.nonce?e.nonce:void 0,_chunks:new Map,_stringDecoder:new TextDecoder,_fromJSON:null,_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]})._fromJSON=(t=r,function(e,r){return"string"==typeof r?function(e,t,r,n){if("$"===n[0]){if("$"===n)return u;switch(n[1]){case"$":return n.slice(1);case"L":return{$$typeof:c,_payload:e=M(e,t=parseInt(n.slice(2),16)),_init:T};case"@":if(2===n.length)return new Promise(function(){});return M(e,t=parseInt(n.slice(2),16));case"S":return Symbol.for(n.slice(2));case"F":return t=R(e,t=parseInt(n.slice(2),16)),function(e,t){function r(){var e=Array.prototype.slice.call(arguments),r=t.bound;return r?"fulfilled"===r.status?n(t.id,r.value.concat(e)):Promise.resolve(r).then(function(r){return n(t.id,r.concat(e))}):n(t.id,e)}var n=e._callServer;return _(r,t,e._encodeFormAction),r}(e,t);case"Q":return new Map(e=R(e,t=parseInt(n.slice(2),16)));case"W":return new Set(e=R(e,t=parseInt(n.slice(2),16)));case"I":return 1/0;case"-":return"$-0"===n?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(n.slice(2)));case"n":return BigInt(n.slice(2));default:switch((e=M(e,n=parseInt(n.slice(1),16))).status){case"resolved_model":N(e);break;case"resolved_module":$(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":var a;return n=O,e.then(function(e,t,r,n){if(C){var a=C;n||a.deps++}else a=C={deps:n?0:1,value:null};return function(n){t[r]=n,a.deps--,0===a.deps&&"blocked"===e.status&&(n=e.value,e.status="fulfilled",e.value=a.value,null!==n&&A(n,a.value))}}(n,t,r,"cyclic"===e.status),(a=n,function(e){return I(a,e)})),null;default:throw e.reason}}}return n}(t,this,e,r):"object"==typeof r&&null!==r?e=r[0]===u?{$$typeof:u,type:r[1],key:r[2],ref:null,props:r[3],_owner:null}:r:r}),r}function L(e,t){function n(t){P(e,t)}var u=t.getReader();u.read().then(function t(c){var d=c.value;if(c.done)P(e,Error("Connection closed."));else{var p=0,f=e._rowState,m=e._rowID,h=e._rowTag,g=e._rowLength;c=e._buffer;for(var y=d.length;p<y;){var v=-1;switch(f){case 0:58===(v=d[p++])?f=1:m=m<<4|(96<v?v-87:v-48);continue;case 1:84===(f=d[p])?(h=f,f=2,p++):64<f&&91>f?(h=f,f=3,p++):(h=0,f=3);continue;case 2:44===(v=d[p++])?f=4:g=g<<4|(96<v?v-87:v-48);continue;case 3:v=d.indexOf(10,p);break;case 4:(v=p+g)>d.length&&(v=-1)}var b=d.byteOffset+p;if(-1<v){p=new Uint8Array(d.buffer,b,v-p),g=e,b=h;var _=g._stringDecoder;h="";for(var w=0;w<c.length;w++)h+=_.decode(c[w],a);switch(h+=_.decode(p),b){case 73:!function(e,t,n){var a=e._chunks,u=a.get(t);n=JSON.parse(n,e._fromJSON);var c=function(e,t){if(e){var r=e[t[0]];if(e=r[t[2]])r=e.name;else{if(!(e=r["*"]))throw Error('Could not find the module "'+t[0]+'" in the React SSR Manifest. This is probably a bug in the React Server Components bundler.');r=t[2]}return 4===t.length?[e.id,e.chunks,r,1]:[e.id,e.chunks,r]}return t}(e._bundlerConfig,n);if(function(e,t,r){if(null!==e)for(var n=1;n<t.length;n+=2){var a=l.current;if(a){var s=a.preinitScript,i=e.prefix+t[n],o=e.crossOrigin;o="string"==typeof o?"use-credentials"===o?o:"":void 0,s.call(a,i,{crossOrigin:o,nonce:r})}}}(e._moduleLoading,n[1],e._nonce),n=function(e){for(var t=e[1],n=[],a=0;a<t.length;){var l=t[a++];t[a++];var u=s.get(l);if(void 0===u){u=r.e(l),n.push(u);var c=s.set.bind(s,l,null);u.then(c,o),s.set(l,u)}else null!==u&&n.push(u)}return 4===e.length?0===n.length?i(e[0]):Promise.all(n).then(function(){return i(e[0])}):0<n.length?Promise.all(n):null}(c)){if(u){var d=u;d.status="blocked"}else d=new S("blocked",null,null,e),a.set(t,d);n.then(function(){return j(d,c)},function(e){return I(d,e)})}else u?j(u,c):a.set(t,new S("resolved_module",c,null,e))}(g,m,h);break;case 72:if(m=h[0],g=JSON.parse(h=h.slice(1),g._fromJSON),h=l.current)switch(m){case"D":h.prefetchDNS(g);break;case"C":"string"==typeof g?h.preconnect(g):h.preconnect(g[0],g[1]);break;case"L":m=g[0],p=g[1],3===g.length?h.preload(m,p,g[2]):h.preload(m,p);break;case"m":"string"==typeof g?h.preloadModule(g):h.preloadModule(g[0],g[1]);break;case"S":"string"==typeof g?h.preinitStyle(g):h.preinitStyle(g[0],0===g[1]?void 0:g[1],3===g.length?g[2]:void 0);break;case"X":"string"==typeof g?h.preinitScript(g):h.preinitScript(g[0],g[1]);break;case"M":"string"==typeof g?h.preinitModuleScript(g):h.preinitModuleScript(g[0],g[1])}break;case 69:p=(h=JSON.parse(h)).digest,(h=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.")).stack="Error: "+h.message,h.digest=p,(b=(p=g._chunks).get(m))?I(b,h):p.set(m,new S("rejected",null,h,g));break;case 84:g._chunks.set(m,new S("fulfilled",h,null,g));break;case 68:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");default:(b=(p=g._chunks).get(m))?(g=b,m=h,"pending"===g.status&&(h=g.value,p=g.reason,g.status="resolved_model",g.value=m,null!==h&&(N(g),E(g,h,p)))):p.set(m,new S("resolved_model",h,null,g))}p=v,3===f&&p++,g=m=h=f=0,c.length=0}else{d=new Uint8Array(d.buffer,b,d.byteLength-p),c.push(d),g-=d.byteLength;break}}return e._rowState=f,e._rowID=m,e._rowTag=h,e._rowLength=g,u.read().then(t).catch(n)}}).catch(n)}t.createFromFetch=function(e,t){var r=D(t);return e.then(function(e){L(r,e.body)},function(e){P(r,e)}),M(r,0)},t.createFromReadableStream=function(e,t){return L(t=D(t),e),M(t,0)},t.createServerReference=function(e){return function(e,t,r){function n(){var r=Array.prototype.slice.call(arguments);return t(e,r)}return _(n,{id:e,bound:null},r),n}(e,F)},t.encodeReply=function(e){return new Promise(function(t,r){g(e,"",t,r)})}},30561:(e,t,r)=>{"use strict";e.exports=r(37971)},88769:()=>{},24672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DetachedPromise",{enumerable:!0,get:function(){return r}});class r{constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}},21890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{atLeastOneTask:function(){return a},scheduleImmediate:function(){return n},scheduleOnNextTick:function(){return r}});let r=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},n=e=>{setImmediate(e)};function a(){return new Promise(e=>n(e))}},9702:(e,t)=>{"use strict";let r,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return s},decrypt:function(){return l},encrypt:function(){return o},generateEncryptionKeyBase64:function(){return u},getActionEncryptionKey:function(){return m},getClientReferenceManifestSingleton:function(){return f},getServerModuleMap:function(){return p},setReferenceManifestsSingleton:function(){return d},stringToUint8Array:function(){return i}});let a=null;function s(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function i(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function o(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function l(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}async function u(e){if(e&&void 0!==n)return n;a||(a=new Promise(async(e,t)=>{try{let t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=await crypto.subtle.exportKey("raw",t),n=btoa(s(r));e([t,n])}catch(e){t(e)}}));let[t,i]=await a;return r=t,e&&(n=i),i}let c=Symbol.for("next.server.action-manifests");function d({clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}){globalThis[c]={clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}}function p(){let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.serverModuleMap}function f(){let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.clientReferenceManifest}async function m(){if(r)return r;let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Error("Missing encryption key for Server Actions");return r=await crypto.subtle.importKey("raw",i(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},60166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return p},encryptActionBoundArgs:function(){return d}}),r(88769);let n=r(51749),a=r(30561),s=r(18175),i=r(9702),o=new TextEncoder,l=new TextDecoder;async function u(e,t){let r=await (0,i.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=atob(t),a=n.slice(0,16),s=n.slice(16),o=l.decode(await (0,i.decrypt)(r,(0,i.stringToUint8Array)(a),(0,i.stringToUint8Array)(s)));if(!o.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return o.slice(e.length)}async function c(e,t){let r=await (0,i.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=new Uint8Array(16);crypto.getRandomValues(n);let a=(0,i.arrayBufferToString)(n.buffer),s=await (0,i.encrypt)(r,n,o.encode(e+t));return btoa(a+(0,i.arrayBufferToString)(s))}async function d(e,t){let r=(0,i.getClientReferenceManifestSingleton)(),a=await (0,s.streamToString)((0,n.renderToReadableStream)(t,r.clientModules));return await c(e,a)}async function p(e,t){let r=await u(e,await t),s=await (0,a.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(o.encode(r)),e.close()}}),{ssrManifest:{moduleLoading:{},moduleMap:{}}}),l=(0,i.getServerModuleMap)();return await (0,n.decodeReply)(await (0,a.encodeReply)(s),l)}},97049:(e,t,r)=>{"use strict";e.exports=r(23191).vendored["react-rsc"].ReactDOM},51749:(e,t,r)=>{"use strict";e.exports=r(23191).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},49303:(e,t,r)=>{"use strict";e.exports=r(30517)},63502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ENCODED_TAGS",{enumerable:!0,get:function(){return r}});let r={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])}}},18175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{chainStreams:function(){return d},continueDynamicDataResume:function(){return S},continueDynamicHTMLResume:function(){return k},continueDynamicPrerender:function(){return w},continueFizzStream:function(){return _},continueStaticPrerender:function(){return x},createBufferedTransformStream:function(){return m},createRootLayoutValidatorStream:function(){return b},renderToInitialFizzStream:function(){return h},streamFromString:function(){return p},streamToString:function(){return f}});let n=r(64994),a=r(71376),s=r(24672),i=r(21890),o=r(63502),l=r(5893);function u(){}let c=new TextEncoder;function d(...e){if(0===e.length)throw Error("Invariant: chainStreams requires at least one stream");if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,n=e[0].pipeTo(r,{preventClose:!0}),a=1;for(;a<e.length-1;a++){let t=e[a];n=n.then(()=>t.pipeTo(r,{preventClose:!0}))}let s=e[a];return(n=n.then(()=>s.pipeTo(r))).catch(u),t}function p(e){return new ReadableStream({start(t){t.enqueue(c.encode(e)),t.close()}})}async function f(e){let t=new TextDecoder("utf-8",{fatal:!0}),r="";for await(let n of e)r+=t.decode(n,{stream:!0});return r+t.decode()}function m(){let e,t=[],r=0,n=n=>{if(e)return;let a=new s.DetachedPromise;e=a,(0,i.scheduleImmediate)(()=>{try{let e=new Uint8Array(r),a=0;for(let r=0;r<t.length;r++){let n=t[r];e.set(n,a),a+=n.byteLength}t.length=0,r=0,n.enqueue(e)}catch{}finally{e=void 0,a.resolve()}})};return new TransformStream({transform(e,a){t.push(e),r+=e.byteLength,n(a)},flush(){if(e)return e.promise}})}function h({ReactDOMServer:e,element:t,streamOptions:r}){return(0,n.getTracer)().trace(a.AppRenderSpan.renderToReadableStream,async()=>e.renderToReadableStream(t,r))}function g(e){let t=!1,r=!1,n=!1;return new TransformStream({async transform(a,s){if(n=!0,r){s.enqueue(a);return}let u=await e();if(t){if(u){let e=c.encode(u);s.enqueue(e)}s.enqueue(a),r=!0}else{let e=(0,l.indexOfUint8Array)(a,o.ENCODED_TAGS.CLOSED.HEAD);if(-1!==e){if(u){let t=c.encode(u),r=new Uint8Array(a.length+t.length);r.set(a.slice(0,e)),r.set(t,e),r.set(a.slice(e),e+t.length),s.enqueue(r)}else s.enqueue(a);r=!0,t=!0}}t?(0,i.scheduleImmediate)(()=>{r=!1}):s.enqueue(a)},async flush(t){if(n){let r=await e();r&&t.enqueue(c.encode(r))}}})}function y(e){let t=null,r=!1;async function n(n){if(t)return;let a=e.getReader();await (0,i.atLeastOneTask)();try{for(;;){let{done:e,value:t}=await a.read();if(e){r=!0;return}n.enqueue(t)}}catch(e){n.error(e)}}return new TransformStream({transform(e,r){r.enqueue(e),t||(t=n(r))},flush(e){if(!r)return t||n(e)}})}function v(e){let t=!1,r=c.encode(e);return new TransformStream({transform(n,a){if(t)return a.enqueue(n);let s=(0,l.indexOfUint8Array)(n,r);if(s>-1){if(t=!0,n.length===e.length)return;let r=n.slice(0,s);if(a.enqueue(r),n.length>e.length+s){let t=n.slice(s+e.length);a.enqueue(t)}}else a.enqueue(n)},flush(e){e.enqueue(r)}})}function b(){let e=!1,t=!1;return new TransformStream({async transform(r,n){!e&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.HTML)>-1&&(e=!0),!t&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.BODY)>-1&&(t=!0),n.enqueue(r)},flush(r){let n=[];e||n.push("html"),t||n.push("body"),n.length&&r.enqueue(c.encode(`<script>self.__next_root_layout_missing_tags=${JSON.stringify(n)}</script>`))}})}async function _(e,{suffix:t,inlinedDataStream:r,isStaticGeneration:n,getServerInsertedHTML:a,serverInsertedHTMLToHead:o,validateRootLayout:l}){let u="</body></html>",d=t?t.split(u,1)[0]:null;return n&&"allReady"in e&&await e.allReady,function(e,t){let r=e;for(let e of t)e&&(r=r.pipeThrough(e));return r}(e,[m(),a&&!o?new TransformStream({transform:async(e,t)=>{let r=await a();r&&t.enqueue(c.encode(r)),t.enqueue(e)}}):null,null!=d&&d.length>0?function(e){let t,r=!1,n=r=>{let n=new s.DetachedPromise;t=n,(0,i.scheduleImmediate)(()=>{try{r.enqueue(c.encode(e))}catch{}finally{t=void 0,n.resolve()}})};return new TransformStream({transform(e,t){t.enqueue(e),r||(r=!0,n(t))},flush(n){if(t)return t.promise;r||n.enqueue(c.encode(e))}})}(d):null,r?y(r):null,l?b():null,v(u),a&&o?g(a):null])}async function w(e,{getServerInsertedHTML:t}){return e.pipeThrough(m()).pipeThrough(new TransformStream({transform(e,t){(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.HTML)||(e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.BODY),e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.HTML),t.enqueue(e))}})).pipeThrough(g(t))}async function x(e,{inlinedDataStream:t,getServerInsertedHTML:r}){return e.pipeThrough(m()).pipeThrough(g(r)).pipeThrough(y(t)).pipeThrough(v("</body></html>"))}async function k(e,{inlinedDataStream:t,getServerInsertedHTML:r}){return e.pipeThrough(m()).pipeThrough(g(r)).pipeThrough(y(t)).pipeThrough(v("</body></html>"))}async function S(e,{inlinedDataStream:t}){return e.pipeThrough(y(t)).pipeThrough(v("</body></html>"))}},5893:(e,t)=>{"use strict";function r(e,t){if(0===t.length)return 0;if(0===e.length||t.length>e.length)return -1;for(let r=0;r<=e.length-t.length;r++){let n=!0;for(let a=0;a<t.length;a++)if(e[r+a]!==t[a]){n=!1;break}if(n)return r}return -1}function n(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function a(e,t){let n=r(e,t);if(0===n)return e.subarray(t.length);if(!(n>-1))return e;{let r=new Uint8Array(e.length-t.length);return r.set(e.slice(0,n)),r.set(e.slice(n+t.length),n),r}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{indexOfUint8Array:function(){return r},isEquivalentUint8Arrays:function(){return n},removeFromUint8Array:function(){return a}})},45762:e=>{"use strict";let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function a(e,a,i){null==i&&null!==a&&"object"==typeof a&&(i=a,a=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let o=JSON.parse(e,a);if(null===o||"object"!=typeof o)return o;let l=i&&i.protoAction||"error",u=i&&i.constructorAction||"error";if("ignore"===l&&"ignore"===u)return o;if("ignore"!==l&&"ignore"!==u){if(!1===r.test(e)&&!1===n.test(e))return o}else if("ignore"!==l&&"ignore"===u){if(!1===r.test(e))return o}else if(!1===n.test(e))return o;return s(o,{protoAction:l,constructorAction:u,safe:i&&i.safe})}function s(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let a=[e];for(;a.length;){let e=a;for(let s of(a=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(s,"__proto__")){if(!0===n)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete s.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype")){if(!0===n)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete s.constructor}for(let e in s){let t=s[e];t&&"object"==typeof t&&a.push(t)}}}return e}function i(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return a(e,t,r)}finally{Error.stackTraceLimit=n}}e.exports=i,e.exports.default=i,e.exports.parse=i,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return a(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=s}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(61915));module.exports=n})();